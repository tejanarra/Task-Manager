"use strict";(self.webpackChunktask_manager_frontend=self.webpackChunktask_manager_frontend||[]).push([[871],{869:(e,s,t)=>{t.d(s,{A:()=>n});t(43),t(421);var a=t(579);const n=e=>{let{theme:s,show:t,title:n="Confirm Action",message:r="Are you sure you want to proceed?",onConfirm:i,onCancel:c}=e;return t?(0,a.jsx)("div",{className:"custom-modal-overlay d-flex align-items-center justify-content-center",tabIndex:"-1",role:"dialog",onClick:c,children:(0,a.jsxs)("div",{className:"custom-modal-content",role:"document",onClick:e=>e.stopPropagation(),children:[(0,a.jsxs)("div",{className:"custom-modal-header",children:[(0,a.jsx)("h5",{className:"modal2-title fw-bold",children:n}),(0,a.jsx)("button",{type:"button",className:"btn-close","aria-label":"Close",onClick:c})]}),(0,a.jsx)("div",{className:"custom-modal-body",children:(0,a.jsx)("p",{className:"text-".concat("dark"===s?"light":"muted"," mb-4"),children:r})}),(0,a.jsxs)("div",{className:"custom-modal-footer d-flex justify-content-end gap-2",children:[(0,a.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:c,children:"Cancel"}),(0,a.jsx)("button",{type:"button",className:"btn sign-in-btn",onClick:i,children:"Confirm"})]})]})}):null}},871:(e,s,t)=>{t.r(s),t.d(s,{default:()=>g});var a=t(555),n=t(43),r=t(505),i=t(729),c=(t(421),t(869)),l=t(579);const o=e=>{let{value:s,label:t,checked:a,onChange:n,className:r="",disabled:i=!1}=e;return(0,l.jsx)("div",{className:"d-inline-block ".concat(r),children:(0,l.jsxs)("label",{className:"reminder-checkbox-label d-inline-flex align-items-center ".concat(i?"disabled":""),children:[(0,l.jsx)("input",{type:"checkbox",className:"form-check-input me-2",checked:a,onChange:e=>!i&&n(e.target.checked),disabled:i,"aria-label":"Set reminder for ".concat(t),"aria-describedby":"reminder-".concat(s,"-desc")}),(0,l.jsx)("span",{id:"reminder-".concat(s,"-desc"),children:t})]})})};var d=t(291);const m=e=>{let{tempDeadline:s,tempReminders:t,setTempReminders:r,theme:i,ALL_INTERVALS:c,formatHoursLabel:m}=e;const u=new Date,h=s?new Date(s):null,p=h&&h>u?(h-u)/36e5:0,b=t.some((e=>"daily"===e.type)),x=t.some((e=>"weekly"===e.type)),g=e=>{r((s=>{if(e){const e=s.filter((e=>"daily"!==e.type)),t=(()=>{const e=[],s=Math.floor(p/24);for(let t=1;t<=s;t++){const s=24*t;e.push({remindBefore:s,sent:!1,type:"daily",dayNumber:t})}return e})();return[...e,...t]}return s.filter((e=>"daily"!==e.type))}))},j=e=>{r((s=>{if(e){const e=s.filter((e=>"weekly"!==e.type)),t=(()=>{const e=[],s=Math.floor(p/168);for(let t=1;t<=s;t++){const s=24*t*7;e.push({remindBefore:s,sent:!1,type:"weekly",weekNumber:t})}return e})();return[...e,...t]}return s.filter((e=>"weekly"!==e.type))}))},f=c.filter((e=>e.value<=p)),y=t.filter((e=>!e.type&&!c.some((s=>Math.abs(s.value-e.remindBefore)<.01))&&e.remindBefore<=p)).map((e=>{if(e.customDate)return{value:e.remindBefore,label:new Date(e.customDate).toLocaleString()};if(e.remindBefore>168&&h){const s=new Date(h.getTime()-36e5*e.remindBefore);return{value:e.remindBefore,label:s.toLocaleString()}}return{value:e.remindBefore,label:m(e.remindBefore)}})),N=(e,s)=>{r((t=>{const n=t.find((s=>!s.type&&Math.abs(s.remindBefore-e)<.01));return s?n?t.map((s=>!s.type&&Math.abs(s.remindBefore-e)<.01?(0,a.A)((0,a.A)({},s),{},{sent:!1}):s)):[...t,{remindBefore:e,sent:!1}]:t.filter((s=>s.type||Math.abs(s.remindBefore-e)>=.01))}))},[k,v]=(0,n.useState)(""),[w,S]=(0,n.useState)(!1),C=Math.floor(p/24),A=Math.floor(p/168);return(0,l.jsxs)("div",{className:"task-reminders-container",children:[(0,l.jsx)("div",{className:"reminders-dropdown",onClick:()=>S(!w),children:(0,l.jsxs)("div",{className:"reminders-dropdown-header",children:[(0,l.jsx)("h6",{children:"Reminders"}),w?(0,l.jsx)("i",{className:"bi bi-chevron-up"}):(0,l.jsx)("i",{className:"bi bi-chevron-down"})]})}),w&&(0,l.jsxs)("div",{className:"reminders-dropdown-content",children:[(0,l.jsxs)("div",{className:"custom-reminder-section",children:[(0,l.jsx)("label",{className:"reminder-section-label",children:"Add Custom Reminder:"}),(0,l.jsxs)("div",{className:"custom-reminder-input-group",children:[(0,l.jsx)("input",{type:"datetime-local",value:k,onChange:e=>v(e.target.value),min:(0,d.wM)((new Date).toISOString()),max:s?(0,d.wM)(s):void 0}),(0,l.jsx)("button",{className:"btn btn-sm ".concat("dark"===i?"btn-outline-light":"btn-outline-dark"),onClick:()=>{if(!k)return;const e=new Date(k);if(isNaN(e))return;if(!h||e>=h)return;const s=(h-e)/36e5;s>0&&s<=p&&r((t=>t.some((e=>!e.type&&Math.abs(e.remindBefore-s)<.01))?t:[...t,{remindBefore:s,sent:!1,customDate:e.toISOString()}])),v("")},children:"Add"})]})]}),(C>0||A>0)&&(0,l.jsxs)("div",{className:"recurring-reminders-section",children:[(0,l.jsx)("label",{className:"reminder-section-label",children:"Recurring Reminders:"}),(0,l.jsxs)("div",{className:"recurring-options",children:[C>0&&(0,l.jsxs)("div",{className:"recurring-option",children:[(0,l.jsx)("input",{type:"checkbox",checked:b,onChange:e=>g(e.target.checked),id:"daily-reminders"}),(0,l.jsxs)("label",{htmlFor:"daily-reminders",children:["Every Day (",C," reminder",1!==C?"s":"",")"]})]}),A>0&&(0,l.jsxs)("div",{className:"recurring-option",children:[(0,l.jsx)("input",{type:"checkbox",checked:x,onChange:e=>j(e.target.checked),id:"weekly-reminders"}),(0,l.jsxs)("label",{htmlFor:"weekly-reminders",children:["Every Week (",A," reminder",1!==A?"s":"",")"]})]})]})]}),f.length>0&&(0,l.jsxs)("div",{className:"reminder-section",children:[(0,l.jsx)("label",{className:"reminder-section-label",children:"One-time Reminders:"}),(0,l.jsx)("div",{className:"reminder-grid",children:f.map((e=>{const s=t.find((s=>!s.type&&Math.abs(s.remindBefore-e.value)<.01)),a=!!s&&!s.sent;return(0,l.jsx)(o,{value:e.value,label:e.label,checked:a,onChange:s=>N(e.value,s)},e.value)}))})]}),y.length>0&&(0,l.jsxs)("div",{className:"reminder-section",children:[(0,l.jsx)("label",{className:"reminder-section-label",children:"Custom One-time Reminders:"}),(0,l.jsx)("div",{className:"reminder-grid",children:y.map((e=>{const s=t.find((s=>!s.type&&Math.abs(s.remindBefore-e.value)<.01)),a=!!s&&!s.sent;return(0,l.jsx)(o,{value:e.value,label:e.label,checked:a,onChange:s=>N(e.value,s)},e.value)}))})]}),(b||x)&&(0,l.jsx)("div",{className:"active-reminders-summary",children:(0,l.jsxs)("small",{children:[(0,l.jsx)("strong",{children:"Active recurring reminders:"}),b&&" Daily reminders (".concat(t.filter((e=>"daily"===e.type)).length," total)"),b&&x&&", ",x&&" Weekly reminders (".concat(t.filter((e=>"weekly"===e.type)).length," total)")]})})]})]})},u=[{value:1,label:"1 hr"},{value:24,label:"1 day"},{value:168,label:"1 week"}];function h(e){return e<1?"".concat(Math.round(60*e)," min"):Number.isInteger(e)?"".concat(e," hr").concat(e>1?"s":""):"".concat(e," hrs")}const p=e=>{let{theme:s,task:t,setTasks:i,isNewTask:o=!1,onSave:p=()=>{},onCancel:b=()=>{}}=e;const[x,g]=(0,n.useState)(o),[j,f]=(0,n.useState)(t.title),[y,N]=(0,n.useState)(t.description),[k,v]=(0,n.useState)(t.status),[w,S]=(0,n.useState)(t.deadline||null),[C,A]=(0,n.useState)(Array.isArray(t.reminders)?t.reminders:[]),[D,M]=(0,n.useState)(!1),[T,I]=(0,n.useState)(!1),B=(0,n.useRef)(null),E=(0,n.useCallback)((()=>{f(t.title),N(t.description),v(t.status),S(t.deadline||null),A(Array.isArray(t.reminders)?t.reminders:[]),o?b(t.id):g(!1)}),[t.title,t.description,t.status,t.deadline,t.reminders,o,b,t.id]);(0,n.useEffect)((()=>{const e=e=>{x&&B.current&&!B.current.contains(e.target)&&E()};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)}),[x,E]);const P=async()=>{if(!j.trim()||!y.trim())return;I(!0);if(!(j!==t.title||y!==t.description||k!==t.status||w!==t.deadline||JSON.stringify(C)!==JSON.stringify(t.reminders))&&!o)return g(!1),void I(!1);const e=new Date,s=w?new Date(w):null,n=s&&s>e?(s-e)/36e5:0;let c;c=n>0?(e=>{const s=e.some((e=>"daily"===e.type)),t=e.some((e=>"weekly"===e.type));let a=e.filter((e=>!e.type&&e.remindBefore<=n));if(s&&n>0){const e=Math.floor(n/24);for(let s=1;s<=e;s++){const e=24*s;a.push({remindBefore:e,sent:!1,type:"daily",dayNumber:s})}}if(t&&n>0){const e=Math.floor(n/168);for(let s=1;s<=e;s++){const e=24*s*7;a.push({remindBefore:e,sent:!1,type:"weekly",weekNumber:s})}}return a})(C):[];const l={title:j.trim(),description:y.trim(),status:k,deadline:w?s.toISOString():null,reminders:c};try{if(o)p((0,a.A)((0,a.A)({},t),l));else{const e=await(0,r.lC)(t.id,l);i((s=>s.map((s=>s.id===e.data.id?e.data:s)))),g(!1)}}catch(d){console.error("Error updating task:",d)}finally{I(!1)}},R=(e=>{switch(e){case"completed":return"#007a00";case"in-progress":return"#daa520";default:return"#a00000"}})(t.status),L=w&&new Date(w)>new Date,O=(()=>{if(!C||0===C.length)return null;const e=C.filter((e=>"daily"===e.type)).length,s=C.filter((e=>"weekly"===e.type)).length,t=C.filter((e=>!e.type)).length,a=[];return e>0&&a.push("Daily (".concat(e,")")),s>0&&a.push("Weekly (".concat(s,")")),t>0&&a.push("One-time (".concat(t,")")),a.length>0?a.join(", "):null})();return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{ref:B,className:"task-card ".concat("dark"===s?"dark-mode":""," ").concat(T?"loading":""," ").concat(o?"new-task":""),onClick:()=>!x&&g(!0),children:[(0,l.jsx)("div",{className:"task-strip",style:{backgroundColor:R}}),(0,l.jsxs)("div",{className:"task-card-content",children:[!x&&(0,l.jsx)("i",{className:"bi ".concat("completed"===t.status?"bi-check-circle":"in-progress"===t.status?"bi-hourglass":"bi-ban"," status-icon"),style:{color:R}}),x?(0,l.jsxs)("div",{className:"task-form-grid",children:[(0,l.jsxs)("div",{className:"task-form-group full-width",children:[(0,l.jsx)("label",{className:"form-label",children:"Title"}),(0,l.jsx)("input",{type:"text",className:"form-control",value:j,onChange:e=>f(e.target.value),placeholder:"Enter task title..."})]}),(0,l.jsxs)("div",{className:"task-form-group full-width",children:[(0,l.jsx)("label",{className:"form-label",children:"Description"}),(0,l.jsx)("textarea",{className:"form-control",rows:3,value:y,onChange:e=>N(e.target.value),placeholder:"Enter task description..."})]}),(0,l.jsxs)("div",{className:"task-form-group",children:[(0,l.jsx)("label",{className:"form-label",children:"Status"}),(0,l.jsxs)("select",{className:"form-select",value:k,onChange:e=>v(e.target.value),children:[(0,l.jsx)("option",{value:"not-started",children:"Not Started"}),(0,l.jsx)("option",{value:"in-progress",children:"In Progress"}),(0,l.jsx)("option",{value:"completed",children:"Completed"})]})]}),(0,l.jsxs)("div",{className:"task-form-group",children:[(0,l.jsx)("label",{className:"form-label",children:"Deadline"}),(0,l.jsx)("input",{type:"datetime-local",className:"form-control",value:w?(0,d.wM)(w):"",onChange:e=>S(e.target.value)})]}),L&&(0,l.jsx)("div",{className:"task-form-group full-width",children:(0,l.jsx)(m,{tempDeadline:w,tempReminders:C,setTempReminders:A,theme:s,ALL_INTERVALS:u,formatHoursLabel:h})})]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("h5",{className:"task-title",style:{color:R},children:j}),(0,l.jsx)("p",{className:"task-description",children:y})]}),(0,l.jsxs)("div",{className:"task-metadata",children:[(0,l.jsxs)("div",{className:"task-metadata-item",children:[(0,l.jsx)("strong",{children:"Created"}),(0,l.jsx)("span",{children:(0,d.fw)(t.createdAt)})]}),(0,l.jsxs)("div",{className:"task-metadata-item",children:[(0,l.jsx)("strong",{children:"Deadline"}),(0,l.jsx)("span",{children:t.deadline?(0,d.fw)(t.deadline):"No deadline set"})]})]}),x&&(0,l.jsxs)("div",{className:"task-actions",children:[!o&&(0,l.jsx)("button",{className:"btn ".concat("dark"===s?"btn-outline-danger":"btn-secondary"),onClick:e=>{e.stopPropagation(),M(!0)},disabled:T,children:T?"Deleting...":"Delete"}),(0,l.jsx)("button",{className:"btn ".concat("dark"===s?"btn-outline-light":"btn-dark"),onClick:e=>{e.stopPropagation(),P()},disabled:!j.trim()||!y.trim()||T,children:T?"Saving...":"Save"})]}),!x&&O&&(0,l.jsxs)("div",{className:"reminder-indicator",title:"Reminders: ".concat(O),children:[(0,l.jsx)("i",{className:"bi bi-clock"}),(0,l.jsx)("small",{children:O})]})]})]}),(0,l.jsx)(c.A,{theme:s,show:D,title:"Delete Task",message:"Are you sure you want to delete this task? This action cannot be undone.",onConfirm:async()=>{I(!0);try{await(0,r.vq)(t.id),i((e=>e.filter((e=>e.id!==t.id)))),M(!1)}catch(e){console.error("Error deleting task:",e)}finally{I(!1),M(!1)}},onCancel:()=>M(!1)})]})},b=e=>{let{show:s,onClose:t,onTaskGenerated:a,theme:i}=e;const[c,o]=(0,n.useState)("quick"),[d,m]=(0,n.useState)(""),[u,h]=(0,n.useState)([]),[p,b]=(0,n.useState)(""),[x,g]=(0,n.useState)(!1),[j,f]=(0,n.useState)(null),y=(0,n.useRef)(null),N=(0,n.useRef)(null);(0,n.useEffect)((()=>{s&&N.current&&N.current.focus()}),[s,c]),(0,n.useEffect)((()=>{var e;null===(e=y.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})}),[u]);const k=async()=>{if(!d.trim())return;g(!0),f(null);const e=await(0,r.Pr)(d);if(e.success){const s=e.data,n={id:"temp-".concat(Date.now()),title:s.title,description:s.description,status:s.status||"not-started",deadline:s.deadline,reminders:s.reminders||[],createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString(),priority:1};a(n),m(""),t()}else f(e.error);g(!1)},v=async()=>{if(!p.trim())return;const e={role:"user",content:p.trim(),timestamp:(new Date).toISOString()};h((s=>[...s,e])),b(""),g(!0),f(null);const s=u.map((e=>({role:e.role,content:e.content}))),t=await(0,r.gQ)(e.content,s);if(t.success){const e={role:"assistant",content:t.data.reply,timestamp:(new Date).toISOString()};h((s=>[...s,e]))}else f(t.error);g(!1)},w=(e,s)=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),s())};return s?(0,l.jsx)("div",{className:"ai-modal-overlay",onClick:t,children:(0,l.jsxs)("div",{className:"ai-modal-content ".concat("dark"===i?"dark-mode":""),onClick:e=>e.stopPropagation(),children:[(0,l.jsxs)("div",{className:"ai-modal-header",children:[(0,l.jsxs)("h3",{children:[(0,l.jsx)("i",{className:"bi bi-robot"})," AI Task Assistant"]}),(0,l.jsx)("button",{className:"close-button",onClick:t,children:(0,l.jsx)("i",{className:"bi bi-x-lg"})})]}),(0,l.jsxs)("div",{className:"ai-mode-selector",children:[(0,l.jsxs)("button",{className:"mode-button ".concat("quick"===c?"active":""),onClick:()=>o("quick"),children:[(0,l.jsx)("i",{className:"bi bi-lightning-charge"}),"Quick Generate"]}),(0,l.jsxs)("button",{className:"mode-button ".concat("chat"===c?"active":""),onClick:()=>o("chat"),children:[(0,l.jsx)("i",{className:"bi bi-chat-dots"}),"Chat Mode"]})]}),j&&(0,l.jsxs)("div",{className:"error-banner",children:[(0,l.jsx)("i",{className:"bi bi-exclamation-triangle"}),j]}),"quick"===c?(0,l.jsxs)("div",{className:"quick-mode",children:[(0,l.jsxs)("div",{className:"quick-mode-content",children:[(0,l.jsx)("label",{className:"form-label",children:"Describe your task:"}),(0,l.jsx)("textarea",{ref:N,className:"form-control",rows:4,value:d,onChange:e=>m(e.target.value),onKeyDown:e=>w(e,k),placeholder:"E.g., 'Create a task to prepare for my presentation next Friday' or 'Remind me to buy groceries tomorrow at 5pm'",disabled:x}),(0,l.jsxs)("div",{className:"quick-mode-suggestions",children:[(0,l.jsx)("small",{children:"Try these examples:"}),(0,l.jsx)("button",{className:"suggestion-chip",onClick:()=>m("Schedule a dentist appointment for next week"),disabled:x,children:"Schedule appointment"}),(0,l.jsx)("button",{className:"suggestion-chip",onClick:()=>m("Plan weekend grocery shopping"),disabled:x,children:"Plan shopping"}),(0,l.jsx)("button",{className:"suggestion-chip",onClick:()=>m("Prepare project report due in 3 days"),disabled:x,children:"Project deadline"})]})]}),(0,l.jsxs)("div",{className:"modal-actions",children:[(0,l.jsx)("button",{className:"btn btn-secondary",onClick:t,disabled:x,children:"Cancel"}),(0,l.jsx)("button",{className:"btn btn-primary",onClick:k,disabled:!d.trim()||x,children:x?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("span",{className:"spinner-border spinner-border-sm me-2"}),"Generating..."]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("i",{className:"bi bi-magic me-2"}),"Generate Task"]})})]})]}):(0,l.jsxs)("div",{className:"chat-mode",children:[(0,l.jsxs)("div",{className:"chat-messages",children:[0===u.length?(0,l.jsxs)("div",{className:"chat-empty-state",children:[(0,l.jsx)("i",{className:"bi bi-chat-heart"}),(0,l.jsx)("p",{children:"Start a conversation with AI to create your task"}),(0,l.jsx)("small",{children:"Ask questions, get suggestions, and refine your task details"})]}):u.map(((e,s)=>(0,l.jsxs)("div",{className:"chat-message ".concat("user"===e.role?"user":"assistant"),children:[(0,l.jsx)("div",{className:"message-avatar",children:"user"===e.role?(0,l.jsx)("i",{className:"bi bi-person-circle"}):(0,l.jsx)("i",{className:"bi bi-robot"})}),(0,l.jsxs)("div",{className:"message-content",children:[(0,l.jsx)("div",{className:"message-text",children:e.content}),(0,l.jsx)("div",{className:"message-time",children:new Date(e.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]},s))),x&&(0,l.jsxs)("div",{className:"chat-message assistant",children:[(0,l.jsx)("div",{className:"message-avatar",children:(0,l.jsx)("i",{className:"bi bi-robot"})}),(0,l.jsx)("div",{className:"message-content",children:(0,l.jsxs)("div",{className:"typing-indicator",children:[(0,l.jsx)("span",{}),(0,l.jsx)("span",{}),(0,l.jsx)("span",{})]})})]}),(0,l.jsx)("div",{ref:y})]}),(0,l.jsxs)("div",{className:"chat-input-container",children:[(0,l.jsx)("input",{ref:N,type:"text",className:"form-control",value:p,onChange:e=>b(e.target.value),onKeyDown:e=>w(e,v),placeholder:"Type your message...",disabled:x}),(0,l.jsx)("button",{className:"send-button",onClick:v,disabled:!p.trim()||x,children:(0,l.jsx)("i",{className:"bi bi-send-fill"})})]}),(0,l.jsxs)("div",{className:"chat-actions",children:[(0,l.jsxs)("button",{className:"btn btn-sm btn-outline-secondary",onClick:()=>{h([]),f(null)},disabled:x||0===u.length,children:[(0,l.jsx)("i",{className:"bi bi-arrow-clockwise me-1"}),"Reset"]}),(0,l.jsxs)("button",{className:"btn btn-sm btn-primary",onClick:async()=>{if(g(!0),f(null),0===u.length)return f("No conversation found to generate task from"),void g(!1);const e=u.map((e=>"".concat("user"===e.role?"User":"Assistant",": ").concat(e.content))).join("\n"),s="Based on this conversation, create a task:\n\n".concat(e,"\n\nCreate a detailed task with appropriate deadline and reminders based on the user's requirements discussed above."),n=await(0,r.Pr)(s);if(n.success){const e=n.data,s={id:"temp-".concat(Date.now()),title:e.title,description:e.description,status:e.status||"not-started",deadline:e.deadline,reminders:e.reminders||[],createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString(),priority:1};a(s),h([]),t()}else f(n.error);g(!1)},disabled:x||0===u.length,children:[(0,l.jsx)("i",{className:"bi bi-check2-circle me-1"}),"Create Task"]})]})]})]})}):null};var x=t(150);const g=e=>{let{theme:s}=e;const{user:t,logout:c}=(0,i.A)(),[o,d]=(0,n.useState)(null),[m,u]=(0,n.useState)(null),[h,g]=(0,n.useState)(!1);(0,n.useEffect)((()=>{(async()=>{if(t)try{const e=await(0,r.j)();d(e.data)}catch(e){console.error("Error loading tasks:",e),e.response&&403===e.response.status&&c()}})()}),[t,c]);const j=async e=>{try{const s=await(0,r.UT)({title:e.title,description:e.description,status:e.status,deadline:e.deadline,priority:o.length+1,reminders:e.reminders});d((t=>t.map((t=>t.id===e.id?s.data:t)))),u(null)}catch(s){console.error("Error saving new task:",s),s.response&&403===s.response.status&&c()}},f=e=>{d((s=>s.filter((s=>s.id!==e)))),u(null)};return o?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"container mt-5",children:(0,l.jsx)("div",{className:"task-container",children:(0,l.jsxs)("div",{className:"card-body p-3",children:[(0,l.jsxs)("div",{className:"d-flex flex-row justify-content-between align-items-center mb-3 header-container",children:[(0,l.jsx)("h2",{className:"card-title mb-0",children:"Your Tasks"}),(0,l.jsxs)("div",{className:"d-flex gap-2",children:[(0,l.jsxs)("button",{className:"btn btn-outline-".concat("dark"===s?"light":"dark"," ai-button"),onClick:()=>g(!0),children:[(0,l.jsx)("i",{className:"bi bi-robot me-2"}),"AI Assistant"]}),(0,l.jsxs)("button",{className:"btn btn-outline-".concat("dark"===s?"light":"dark"," d-flex align-items-center gap-2"),onClick:()=>{const e={id:"temp-".concat(Date.now()),title:"",description:"",status:"not-started",deadline:null,reminders:[],createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString(),priority:1};u(e.id),d((s=>[e,...s]))},children:[(0,l.jsx)("i",{className:"bi bi-plus-circle"}),"New Task"]})]})]}),0===o.length?(0,l.jsxs)("div",{className:"empty-state",children:[(0,l.jsx)("i",{className:"bi bi-clipboard-check empty-state-icon"}),(0,l.jsx)("p",{className:"text-".concat("dark"===s?"light":"muted"," mb-2"),children:"No tasks yet"}),(0,l.jsx)("small",{className:"text-muted",children:"Create your first task or use AI Assistant to get started"})]}):(0,l.jsx)(x.JY,{onDragEnd:async e=>{const{destination:s,source:t}=e;if(!s||s.index===t.index)return;const n=Array.from(o),[i]=n.splice(t.index,1);n.splice(s.index,0,i);const l=n.map(((e,s)=>(0,a.A)((0,a.A)({},e),{},{priority:s+1})));d(l);try{const e=i.id,t=s.index+1;await(0,r.vF)(e,t)}catch(m){console.error("Error updating task priority:",m),m.response&&403===m.response.status&&c()}},children:(0,l.jsx)(x.gL,{droppableId:"taskList",children:e=>(0,l.jsxs)("div",(0,a.A)((0,a.A)({},e.droppableProps),{},{ref:e.innerRef,className:"task-list",children:[o.sort(((e,s)=>e.priority-s.priority)).map(((e,t)=>(0,l.jsx)(x.sx,{draggableId:e.id.toString(),index:t,children:t=>(0,l.jsx)("div",(0,a.A)((0,a.A)((0,a.A)({ref:t.innerRef},t.draggableProps),t.dragHandleProps),{},{className:"mb-3",style:(0,a.A)({},t.draggableProps.style),children:(0,l.jsx)(p,{theme:s,task:e,setTasks:d,isNewTask:e.id===m,onSave:j,onCancel:f})}))},e.id))),e.placeholder]}))})})]})})}),(0,l.jsx)(b,{show:h,onClose:()=>g(!1),onTaskGenerated:e=>{u(e.id),d((s=>[e,...s]))},theme:s})]}):(0,l.jsx)("div",{className:"container mt-5",children:(0,l.jsx)("div",{className:"task-container",children:(0,l.jsxs)("div",{className:"card-body p-3",children:[(0,l.jsxs)("div",{className:"d-flex flex-row justify-content-between align-items-center mb-3 header-container",children:[(0,l.jsx)("h2",{className:"card-title mb-0",children:"Your Tasks"}),(0,l.jsxs)("div",{className:"d-flex gap-2",children:[(0,l.jsxs)("button",{className:"btn btn-outline-".concat("dark"===s?"light":"dark"," ai-button"),disabled:!0,children:[(0,l.jsx)("i",{className:"bi bi-robot me-2"}),"AI Assistant"]}),(0,l.jsxs)("button",{className:"btn btn-outline-".concat("dark"===s?"light":"dark"," d-flex align-items-center gap-2"),disabled:!0,children:[(0,l.jsx)("i",{className:"bi bi-plus-circle"}),"New Task"]})]})]}),(0,l.jsx)("div",{className:"shimmer-list",children:Array.from({length:5}).map(((e,s)=>(0,l.jsxs)("div",{className:"shimmer-task-item",children:[(0,l.jsx)("div",{className:"shimmer-task-header"}),(0,l.jsx)("div",{className:"shimmer-task-body"})]},s)))})]})})})}},505:(e,s,t)=>{t.d(s,{A7:()=>h,DY:()=>u,E$:()=>j,J2:()=>p,Lx:()=>d,Pr:()=>y,U0:()=>b,UT:()=>i,XL:()=>m,ec:()=>g,gQ:()=>N,j:()=>r,lC:()=>c,r7:()=>f,vF:()=>o,vq:()=>l,xw:()=>x});const a=t(722).A.create({baseURL:"https://task-manager-sigma-ashen.vercel.app/api",headers:{"ngrok-skip-browser-warning":"true"},timeout:3e4});a.interceptors.request.use((e=>{const s=localStorage.getItem("token");return s&&(e.headers.Authorization="Bearer ".concat(s)),e}),(e=>Promise.reject(e)));const n=e=>{var s;return e.response?{message:(null===(s=e.response.data)||void 0===s?void 0:s.error)||"An error occurred",status:e.response.status}:e.request?{message:"No response from server. Please check your connection.",status:0}:{message:e.message||"An unexpected error occurred",status:-1}},r=()=>a.get("/tasks"),i=e=>a.post("/tasks",e),c=(e,s)=>a.put("/tasks/".concat(e),s),l=e=>a.delete("/tasks/".concat(e)),o=(e,s)=>a.put("/tasks/".concat(e,"/priority"),{priority:s}),d=(e,s)=>a.post("/auth/login",{email:e,password:s}),m=async e=>a.post("/auth/google",{code:e}),u=(e,s,t,n)=>a.post("/auth/register",{firstName:e,lastName:s,email:t,password:n}),h=(e,s)=>a.post("/auth/verify-registration",{email:e,verificationCode:s}),p=e=>a.post("/auth/resend-verification",{email:e}),b=e=>a.post("/auth/forgot-password",{email:e}),x=(e,s,t)=>a.post("/auth/verify-code",{email:e,verificationCode:s,newPassword:t}),g=(e,s)=>a.post("/auth/change-password",{currentPassword:e,newPassword:s}),j=async()=>{try{return(await a.get("/profile")).data}catch(e){throw console.error("Error fetching profile:",e),e}},f=async e=>{try{return(await a.put("/profile",e,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(s){throw console.error("Error updating profile:",s),s}},y=async e=>{try{return{success:!0,data:(await a.post("/ai/chat",{prompt:e})).data}}catch(s){return{success:!1,error:n(s).message}}},N=async function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];try{return{success:!0,data:(await a.post("/ai/chat-conversation",{message:e,conversationHistory:s})).data}}catch(t){return{success:!1,error:n(t).message}}}},291:(e,s,t)=>{t.d(s,{Ic:()=>r,fw:()=>n,wM:()=>i});var a=t(535);const n=e=>{const s=new Date(e),t=new Date,n=Math.floor((t-s)/1e3);if(n<0){const e=Math.abs(n);return e<60?"Just now":e<60?"in ".concat(e," second").concat(1!==e?"s":""):e<3600?"in ".concat(Math.ceil(e/60)," minute").concat(1!==Math.ceil(e/60)?"s":""):e<86400?"in ".concat(Math.ceil(e/3600)," hour").concat(1!==Math.ceil(e/3600)?"s":""):e<604800?"in ".concat(Math.ceil(e/86400)," day").concat(1!==Math.ceil(e/86400)?"s":""):(0,a.GP)(s,"MMM dd, yyyy")}if(n<60)return"Just now";if(n<60)return"".concat(n," second").concat(1!==n?"s":""," ago");if(n<3600)return"".concat(Math.floor(n/60)," minute").concat(1!==Math.floor(n/60)?"s":""," ago");if(n<86400)return"".concat(Math.floor(n/3600)," hour").concat(1!==Math.floor(n/3600)?"s":""," ago");if(n<604800){const e=Math.floor(n/86400);return 1===e?"Yesterday":"".concat(e," days ago")}return(0,a.GP)(s,"MMM dd, yyyy")},r=e=>{const[s,t,a]=e.split("-").map(Number),n=new Date(s,t-1,a);if(isNaN(n))return"Invalid Date";return n.toLocaleString("en-US",{year:"numeric",month:"long",day:"numeric"})},i=e=>{const s=new Date(e),t=s.getFullYear(),a=String(s.getMonth()+1).padStart(2,"0"),n=String(s.getDate()).padStart(2,"0"),r=String(s.getHours()).padStart(2,"0"),i=String(s.getMinutes()).padStart(2,"0");return"".concat(t,"-").concat(a,"-").concat(n,"T").concat(r,":").concat(i)}}}]);
//# sourceMappingURL=871.c74fe6a7.chunk.js.map