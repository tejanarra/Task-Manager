{"version":3,"file":"static/js/971.f3d22518.chunk.js","mappings":"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","sources":["services/api.js","components/auth/ChangePassword.js"],"sourcesContent":["import axios from \"axios\";\n\nconst api = axios.create({\n  baseURL: \"https://task-manager-sigma-ashen.vercel.app/api\", // Replace with your backend URL\n  // baseURL: \"http://localhost:5001/api\", // Localhost for local development\n  headers: {\n    \"ngrok-skip-browser-warning\": \"true\",\n  },\n  timeout: 30000, // 30 second timeout\n});\n\napi.interceptors.request.use(\n  (config) => {\n    const token = localStorage.getItem(\"token\");\n    if (token) {\n      config.headers.Authorization = `Bearer ${token}`;\n    }\n\n    // Add user timezone header for auto-detection\n    try {\n      const userTimezone = Intl.DateTimeFormat().resolvedOptions().timeZone;\n      if (userTimezone) {\n        config.headers['x-user-timezone'] = userTimezone;\n      }\n    } catch (err) {\n      // Ignore timezone detection errors\n      console.warn('Could not detect user timezone:', err);\n    }\n\n    return config;\n  },\n  (error) => Promise.reject(error)\n);\n\n// Enhanced error handler\nconst handleApiError = (error) => {\n  if (error.response) {\n    // Server responded with error\n    return {\n      message: error.response.data?.error || \"An error occurred\",\n      status: error.response.status,\n    };\n  } else if (error.request) {\n    // Request made but no response\n    return {\n      message: \"No response from server. Please check your connection.\",\n      status: 0,\n    };\n  } else {\n    // Error setting up request\n    return {\n      message: error.message || \"An unexpected error occurred\",\n      status: -1,\n    };\n  }\n};\n\n// Task-related endpoints\nexport const fetchTasks = () => api.get(\"/tasks\");\nexport const fetchTaskById = (taskId) => api.get(`/tasks/${taskId}`);\nexport const createTask = (newTask) => api.post(\"/tasks\", newTask);\nexport const updateTask = (taskId, updatedTask) =>\n  api.put(`/tasks/${taskId}`, updatedTask);\nexport const deleteTask = (taskId) => api.delete(`/tasks/${taskId}`);\nexport const updateTaskPriority = (taskId, priority) =>\n  api.put(`/tasks/${taskId}/priority`, { priority });\n\n// Authentication-related endpoints\nexport const loginUser = (email, password) => {\n  return api.post(\"/auth/login\", { email, password });\n};\n\nexport const loginWithGoogle = async (authorizationCode) => {\n  return api.post(`/auth/google`, { code: authorizationCode });\n};\n\nexport const registerUser = (firstName, lastName, email, password) => {\n  return api.post(\"/auth/register\", { firstName, lastName, email, password });\n};\n\nexport const verifyRegistrationCode = (email, verificationCode) => {\n  return api.post(\"/auth/verify-registration\", { email, verificationCode });\n};\n\nexport const sendVerificationCode = (email) => {\n  return api.post(\"/auth/resend-verification\", { email });\n};\n\nexport const sendForgotPasswordRequest = (email) => {\n  return api.post(\"/auth/forgot-password\", { email });\n};\n\nexport const resetPassword = (email, verificationCode, newPassword) => {\n  return api.post(\"/auth/verify-code\", {\n    email,\n    verificationCode,\n    newPassword,\n  });\n};\n\nexport const changePassword = (currentPassword, newPassword) => {\n  return api.post(\"/auth/change-password\", { currentPassword, newPassword });\n};\n\nexport const verifyToken = () => api.get(\"/verify-token\");\n\n// Profile-related endpoints\nexport const getProfile = async () => {\n  try {\n    const response = await api.get(\"/profile\");\n    return response.data;\n  } catch (err) {\n    console.error(\"Error fetching profile:\", err);\n    throw err;\n  }\n};\n\nexport const updateProfile = async (formData) => {\n  try {\n    const response = await api.put(\"/profile\", formData, {\n      headers: {\n        \"Content-Type\": \"multipart/form-data\",\n      },\n    });\n    return response.data;\n  } catch (err) {\n    console.error(\"Error updating profile:\", err);\n    throw err;\n  }\n};\n\n// AI-related endpoints\nexport const generateAITask = async (prompt) => {\n  try {\n    const timezone = Intl.DateTimeFormat().resolvedOptions().timeZone;\n    const response = await api.post(\n      \"/ai/chat\",\n      { prompt },\n      { headers: { \"x-user-timezone\": timezone } }\n    );\n    return { success: true, data: response.data };\n  } catch (error) {\n    const errorInfo = handleApiError(error);\n    return { success: false, error: errorInfo.message };\n  }\n};\n\nexport const sendAIChatMessage = async (message, conversationHistory = []) => {\n  try {\n    const timezone = Intl.DateTimeFormat().resolvedOptions().timeZone;\n    const response = await api.post(\n      \"/ai/chat-conversation\",\n      { message, conversationHistory },\n      { headers: { \"x-user-timezone\": timezone } }\n    );\n    return { success: true, data: response.data };\n  } catch (error) {\n    const errorInfo = handleApiError(error);\n    return { success: false, error: errorInfo.message };\n  }\n};\n\nexport default api;\n","import  { useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { changePassword } from \"../../services/api\";\nimport \"../profile/ProfileOverview.css\";\nimport \"../profile/EditProfile.css\";\nimport { useAuth } from \"../../context/AuthContext\";\n\nconst ChangePassword = () => {\n  const [formData, setFormData] = useState({\n    currentPassword: \"\",\n    newPassword: \"\",\n    confirmNewPassword: \"\",\n  });\n  const [error, setError] = useState(\"\");\n  const [success, setSuccess] = useState(\"\");\n  const navigate = useNavigate();\n  const { logout } = useAuth();\n\n  const handleChange = (e) => {\n    const { name, value } = e.target;\n    setFormData({ ...formData, [name]: value });\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    const { currentPassword, newPassword, confirmNewPassword } = formData;\n\n    if (!currentPassword || !newPassword || !confirmNewPassword) {\n      setError(\"All fields are required.\");\n      return;\n    }\n\n    if (newPassword !== confirmNewPassword) {\n      setError(\"Passwords do not match.\");\n      return;\n    }\n\n    try {\n      await changePassword(currentPassword, newPassword);\n      setSuccess(\"Password changed successfully!\");\n      setError(\"\");\n      setTimeout(() => navigate(\"/profile-overview\"), 2000);\n    } catch (err) {\n      console.error(\n        \"Password change error:\",\n        err.response?.data || err.message\n      );\n      setError(\n        err.response?.data?.message ||\n          \"Failed to change password. Please try again.\"\n      );\n      setSuccess(\"\");\n\n      if (err && err.status === 403) {\n        logout();\n        navigate(\"/login\");\n      }\n    }\n  };\n\n  return (\n    <div className=\"profile-container\">\n      <div className=\"profile-card shadow rounded\">\n        <h2 className=\"profile-title text-center mb-4 bold-text\">\n          Change Password\n        </h2>\n        {success && <p className=\"text-success text-center\">{success}</p>}\n        {error && <p className=\"text-danger text-center\">{error}</p>}\n        <form onSubmit={handleSubmit}>\n          <div className=\"form-group mb-3\">\n            <label htmlFor=\"currentPassword\" className=\"form-label\">\n              Current Password\n            </label>\n            <input\n              type=\"password\"\n              className=\"form-control\"\n              id=\"currentPassword\"\n              name=\"currentPassword\"\n              value={formData.currentPassword}\n              onChange={handleChange}\n              required\n            />\n          </div>\n          <div className=\"form-group mb-3\">\n            <label htmlFor=\"newPassword\" className=\"form-label\">\n              New Password\n            </label>\n            <input\n              type=\"password\"\n              className=\"form-control\"\n              id=\"newPassword\"\n              name=\"newPassword\"\n              value={formData.newPassword}\n              onChange={handleChange}\n              required\n            />\n          </div>\n          <div className=\"form-group mb-3\">\n            <label htmlFor=\"confirmNewPassword\" className=\"form-label\">\n              Confirm New Password\n            </label>\n            <input\n              type=\"password\"\n              className=\"form-control\"\n              id=\"confirmNewPassword\"\n              name=\"confirmNewPassword\"\n              value={formData.confirmNewPassword}\n              onChange={handleChange}\n              required\n            />\n          </div>\n          <div className=\"row mt-4\">\n            <div className=\"col-12 col-md-6 mb-2 mb-md-0\">\n              <button\n                type=\"button\"\n                className=\"btn btn-secondary w-100\"\n                onClick={() => navigate(\"/profile-overview\")}\n              >\n                Cancel\n              </button>\n            </div>\n            <div className=\"col-12 col-md-6\">\n              <button type=\"submit\" className=\"btn btn-dark w-100\">\n                Save Changes\n              </button>\n            </div>\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n};\n\nexport default ChangePassword;\n"],"names":["api","axios","create","baseURL","headers","timeout","interceptors","request","use","config","token","localStorage","getItem","Authorization","concat","userTimezone","Intl","DateTimeFormat","resolvedOptions","timeZone","err","console","warn","error","Promise","reject","handleApiError","_error$response$data","response","message","data","status","fetchTasks","get","fetchTaskById","taskId","createTask","newTask","post","updateTask","updatedTask","put","deleteTask","delete","updateTaskPriority","priority","loginUser","email","password","loginWithGoogle","async","code","authorizationCode","registerUser","firstName","lastName","verifyRegistrationCode","verificationCode","sendVerificationCode","sendForgotPasswordRequest","resetPassword","newPassword","changePassword","currentPassword","getProfile","updateProfile","formData","generateAITask","timezone","success","prompt","sendAIChatMessage","conversationHistory","arguments","length","undefined","ChangePassword","setFormData","useState","confirmNewPassword","setError","setSuccess","navigate","useNavigate","logout","useAuth","handleChange","e","name","value","target","_objectSpread","_jsx","className","children","_jsxs","onSubmit","preventDefault","setTimeout","_err$response","_err$response2","_err$response2$data","htmlFor","type","id","onChange","required","onClick"],"sourceRoot":""}