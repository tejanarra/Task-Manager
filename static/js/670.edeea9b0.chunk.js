"use strict";(self.webpackChunktask_manager_frontend=self.webpackChunktask_manager_frontend||[]).push([[670],{5097:(e,a,s)=>{s.r(a),s.d(a,{default:()=>u});var r=s(5043),t=s(4505),i=s(3216),n=s(8729),l=s(579);const o=e=>{let{theme:a,email:s,setEmail:o,handleSendVerificationCode:c,setMessage:d,setError:m,setIsLoading:h,setIsVerificationStep:u,isLoading:f}=e;const[p,g]=(0,r.useState)(""),x=(0,i.Zp)(),{login:v}=(0,n.A)();return(0,l.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),m(""),d(""),h(!0);try{const e=await(0,t.A7)(s,p);d("Verification successful! You are being redirected to home.");const{token:a,userInfo:r}=e.data;setTimeout(()=>{u(!1),v(a,r),x("/tasks")},2e3)}catch(i){var a,r;m((null===(a=i.response)||void 0===a||null===(r=a.data)||void 0===r?void 0:r.message)||"Verification failed.")}finally{h(!1)}},className:"verification-form",children:[(0,l.jsx)("div",{className:"mb-3",children:(0,l.jsx)("input",{type:"email",className:"form-control py-2",id:"email",placeholder:"Enter your email",value:s,onChange:e=>o(e.target.value),required:!0})}),(0,l.jsx)("div",{className:"mb-3",children:(0,l.jsx)("input",{type:"text",className:"form-control py-2",id:"verificationCode",placeholder:"Enter verification code",value:p,onChange:e=>g(e.target.value),required:!0})}),(0,l.jsxs)("div",{className:"d-flex flex-row flex-wrap justify-content-between align-items-center mt-3",children:[(0,l.jsx)("button",{type:"submit",className:"btn verify-btn",disabled:f,children:f?(0,l.jsx)("span",{className:"spinner-border spinner-border-sm text-light",role:"status","aria-hidden":"true"}):"Verify Code"}),(0,l.jsx)("button",{type:"button",className:"btn btn-link resend-link",onClick:c,children:"Resend Code"})]})]})};var c=s(5475),d=s(8123),m=s(9997),h=s(2532);const u=e=>{let{theme:a}=e;const{formData:s,handleChange:i}=(0,m.lN)({firstName:"",lastName:"",email:"",password:"",confirmPassword:""}),{error:n,setError:u,clearError:f,handleError:p}=(0,m.Ct)(!1),{isLoading:g,startLoading:x,stopLoading:v}=(0,m.M3)(),{passwordError:y,validatePasswordMatch:N,clearPasswordError:j}=(0,m.Gv)(),[b,w]=(0,r.useState)(""),[C,k]=(0,r.useState)(!1),[E,V]=(0,r.useState)(!1);return(0,l.jsx)("div",{className:"register-page d-flex align-items-center justify-content-center",children:(0,l.jsxs)("div",{className:"register-form wider-form",children:[(0,l.jsx)("h1",{className:"fw-bold mb-2",children:C||E?"Verify Registration":"Register"}),(0,l.jsx)("p",{className:"text-".concat("dark"===a?"light":"muted"," mb-4"),children:C||E?"Enter your verification code":"Fill in the details to create your account"}),(0,l.jsx)(d.ZT,{type:"error",message:n,onClose:f}),(0,l.jsx)(d.ZT,{type:"success",message:b,onClose:()=>w("")}),(0,l.jsxs)("div",{className:"form-check mb-3",children:[(0,l.jsx)("input",{type:"checkbox",className:"form-check-input",id:"hasVerificationCode",checked:E,onChange:()=>{V(!E),E&&k(!1)}}),(0,l.jsx)("label",{className:"form-check-label",htmlFor:"hasVerificationCode",children:"I already have a verification code"})]}),!C&&!E&&(0,l.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),f(),j(),w(""),N(s.password,s.confirmPassword)){x();try{const e=await(0,t.DY)(s.firstName,s.lastName,s.email,s.password);w(e.data.message||"Registration successful!"),k(!0),V(!0)}catch(a){p(a,h.UU.REGISTRATION_FAILED)}finally{v()}}},children:[(0,l.jsxs)("div",{className:"row",children:[(0,l.jsx)("div",{className:"col-6",children:(0,l.jsx)(d.ZQ,{type:"text",name:"firstName",placeholder:"First Name",value:s.firstName,onChange:i,required:!0})}),(0,l.jsx)("div",{className:"col-6",children:(0,l.jsx)(d.ZQ,{type:"text",name:"lastName",placeholder:"Last Name",value:s.lastName,onChange:i,required:!0})})]}),(0,l.jsx)(d.ZQ,{type:"email",name:"email",placeholder:"Email",value:s.email,onChange:i,required:!0}),(0,l.jsx)(d.ZQ,{type:"password",name:"password",placeholder:"Password",value:s.password,onChange:i,required:!0}),(0,l.jsx)(d.ZQ,{type:"password",name:"confirmPassword",placeholder:"Confirm Password",value:s.confirmPassword,onChange:i,error:y,required:!0}),(0,l.jsx)(d.lV,{type:"submit",isLoading:g,className:"register-btn w-100 mb-3",variant:"primary",children:"Register"})]}),(C||E)&&(0,l.jsx)(o,{email:s.email,setEmail:e=>i({target:{name:"email",value:e}}),handleSendVerificationCode:async e=>{e.preventDefault(),f(),w(""),x();try{const e=await(0,t.J2)(s.email);w(e.data.message||"Verification code sent!")}catch(a){p(a,"Failed to send code.")}finally{v()}},setMessage:w,setError:u,setIsLoading:x,setIsVerificationStep:k,isLoading:g}),(0,l.jsx)("div",{className:"text-center mt-4",children:(0,l.jsxs)("p",{className:"mb-0 d-flex justify-content-center align-items-center gap-1",children:["Already have an account?"," ",(0,l.jsx)(c.N_,{to:"/login",className:"login-link",children:"Login"})]})})]})})}}}]);
//# sourceMappingURL=670.edeea9b0.chunk.js.map