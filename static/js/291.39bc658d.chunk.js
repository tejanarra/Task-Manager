"use strict";(self.webpackChunktask_manager_frontend=self.webpackChunktask_manager_frontend||[]).push([[291],{2532:(e,t,a)=>{a.d(t,{D8:()=>i,Ez:()=>n,Rr:()=>s,UU:()=>c,Ym:()=>r,d5:()=>o,j$:()=>l});const r=[{value:1,label:"1 hr"},{value:24,label:"1 day"},{value:168,label:"1 week"}],s={NOT_STARTED:"not-started",IN_PROGRESS:"in-progress",COMPLETED:"completed"},n=(s.NOT_STARTED,s.IN_PROGRESS,s.COMPLETED,{[s.COMPLETED]:"#007a00",[s.IN_PROGRESS]:"#daa520",[s.NOT_STARTED]:"#a00000"}),o={TOKEN:"token",USER_INFO:"userInfo",THEME:"theme",AI_CHAT_MODE:"ai_chat_mode",AI_CHAT_HISTORY:"ai_chat_history"},l={ONE_TIME:"one-time",DAILY:"daily",WEEKLY:"weekly"},i={REQUIRED_FIELD:"This field is required",INVALID_EMAIL:"Please enter a valid email address",PASSWORD_MISMATCH:"Passwords do not match",PASSWORD_TOO_SHORT:"Password must be at least 8 characters",INVALID_PHONE:"Please enter a valid phone number"},c={LOGIN_FAILED:"Login failed. Please try again.",REGISTRATION_FAILED:"Registration failed. Please try again.",VERIFICATION_FAILED:"Verification failed. Please try again.",PASSWORD_RESET_FAILED:"Password reset failed. Please try again.",PASSWORD_CHANGE_FAILED:"Failed to change password. Please try again.",PROFILE_UPDATE_FAILED:"Failed to update profile. Please try again.",TASK_FETCH_FAILED:"Failed to fetch tasks. Please try again.",TASK_CREATE_FAILED:"Failed to create task. Please try again.",TASK_UPDATE_FAILED:"Failed to update task. Please try again.",TASK_DELETE_FAILED:"Failed to delete task. Please try again.",NETWORK_ERROR:"Network error. Please check your connection.",GENERIC_ERROR:"Something went wrong. Please try again."}},4505:(e,t,a)=>{a.d(t,{A7:()=>g,DY:()=>m,E$:()=>v,J2:()=>h,Lx:()=>u,Pr:()=>D,U0:()=>E,UT:()=>l,XL:()=>p,ec:()=>f,gQ:()=>I,iV:()=>o,j:()=>n,lC:()=>i,r7:()=>y,vF:()=>d,vq:()=>c,xw:()=>A});const r=a(9722).A.create({baseURL:"http://localhost:5001/api",headers:{"ngrok-skip-browser-warning":"true"},timeout:3e4});r.interceptors.request.use(e=>{const t=localStorage.getItem("token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e));const s=e=>{var t;return e.response?{message:(null===(t=e.response.data)||void 0===t?void 0:t.error)||"An error occurred",status:e.response.status}:e.request?{message:"No response from server. Please check your connection.",status:0}:{message:e.message||"An unexpected error occurred",status:-1}},n=()=>r.get("/tasks"),o=e=>r.get("/tasks/".concat(e)),l=e=>r.post("/tasks",e),i=(e,t)=>r.put("/tasks/".concat(e),t),c=e=>r.delete("/tasks/".concat(e)),d=(e,t)=>r.put("/tasks/".concat(e,"/priority"),{priority:t}),u=(e,t)=>r.post("/auth/login",{email:e,password:t}),p=async e=>r.post("/auth/google",{code:e}),m=(e,t,a,s)=>r.post("/auth/register",{firstName:e,lastName:t,email:a,password:s}),g=(e,t)=>r.post("/auth/verify-registration",{email:e,verificationCode:t}),h=e=>r.post("/auth/resend-verification",{email:e}),E=e=>r.post("/auth/forgot-password",{email:e}),A=(e,t,a)=>r.post("/auth/verify-code",{email:e,verificationCode:t,newPassword:a}),f=(e,t)=>r.post("/auth/change-password",{currentPassword:e,newPassword:t}),v=async()=>{try{return(await r.get("/profile")).data}catch(e){throw console.error("Error fetching profile:",e),e}},y=async e=>{try{return(await r.put("/profile",e,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(t){throw console.error("Error updating profile:",t),t}},D=async e=>{try{const t=Intl.DateTimeFormat().resolvedOptions().timeZone;return{success:!0,data:(await r.post("/ai/chat",{prompt:e},{headers:{"x-user-timezone":t}})).data}}catch(t){return{success:!1,error:s(t).message}}},I=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];try{const a=Intl.DateTimeFormat().resolvedOptions().timeZone;return{success:!0,data:(await r.post("/ai/chat-conversation",{message:e,conversationHistory:t},{headers:{"x-user-timezone":a}})).data}}catch(a){return{success:!1,error:s(a).message}}}},7081:(e,t,a)=>{a.d(t,{NF:()=>i,ZW:()=>l});var r=a(2532);const s=(e,t)=>{if("number"!==typeof e||e<=0||!t)return null;const a=new Date(t),s=new Date(a.getTime()-60*e*60*1e3);return s<=new Date?null:{type:r.j$.ONE_TIME,remindAt:s.toISOString(),sent:!1,lastSentAt:null}},n=(e,t)=>{if(!e||!t)return null;const a=new Date(e),s=new Date(t),n=new Date;return isNaN(a.getTime())||isNaN(s.getTime())||a<=n||a>=s?null:{type:r.j$.ONE_TIME,remindAt:a.toISOString(),sent:!1,lastSentAt:null}},o=(e,t)=>{if(!t)return null;if(e!==r.j$.DAILY&&e!==r.j$.WEEKLY)return null;const a=(new Date(t)-new Date)/36e5,s=e===r.j$.DAILY?24:168;return a<s?null:{type:e,intervalHours:s,sent:!1,lastSentAt:null}},l=(e,t)=>{if(!Array.isArray(e)||!t)return[];const a=[],l=new Set;for(const i of e){if(!i||"object"!==typeof i)continue;const{type:e,remindAt:c,remindBefore:d,customDate:u,intervalHours:p}=i;if(e===r.j$.DAILY||e===r.j$.WEEKLY){const r="recurring-".concat(e);if(l.has(r))continue;const s=o(e,t);s&&(a.push(s),l.add(r));continue}let m=null;if(c?m=n(c,t):u?m=n(u,t):"number"===typeof d&&d>0&&(m=s(d,t)),m){const e="onetime-".concat(m.remindAt);l.has(e)||(a.push(m),l.add(e))}}return a},i=function(e){if(!e||0===e.length)return"";const t=[];let a=0,s=!1,n=!1;for(const o of e)o&&(o.type===r.j$.ONE_TIME?a++:o.type===r.j$.DAILY?s=!0:o.type===r.j$.WEEKLY&&(n=!0));return a>0&&t.push("".concat(a," reminder").concat(a>1?"s":"")),s&&t.push("Daily"),n&&t.push("Weekly"),t.join(", ")}},8123:(e,t,a)=>{a.d(t,{ZT:()=>i,ZQ:()=>l,lV:()=>d});var r=a(2555),s=a(3986),n=a(579);const o=["type","id","name","value","onChange","placeholder","required","className","label","error","disabled"],l=e=>{let{type:t="text",id:a,name:l,value:i,onChange:c,placeholder:d,required:u=!1,className:p="",label:m,error:g,disabled:h=!1}=e,E=(0,s.A)(e,o);return(0,n.jsxs)("div",{className:"form-input-wrapper mb-3",children:[m&&(0,n.jsxs)("label",{htmlFor:a,className:"form-label",children:[m,u&&(0,n.jsx)("span",{className:"text-danger ms-1",children:"*"})]}),(0,n.jsx)("input",(0,r.A)({type:t,id:a,name:l,value:i,onChange:c,placeholder:d,required:u,disabled:h,className:"form-control py-2 ".concat(g?"is-invalid":""," ").concat(p)},E)),g&&(0,n.jsx)("div",{className:"invalid-feedback d-block",children:g})]})},i=e=>{let{type:t="info",message:a,onClose:r,className:s=""}=e;if(!a)return null;const o={success:"alert-success",error:"alert-danger",warning:"alert-warning",info:"alert-info"}[t]||"alert-info";return(0,n.jsxs)("div",{className:"alert ".concat(o," ").concat(s," d-flex align-items-center justify-content-between"),role:"alert",children:[(0,n.jsx)("span",{children:a}),r&&(0,n.jsx)("button",{type:"button",className:"btn-close",onClick:r,"aria-label":"Close"})]})},c=["isLoading","children","loadingText","type","className","disabled","onClick","variant"],d=e=>{let{isLoading:t=!1,children:a,loadingText:o="Loading...",type:l="button",className:i="",disabled:d=!1,onClick:u,variant:p="primary"}=e,m=(0,s.A)(e,c);const g="primary"===p?"sign-in-btn":"btn-".concat(p);return(0,n.jsx)("button",(0,r.A)((0,r.A)({type:l,className:"btn ".concat(g," ").concat(i),disabled:d||t,onClick:u},m),{},{children:t?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),o]}):a}))}},9997:(e,t,a)=>{a.d(t,{Ct:()=>c,lN:()=>n,M3:()=>d,Gv:()=>u});var r=a(2555),s=a(5043);const n=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const[t,a]=(0,s.useState)(e),n=(0,s.useCallback)(e=>{const{name:t,value:s,type:n,checked:o}=e.target;a(e=>(0,r.A)((0,r.A)({},e),{},{[t]:"checkbox"===n?o:s}))},[]),o=(0,s.useCallback)(()=>{a(e)},[e]),l=(0,s.useCallback)((e,t)=>{a(a=>(0,r.A)((0,r.A)({},a),{},{[e]:t}))},[]);return{formData:t,handleChange:n,setFormData:a,resetForm:o,setFieldValue:l}};var o=a(2532);var l=a(8729),i=a(3216);const c=function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const[t,a]=(0,s.useState)(""),{logout:r}=(0,l.A)(),n=(0,i.Zp)(),c=(0,s.useCallback)(()=>{a("")},[]),d=(0,s.useCallback)((t,s)=>{if(console.error("API Error:",t),e&&(e=>{var t;return 403===(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.status)||403===(null===e||void 0===e?void 0:e.status)})(t))return r(),n("/login"),void a("Session expired. Please login again.");const l=function(e){var t,a,r,s;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.UU.GENERIC_ERROR;return e?null!==(t=e.response)&&void 0!==t&&null!==(a=t.data)&&void 0!==a&&a.message?e.response.data.message:null!==(r=e.response)&&void 0!==r&&null!==(s=r.data)&&void 0!==s&&s.error?e.response.data.error:e.message?e.message:n:n}(t,s);a(l)},[e,r,n]);return{error:t,setError:a,clearError:c,handleError:d}},d=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const[t,a]=(0,s.useState)(e);return{isLoading:t,startLoading:(0,s.useCallback)(()=>{a(!0)},[]),stopLoading:(0,s.useCallback)(()=>{a(!1)},[]),setIsLoading:a}},u=()=>{const[e,t]=(0,s.useState)(""),a=(0,s.useCallback)(()=>{t("")},[]);return{passwordError:e,validatePassword:(0,s.useCallback)(e=>e?e.length<8?(t(o.D8.PASSWORD_TOO_SHORT),!1):(a(),!0):(t(o.D8.REQUIRED_FIELD),!1),[a]),validatePasswordMatch:(0,s.useCallback)((e,r)=>e!==r?(t(o.D8.PASSWORD_MISMATCH),!1):(a(),!0),[a]),validatePasswordStrength:(0,s.useCallback)(e=>{const t=/[A-Z]/.test(e),a=/[a-z]/.test(e),r=/\d/.test(e),s=/[!@#$%^&*(),.?":{}|<>]/.test(e);return{isStrong:t&&a&&r&&s,hasUpperCase:t,hasLowerCase:a,hasNumbers:r,hasSpecialChar:s}},[]),clearPasswordError:a}};a(7081)}}]);
//# sourceMappingURL=291.39bc658d.chunk.js.map