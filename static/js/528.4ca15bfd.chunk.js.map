{"version":3,"file":"static/js/528.4ca15bfd.chunk.js","mappings":"4PAUA,MAkIA,EAlIcA,IAAgB,IAAf,MAAEC,GAAOD,EACtB,MAAM,MAAEE,IAAUC,EAAAA,EAAAA,KACZC,GAAWC,EAAAA,EAAAA,OAEX,SAAEC,EAAQ,aAAEC,IAAiBC,EAAAA,EAAAA,IAAa,CAC9CC,MAAO,GACPC,SAAU,MAEN,MAAEC,EAAK,WAAEC,EAAU,YAAEC,IAAgBC,EAAAA,EAAAA,KAAY,IACjD,UAAEC,EAAS,aAAEC,EAAY,YAAEC,IAAgBC,EAAAA,EAAAA,MAmB3CC,GAAwBC,EAAAA,EAAAA,IAAe,CAC3CC,KAAM,YACNC,UAAWC,UACTP,IACA,IACE,MAAM,KAAEQ,SAAeC,EAAAA,EAAAA,IAAgBC,EAASC,MAChDzB,EAAMsB,EAAKI,MAAOJ,EAAKK,UACvBzB,EAAS,SACX,CAAE,MAAO0B,GACPjB,EAAYiB,EAAK,wBACjBC,EAAAA,EAAAA,KACF,CAAC,QACCd,GACF,GAEFe,QAASA,KACPnB,EAAY,CAAEoB,QAAS,wBACvBhB,KAEFiB,MAAO,yBAOT,OACEC,EAAAA,EAAAA,KAAA,OAAKC,UAAU,8DAA6DC,UAC1EC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,aAAYC,SAAA,EACzBF,EAAAA,EAAAA,KAAA,MAAIC,UAAU,eAAcC,SAAC,kBAC7BF,EAAAA,EAAAA,KAAA,KAAGC,UAAS,QAAAG,OAAoB,SAAVtC,EAAmB,QAAU,QAAO,SAAQoC,SAAC,+BAInEF,EAAAA,EAAAA,KAACK,EAAAA,GAAW,CAACC,KAAK,QAAQR,QAAStB,EAAO+B,QAAS9B,KAEnD0B,EAAAA,EAAAA,MAAA,QAAMK,SArDSpB,UACnBqB,EAAEC,iBACFjC,IACAI,IAEA,IACE,MAAM,KAAEQ,SAAesB,EAAAA,EAAAA,IAAUxC,EAASG,MAAOH,EAASI,WACpD,MAAEkB,EAAK,SAAEC,GAAaL,EAC5BtB,EAAM0B,EAAOC,GACbzB,EAAS,SACX,CAAE,MAAO0B,GACPjB,EAAYiB,EAAKiB,EAAAA,GAAeC,aAClC,CAAC,QACC/B,GACF,GAuCiCoB,SAAA,EAC3BF,EAAAA,EAAAA,KAACc,EAAAA,GAAS,CACRR,KAAK,QACLS,GAAG,QACHC,KAAK,QACLC,YAAY,mBACZC,MAAO/C,EAASG,MAChB6C,SAAU/C,EACVgD,UAAQ,KAGVpB,EAAAA,EAAAA,KAACc,EAAAA,GAAS,CACRR,KAAK,WACLS,GAAG,WACHC,KAAK,WACLC,YAAY,sBACZC,MAAO/C,EAASI,SAChB4C,SAAU/C,EACVgD,UAAQ,KAGVpB,EAAAA,EAAAA,KAACqB,EAAAA,GAAa,CACZf,KAAK,SACL1B,UAAWA,EACXqB,UAAU,aACVqB,QAAQ,UAASpB,SAClB,cAKHF,EAAAA,EAAAA,KAAA,OAAKC,UAAU,uBAAsBC,UACnCC,EAAAA,EAAAA,MAAA,UACEF,UAAS,2FAAAG,OACG,SAAVtC,EAAmB,aAAe,IAEpCyD,QAASvC,EACTwC,SAAU5C,EACV0B,KAAK,SACLmB,WAAS,EAAAvB,SAAA,EAETF,EAAAA,EAAAA,KAAA,OACE0B,I,qoGACAC,IAAI,cACJC,MAAO,CAAEC,MAAO,OAAQC,OAAQ,WAElC9B,EAAAA,EAAAA,KAAA,QAAAE,SAAM,8BAIVC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,sCAAqCC,SAAA,EAClDF,EAAAA,EAAAA,KAAC+B,EAAAA,GAAI,CAACC,GAAG,YAAY/B,UAAU,gBAAeC,SAAC,cAG/CF,EAAAA,EAAAA,KAAA,UACEC,UAAU,wCACVsB,QAtEmBU,KAC3BhE,EAAS,qBAqE6BiC,SAC/B,6B","sources":["components/auth/Login.js"],"sourcesContent":["import { useNavigate, Link } from \"react-router-dom\";\nimport { useAuth } from \"../../context/AuthContext\";\nimport { loginUser, loginWithGoogle } from \"../../services/api\";\nimport \"./Login.css\";\nimport { useGoogleLogin, googleLogout } from \"@react-oauth/google\";\nimport googlelogo from \"../../assets/google_logo.png\";\nimport { FormInput, AlertBanner, LoadingButton } from \"../common\";\nimport { useFormState, useApiError, useLoading } from \"../../hooks\";\nimport { ERROR_MESSAGES } from \"../../constants/appConstants\";\n\nconst Login = ({ theme }) => {\n  const { login } = useAuth();\n  const navigate = useNavigate();\n\n  const { formData, handleChange } = useFormState({\n    email: \"\",\n    password: \"\",\n  });\n  const { error, clearError, handleError } = useApiError(false);\n  const { isLoading, startLoading, stopLoading } = useLoading();\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    clearError();\n    startLoading();\n\n    try {\n      const { data } = await loginUser(formData.email, formData.password);\n      const { token, userInfo } = data;\n      login(token, userInfo);\n      navigate(\"/tasks\");\n    } catch (err) {\n      handleError(err, ERROR_MESSAGES.LOGIN_FAILED);\n    } finally {\n      stopLoading();\n    }\n  };\n\n  const handleGoogleLoginFlow = useGoogleLogin({\n    flow: \"auth-code\",\n    onSuccess: async (response) => {\n      startLoading();\n      try {\n        const { data } = await loginWithGoogle(response.code);\n        login(data.token, data.userInfo);\n        navigate(\"/tasks\");\n      } catch (err) {\n        handleError(err, \"Google login failed\");\n        googleLogout();\n      } finally {\n        stopLoading();\n      }\n    },\n    onError: () => {\n      handleError({ message: \"Google login failed\" });\n      stopLoading();\n    },\n    scope: \"openid email profile\",\n  });\n\n  const handleForgotPassword = () => {\n    navigate(\"/forgot-password\");\n  };\n\n  return (\n    <div className=\"login-page d-flex align-items-center justify-content-center\">\n      <div className=\"login-form\">\n        <h1 className=\"fw-bold mb-2\">Welcome back</h1>\n        <p className={`text-${theme === \"dark\" ? \"light\" : \"muted\"} mb-4`}>\n          Please enter your details\n        </p>\n\n        <AlertBanner type=\"error\" message={error} onClose={clearError} />\n\n        <form onSubmit={handleSubmit}>\n          <FormInput\n            type=\"email\"\n            id=\"email\"\n            name=\"email\"\n            placeholder=\"Enter your email\"\n            value={formData.email}\n            onChange={handleChange}\n            required\n          />\n\n          <FormInput\n            type=\"password\"\n            id=\"password\"\n            name=\"password\"\n            placeholder=\"Enter your password\"\n            value={formData.password}\n            onChange={handleChange}\n            required\n          />\n\n          <LoadingButton\n            type=\"submit\"\n            isLoading={isLoading}\n            className=\"w-100 mb-3\"\n            variant=\"primary\"\n          >\n            Login\n          </LoadingButton>\n        </form>\n\n        <div className=\"oauth-container mb-3\">\n          <button\n            className={`btn google-signin-btn w-100 mb-3 d-flex align-items-center justify-content-center gap-2 ${\n              theme === \"dark\" ? \"dark-theme\" : \"\"\n            }`}\n            onClick={handleGoogleLoginFlow}\n            disabled={isLoading}\n            type=\"button\"\n            useOneTap\n          >\n            <img\n              src={googlelogo}\n              alt=\"Google logo\"\n              style={{ width: \"24px\", height: \"24px\" }}\n            />\n            <span>Sign in with Google</span>\n          </button>\n        </div>\n\n        <div className=\"d-flex justify-content-between mt-3\">\n          <Link to=\"/register\" className=\"register-link\">\n            Register\n          </Link>\n          <button\n            className=\"btn btn-link forgot-password-link p-0\"\n            onClick={handleForgotPassword}\n          >\n            Forgot password?\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Login;\n"],"names":["_ref","theme","login","useAuth","navigate","useNavigate","formData","handleChange","useFormState","email","password","error","clearError","handleError","useApiError","isLoading","startLoading","stopLoading","useLoading","handleGoogleLoginFlow","useGoogleLogin","flow","onSuccess","async","data","loginWithGoogle","response","code","token","userInfo","err","googleLogout","onError","message","scope","_jsx","className","children","_jsxs","concat","AlertBanner","type","onClose","onSubmit","e","preventDefault","loginUser","ERROR_MESSAGES","LOGIN_FAILED","FormInput","id","name","placeholder","value","onChange","required","LoadingButton","variant","onClick","disabled","useOneTap","src","alt","style","width","height","Link","to","handleForgotPassword"],"sourceRoot":""}