"use strict";(self.webpackChunktask_manager_frontend=self.webpackChunktask_manager_frontend||[]).push([[28],{28:(e,t,a)=>{a.r(t),a.d(t,{default:()=>d});var s=a(43),r=a(505),i=a(216),n=a(729),o=a(579);const c=e=>{let{theme:t,email:a,setEmail:c,handleSendVerificationCode:l,setMessage:d,setError:u,setIsLoading:m,setIsVerificationStep:p,isLoading:h}=e;const[g,f]=(0,s.useState)(""),v=(0,i.Zp)(),{login:x}=(0,n.A)();return(0,o.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),u(""),d(""),m(!0);try{const e=await(0,r.A7)(a,g);d("Verification successful! You are being redirected to home.");const{token:t,userInfo:s}=e.data;setTimeout((()=>{p(!1),x(t,s),v("/tasks")}),2e3)}catch(i){var t,s;u((null===(t=i.response)||void 0===t||null===(s=t.data)||void 0===s?void 0:s.message)||"Verification failed.")}finally{m(!1)}},className:"verification-form",children:[(0,o.jsx)("div",{className:"mb-3",children:(0,o.jsx)("input",{type:"email",className:"form-control py-2",id:"email",placeholder:"Enter your email",value:a,onChange:e=>c(e.target.value),required:!0})}),(0,o.jsx)("div",{className:"mb-3",children:(0,o.jsx)("input",{type:"text",className:"form-control py-2",id:"verificationCode",placeholder:"Enter verification code",value:g,onChange:e=>f(e.target.value),required:!0})}),(0,o.jsxs)("div",{className:"d-flex flex-row flex-wrap justify-content-between align-items-center mt-3",children:[(0,o.jsx)("button",{type:"submit",className:"btn verify-btn",disabled:h,children:h?(0,o.jsx)("span",{className:"spinner-border spinner-border-sm text-light",role:"status","aria-hidden":"true"}):"Verify Code"}),(0,o.jsx)("button",{type:"button",className:"btn btn-link resend-link",onClick:l,children:"Resend Code"})]})]})};var l=a(475);const d=e=>{let{theme:t}=e;const[a,i]=(0,s.useState)(""),[n,d]=(0,s.useState)(""),[u,m]=(0,s.useState)(""),[p,h]=(0,s.useState)(""),[g,f]=(0,s.useState)(""),[v,x]=(0,s.useState)(""),[y,j]=(0,s.useState)(""),[b,N]=(0,s.useState)(!1),[w,k]=(0,s.useState)(!1),[C,S]=(0,s.useState)(!1),[V,E]=(0,s.useState)(!0);return(0,o.jsx)("div",{className:"register-page d-flex align-items-center justify-content-center",children:(0,o.jsxs)("div",{className:"register-form wider-form",children:[(0,o.jsx)("h1",{className:"fw-bold mb-2",children:b||C?"Verify Registration":"Register"}),(0,o.jsx)("p",{className:"text-".concat("dark"===t?"light":"muted"," mb-4"),children:b||C?"Enter your verification code":"Fill in the details to create your account"}),v&&(0,o.jsx)("div",{className:"alert alert-danger",children:v}),y&&(0,o.jsx)("div",{className:"alert alert-success",children:y}),(0,o.jsxs)("div",{className:"form-check mb-3",children:[(0,o.jsx)("input",{type:"checkbox",className:"form-check-input",id:"hasVerificationCode",checked:C,onChange:()=>{S(!C),C&&N(!1)}}),(0,o.jsx)("label",{className:"form-check-label",htmlFor:"hasVerificationCode",children:"I already have a verification code"})]}),!b&&!C&&(0,o.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),x(""),j(""),k(!0),p!==g)return E(!1),void k(!1);try{const e=await(0,r.DY)(a,n,u,p);j(e.data.message||"Registration successful!"),N(!0),S(!0)}catch(i){var t,s;x((null===(t=i.response)||void 0===t||null===(s=t.data)||void 0===s?void 0:s.message)||"Registration failed.")}finally{k(!1)}},children:[(0,o.jsxs)("div",{className:"row mb-3",children:[(0,o.jsx)("div",{className:"col-6",children:(0,o.jsx)("input",{type:"text",className:"form-control py-2",placeholder:"First Name",value:a,onChange:e=>i(e.target.value),required:!0})}),(0,o.jsx)("div",{className:"col-6",children:(0,o.jsx)("input",{type:"text",className:"form-control py-2",placeholder:"Last Name",value:n,onChange:e=>d(e.target.value),required:!0})})]}),(0,o.jsx)("div",{className:"mb-3",children:(0,o.jsx)("input",{type:"email",className:"form-control py-2",placeholder:"Email",value:u,onChange:e=>m(e.target.value),required:!0})}),(0,o.jsx)("div",{className:"mb-3",children:(0,o.jsx)("input",{type:"password",className:"form-control py-2",placeholder:"Password",value:p,onChange:e=>h(e.target.value),required:!0})}),(0,o.jsx)("div",{className:"mb-3",children:(0,o.jsx)("input",{type:"password",className:"form-control py-2",placeholder:"Confirm Password",value:g,onChange:e=>{f(e.target.value),E(e.target.value===p)},required:!0})}),!V&&(0,o.jsx)("div",{className:"alert alert-danger",children:"Passwords do not match."}),(0,o.jsx)("button",{type:"submit",className:"btn register-btn w-100 mb-3",disabled:w||!V,children:w?(0,o.jsx)("span",{className:"spinner-border spinner-border-sm text-light",role:"status","aria-hidden":"true"}):"Register"})]}),(b||C)&&(0,o.jsx)(c,{email:u,setEmail:m,handleSendVerificationCode:async e=>{e.preventDefault(),x(""),j(""),k(!0);try{const e=await(0,r.J2)(u);j(e.data.message||"Verification code sent!")}catch(s){var t,a;x((null===(t=s.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message)||"Failed to send code.")}finally{k(!1)}},setMessage:j,setError:x,setIsLoading:k,setIsVerificationStep:N,isLoading:w}),(0,o.jsx)("div",{className:"text-center mt-4",children:(0,o.jsxs)("p",{className:"mb-0 d-flex justify-content-center align-items-center gap-1",children:["Already have an account?"," ",(0,o.jsx)(l.N_,{to:"/login",className:"login-link",children:"Login"})]})})]})})}},505:(e,t,a)=>{a.d(t,{A7:()=>h,DY:()=>p,E$:()=>y,J2:()=>g,Lx:()=>u,Pr:()=>b,U0:()=>f,UT:()=>o,XL:()=>m,ec:()=>x,gQ:()=>N,iV:()=>n,j:()=>i,lC:()=>c,r7:()=>j,vF:()=>d,vq:()=>l,xw:()=>v});const s=a(722).A.create({baseURL:"https://task-manager-sigma-ashen.vercel.app/api",headers:{"ngrok-skip-browser-warning":"true"},timeout:3e4});s.interceptors.request.use((e=>{const t=localStorage.getItem("token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e}),(e=>Promise.reject(e)));const r=e=>{var t;return e.response?{message:(null===(t=e.response.data)||void 0===t?void 0:t.error)||"An error occurred",status:e.response.status}:e.request?{message:"No response from server. Please check your connection.",status:0}:{message:e.message||"An unexpected error occurred",status:-1}},i=()=>s.get("/tasks"),n=e=>s.get("/tasks/".concat(e)),o=e=>s.post("/tasks",e),c=(e,t)=>s.put("/tasks/".concat(e),t),l=e=>s.delete("/tasks/".concat(e)),d=(e,t)=>s.put("/tasks/".concat(e,"/priority"),{priority:t}),u=(e,t)=>s.post("/auth/login",{email:e,password:t}),m=async e=>s.post("/auth/google",{code:e}),p=(e,t,a,r)=>s.post("/auth/register",{firstName:e,lastName:t,email:a,password:r}),h=(e,t)=>s.post("/auth/verify-registration",{email:e,verificationCode:t}),g=e=>s.post("/auth/resend-verification",{email:e}),f=e=>s.post("/auth/forgot-password",{email:e}),v=(e,t,a)=>s.post("/auth/verify-code",{email:e,verificationCode:t,newPassword:a}),x=(e,t)=>s.post("/auth/change-password",{currentPassword:e,newPassword:t}),y=async()=>{try{return(await s.get("/profile")).data}catch(e){throw console.error("Error fetching profile:",e),e}},j=async e=>{try{return(await s.put("/profile",e,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(t){throw console.error("Error updating profile:",t),t}},b=async e=>{try{const t=Intl.DateTimeFormat().resolvedOptions().timeZone;return{success:!0,data:(await s.post("/ai/chat",{prompt:e},{headers:{"x-user-timezone":t}})).data}}catch(t){return{success:!1,error:r(t).message}}},N=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];try{const a=Intl.DateTimeFormat().resolvedOptions().timeZone;return{success:!0,data:(await s.post("/ai/chat-conversation",{message:e,conversationHistory:t},{headers:{"x-user-timezone":a}})).data}}catch(a){return{success:!1,error:r(a).message}}}}}]);
//# sourceMappingURL=28.f620ffd0.chunk.js.map