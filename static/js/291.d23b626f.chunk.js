"use strict";(self.webpackChunktask_manager_frontend=self.webpackChunktask_manager_frontend||[]).push([[291],{2532:(e,a,t)=>{t.d(a,{D8:()=>i,Ez:()=>n,Rr:()=>s,UU:()=>c,Ym:()=>r,d5:()=>o,j$:()=>l});const r=[{value:1,label:"1 hr"},{value:24,label:"1 day"},{value:168,label:"1 week"}],s={NOT_STARTED:"not-started",IN_PROGRESS:"in-progress",COMPLETED:"completed"},n=(s.NOT_STARTED,s.IN_PROGRESS,s.COMPLETED,{[s.COMPLETED]:"#007a00",[s.IN_PROGRESS]:"#daa520",[s.NOT_STARTED]:"#a00000"}),o={TOKEN:"token",USER_INFO:"userInfo",THEME:"theme",AI_CHAT_MODE:"ai_chat_mode",AI_CHAT_HISTORY:"ai_chat_history"},l={ONE_TIME:"one-time",DAILY:"daily",WEEKLY:"weekly"},i={REQUIRED_FIELD:"This field is required",INVALID_EMAIL:"Please enter a valid email address",PASSWORD_MISMATCH:"Passwords do not match",PASSWORD_TOO_SHORT:"Password must be at least 8 characters",INVALID_PHONE:"Please enter a valid phone number"},c={LOGIN_FAILED:"Login failed. Please try again.",REGISTRATION_FAILED:"Registration failed. Please try again.",VERIFICATION_FAILED:"Verification failed. Please try again.",PASSWORD_RESET_FAILED:"Password reset failed. Please try again.",PASSWORD_CHANGE_FAILED:"Failed to change password. Please try again.",PROFILE_UPDATE_FAILED:"Failed to update profile. Please try again.",TASK_FETCH_FAILED:"Failed to fetch tasks. Please try again.",TASK_CREATE_FAILED:"Failed to create task. Please try again.",TASK_UPDATE_FAILED:"Failed to update task. Please try again.",TASK_DELETE_FAILED:"Failed to delete task. Please try again.",NETWORK_ERROR:"Network error. Please check your connection.",GENERIC_ERROR:"Something went wrong. Please try again."}},4505:(e,a,t)=>{t.d(a,{A7:()=>g,DY:()=>m,E$:()=>v,J2:()=>h,Lx:()=>u,Pr:()=>D,U0:()=>E,UT:()=>l,XL:()=>p,ec:()=>f,gQ:()=>I,iV:()=>o,j:()=>n,lC:()=>i,r7:()=>y,vF:()=>d,vq:()=>c,xw:()=>A});const r=t(9722).A.create({baseURL:"https://task-manager-sigma-ashen.vercel.app/api",headers:{"ngrok-skip-browser-warning":"true"},timeout:3e4});r.interceptors.request.use(e=>{const a=localStorage.getItem("token");return a&&(e.headers.Authorization="Bearer ".concat(a)),e},e=>Promise.reject(e));const s=e=>{var a;return e.response?{message:(null===(a=e.response.data)||void 0===a?void 0:a.error)||"An error occurred",status:e.response.status}:e.request?{message:"No response from server. Please check your connection.",status:0}:{message:e.message||"An unexpected error occurred",status:-1}},n=()=>r.get("/tasks"),o=e=>r.get("/tasks/".concat(e)),l=e=>r.post("/tasks",e),i=(e,a)=>r.put("/tasks/".concat(e),a),c=e=>r.delete("/tasks/".concat(e)),d=(e,a)=>r.put("/tasks/".concat(e,"/priority"),{priority:a}),u=(e,a)=>r.post("/auth/login",{email:e,password:a}),p=async e=>r.post("/auth/google",{code:e}),m=(e,a,t,s)=>r.post("/auth/register",{firstName:e,lastName:a,email:t,password:s}),g=(e,a)=>r.post("/auth/verify-registration",{email:e,verificationCode:a}),h=e=>r.post("/auth/resend-verification",{email:e}),E=e=>r.post("/auth/forgot-password",{email:e}),A=(e,a,t)=>r.post("/auth/verify-code",{email:e,verificationCode:a,newPassword:t}),f=(e,a)=>r.post("/auth/change-password",{currentPassword:e,newPassword:a}),v=async()=>{try{return(await r.get("/profile")).data}catch(e){throw console.error("Error fetching profile:",e),e}},y=async e=>{try{return(await r.put("/profile",e,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(a){throw console.error("Error updating profile:",a),a}},D=async e=>{try{const a=Intl.DateTimeFormat().resolvedOptions().timeZone;return{success:!0,data:(await r.post("/ai/chat",{prompt:e},{headers:{"x-user-timezone":a}})).data}}catch(a){return{success:!1,error:s(a).message}}},I=async function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];try{const t=Intl.DateTimeFormat().resolvedOptions().timeZone;return{success:!0,data:(await r.post("/ai/chat-conversation",{message:e,conversationHistory:a},{headers:{"x-user-timezone":t}})).data}}catch(t){return{success:!1,error:s(t).message}}}},7081:(e,a,t)=>{t.d(a,{NF:()=>i,ZW:()=>l});var r=t(2532);const s=(e,a)=>{if("number"!==typeof e||e<=0||!a)return null;const t=new Date(a),s=new Date(t.getTime()-60*e*60*1e3);return s<=new Date?null:{type:r.j$.ONE_TIME,remindAt:s.toISOString(),sent:!1,lastSentAt:null}},n=(e,a)=>{if(!e||!a)return null;const t=new Date(e),s=new Date(a),n=new Date;return isNaN(t.getTime())||isNaN(s.getTime())||t<=n||t>=s?null:{type:r.j$.ONE_TIME,remindAt:t.toISOString(),sent:!1,lastSentAt:null}},o=(e,a)=>{if(!a)return null;if(e!==r.j$.DAILY&&e!==r.j$.WEEKLY)return null;const t=(new Date(a)-new Date)/36e5,s=e===r.j$.DAILY?24:168;return t<s?null:{type:e,intervalHours:s,sent:!1,lastSentAt:null}},l=(e,a)=>{if(!Array.isArray(e)||!a)return[];const t=[],l=new Set;for(const i of e){if(!i||"object"!==typeof i)continue;const{type:e,remindAt:c,remindBefore:d,customDate:u,intervalHours:p}=i;if(e===r.j$.DAILY||e===r.j$.WEEKLY){const r="recurring-".concat(e);if(l.has(r))continue;const s=o(e,a);s&&(t.push(s),l.add(r));continue}let m=null;if(c?m=n(c,a):u?m=n(u,a):"number"===typeof d&&d>0&&(m=s(d,a)),m){const e="onetime-".concat(m.remindAt);l.has(e)||(t.push(m),l.add(e))}}return t},i=function(e){if(!e||0===e.length)return"";const a=[];let t=0,s=!1,n=!1;for(const o of e)o&&(o.type===r.j$.ONE_TIME?t++:o.type===r.j$.DAILY?s=!0:o.type===r.j$.WEEKLY&&(n=!0));return t>0&&a.push("".concat(t," reminder").concat(t>1?"s":"")),s&&a.push("Daily"),n&&a.push("Weekly"),a.join(", ")}},8123:(e,a,t)=>{t.d(a,{ZT:()=>i,ZQ:()=>l,lV:()=>d});var r=t(2555),s=t(3986),n=t(579);const o=["type","id","name","value","onChange","placeholder","required","className","label","error","disabled"],l=e=>{let{type:a="text",id:t,name:l,value:i,onChange:c,placeholder:d,required:u=!1,className:p="",label:m,error:g,disabled:h=!1}=e,E=(0,s.A)(e,o);return(0,n.jsxs)("div",{className:"form-input-wrapper mb-3",children:[m&&(0,n.jsxs)("label",{htmlFor:t,className:"form-label",children:[m,u&&(0,n.jsx)("span",{className:"text-danger ms-1",children:"*"})]}),(0,n.jsx)("input",(0,r.A)({type:a,id:t,name:l,value:i,onChange:c,placeholder:d,required:u,disabled:h,className:"form-control py-2 ".concat(g?"is-invalid":""," ").concat(p)},E)),g&&(0,n.jsx)("div",{className:"invalid-feedback d-block",children:g})]})},i=e=>{let{type:a="info",message:t,onClose:r,className:s=""}=e;if(!t)return null;const o={success:"alert-success",error:"alert-danger",warning:"alert-warning",info:"alert-info"}[a]||"alert-info";return(0,n.jsxs)("div",{className:"alert ".concat(o," ").concat(s," d-flex align-items-center justify-content-between"),role:"alert",children:[(0,n.jsx)("span",{children:t}),r&&(0,n.jsx)("button",{type:"button",className:"btn-close",onClick:r,"aria-label":"Close"})]})},c=["isLoading","children","loadingText","type","className","disabled","onClick","variant"],d=e=>{let{isLoading:a=!1,children:t,loadingText:o="Loading...",type:l="button",className:i="",disabled:d=!1,onClick:u,variant:p="primary"}=e,m=(0,s.A)(e,c);const g="primary"===p?"sign-in-btn":"btn-".concat(p);return(0,n.jsx)("button",(0,r.A)((0,r.A)({type:l,className:"btn ".concat(g," ").concat(i),disabled:d||a,onClick:u},m),{},{children:a?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),o]}):t}))}},9997:(e,a,t)=>{t.d(a,{Ct:()=>c,lN:()=>n,M3:()=>d,Gv:()=>u});var r=t(2555),s=t(5043);const n=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const[a,t]=(0,s.useState)(e),n=(0,s.useCallback)(e=>{const{name:a,value:s,type:n,checked:o}=e.target;t(e=>(0,r.A)((0,r.A)({},e),{},{[a]:"checkbox"===n?o:s}))},[]),o=(0,s.useCallback)(()=>{t(e)},[e]),l=(0,s.useCallback)((e,a)=>{t(t=>(0,r.A)((0,r.A)({},t),{},{[e]:a}))},[]);return{formData:a,handleChange:n,setFormData:t,resetForm:o,setFieldValue:l}};var o=t(2532);var l=t(8729),i=t(3216);const c=function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const[a,t]=(0,s.useState)(""),{logout:r}=(0,l.A)(),n=(0,i.Zp)(),c=(0,s.useCallback)(()=>{t("")},[]),d=(0,s.useCallback)((a,s)=>{if(console.error("API Error:",a),e&&(e=>{var a;return 403===(null===e||void 0===e||null===(a=e.response)||void 0===a?void 0:a.status)||403===(null===e||void 0===e?void 0:e.status)})(a))return r(),n("/login"),void t("Session expired. Please login again.");const l=function(e){var a,t,r,s;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.UU.GENERIC_ERROR;return e?null!==(a=e.response)&&void 0!==a&&null!==(t=a.data)&&void 0!==t&&t.message?e.response.data.message:null!==(r=e.response)&&void 0!==r&&null!==(s=r.data)&&void 0!==s&&s.error?e.response.data.error:e.message?e.message:n:n}(a,s);t(l)},[e,r,n]);return{error:a,setError:t,clearError:c,handleError:d}},d=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const[a,t]=(0,s.useState)(e);return{isLoading:a,startLoading:(0,s.useCallback)(()=>{t(!0)},[]),stopLoading:(0,s.useCallback)(()=>{t(!1)},[]),setIsLoading:t}},u=()=>{const[e,a]=(0,s.useState)(""),t=(0,s.useCallback)(()=>{a("")},[]);return{passwordError:e,validatePassword:(0,s.useCallback)(e=>e?e.length<8?(a(o.D8.PASSWORD_TOO_SHORT),!1):(t(),!0):(a(o.D8.REQUIRED_FIELD),!1),[t]),validatePasswordMatch:(0,s.useCallback)((e,r)=>e!==r?(a(o.D8.PASSWORD_MISMATCH),!1):(t(),!0),[t]),validatePasswordStrength:(0,s.useCallback)(e=>{const a=/[A-Z]/.test(e),t=/[a-z]/.test(e),r=/\d/.test(e),s=/[!@#$%^&*(),.?":{}|<>]/.test(e);return{isStrong:a&&t&&r&&s,hasUpperCase:a,hasLowerCase:t,hasNumbers:r,hasSpecialChar:s}},[]),clearPasswordError:t}};t(7081)}}]);
//# sourceMappingURL=291.d23b626f.chunk.js.map