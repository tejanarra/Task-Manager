"use strict";(self.webpackChunktask_manager_frontend=self.webpackChunktask_manager_frontend||[]).push([[326],{8123:(e,s,a)=>{a.d(s,{ZT:()=>c,ZQ:()=>n,lV:()=>d});var t=a(2555),r=a(3986),l=a(579);const i=["type","id","name","value","onChange","placeholder","required","className","label","error","disabled"],n=e=>{let{type:s="text",id:a,name:n,value:c,onChange:o,placeholder:d,required:m=!1,className:u="",label:h,error:b,disabled:p=!1}=e,x=(0,r.A)(e,i);return(0,l.jsxs)("div",{className:"form-input-wrapper mb-3",children:[h&&(0,l.jsxs)("label",{htmlFor:a,className:"form-label",children:[h,m&&(0,l.jsx)("span",{className:"text-danger ms-1",children:"*"})]}),(0,l.jsx)("input",(0,t.A)({type:s,id:a,name:n,value:c,onChange:o,placeholder:d,required:m,disabled:p,className:"form-control py-2 ".concat(b?"is-invalid":""," ").concat(u)},x)),b&&(0,l.jsx)("div",{className:"invalid-feedback d-block",children:b})]})},c=e=>{let{type:s="info",message:a,onClose:t,className:r=""}=e;if(!a)return null;const i={success:"alert-success",error:"alert-danger",warning:"alert-warning",info:"alert-info"}[s]||"alert-info";return(0,l.jsxs)("div",{className:"alert ".concat(i," ").concat(r," d-flex align-items-center justify-content-between"),role:"alert",children:[(0,l.jsx)("span",{children:a}),t&&(0,l.jsx)("button",{type:"button",className:"btn-close",onClick:t,"aria-label":"Close"})]})},o=["isLoading","children","loadingText","type","className","disabled","onClick","variant"],d=e=>{let{isLoading:s=!1,children:a,loadingText:i="Loading...",type:n="button",className:c="",disabled:d=!1,onClick:m,variant:u="primary"}=e,h=(0,r.A)(e,o);const b="primary"===u?"sign-in-btn":"btn-".concat(u);return(0,l.jsx)("button",(0,t.A)((0,t.A)({type:n,className:"btn ".concat(b," ").concat(c),disabled:d||s,onClick:m},h),{},{children:s?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),i]}):a}))}},6800:(e,s,a)=>{a.r(s),a.d(s,{default:()=>u});var t=a(2555),r=a(5043),l=a(3216),i=a(4505),n=a(6196),c=a(5090),o=a(1291),d=(a(7081),a(2437),a(2532)),m=(a(8123),a(579));const u=e=>{let{theme:s}=e;const a=(0,l.Zp)(),{taskId:u}=(0,l.g)(),h="new"===u,[b,p]=(0,r.useState)(""),[x,j]=(0,r.useState)(""),[N,g]=(0,r.useState)("not-started"),[f,v]=(0,r.useState)(null),[k,y]=(0,r.useState)([]),[w,C]=(0,r.useState)(!1),[A,T]=(0,r.useState)(!1),[S,D]=(0,r.useState)(null);(0,r.useEffect)((()=>{(async()=>{if(!h)try{C(!0);const e=(await(0,i.iV)(u)).data;e?(p(e.title),j(e.description),g(e.status),v(e.deadline||null),y(Array.isArray(e.reminders)?e.reminders:[])):(D("Task not found"),setTimeout((()=>a("/tasks")),2e3))}catch(e){console.error("Error loading task:",e),D("Failed to load task")}finally{C(!1)}})()}),[u,h,a]),(0,r.useEffect)((()=>{var e;const s=null===(e=window.history.state)||void 0===e?void 0:e.usr;if(null!==s&&void 0!==s&&s.task){const e=s.task;p(e.title||""),j(e.description||""),g(e.status||"not-started"),v(e.deadline||null),y(Array.isArray(e.reminders)?e.reminders:[])}}),[]);const E=()=>{a("/tasks")},q=()=>{switch(N){case"completed":return"#007a00";case"in-progress":return"#daa520";default:return"#a00000"}},F=f&&new Date(f)>new Date;return w&&!h?(0,m.jsx)("div",{className:"container mt-5",children:(0,m.jsxs)("div",{className:"task-editor-container",style:{position:"relative"},children:[(0,m.jsx)("div",{className:"editor-spine"}),(0,m.jsxs)("div",{className:"loading-state",children:[(0,m.jsx)("div",{className:"spinner-border",role:"status",children:(0,m.jsx)("span",{className:"visually-hidden",children:"Loading..."})}),(0,m.jsx)("p",{children:"Loading task..."})]})]})}):(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("div",{className:"container mt-5",children:(0,m.jsxs)("div",{className:"task-editor-container ".concat("dark"===s?"dark":""),style:{position:"relative"},children:[(0,m.jsx)("div",{className:"editor-spine",style:{backgroundColor:q()}}),(0,m.jsxs)("div",{className:"editor-header",children:[(0,m.jsx)("button",{className:"back-button",onClick:E,disabled:w,"aria-label":"Go back to tasks",children:(0,m.jsx)("i",{className:"bi bi-arrow-left"})}),(0,m.jsx)("h2",{children:h?"Create New Task":"Edit Task"}),(0,m.jsx)("i",{className:"bi ".concat("completed"===N?"bi-check-circle-fill":"in-progress"===N?"bi-hourglass-split":"bi-circle"," status-icon-header"),style:{color:q()}})]}),S&&(0,m.jsxs)("div",{className:"alert alert-danger",role:"alert",children:[(0,m.jsx)("i",{className:"bi bi-exclamation-triangle me-2"}),S]}),(0,m.jsxs)("div",{className:"editor-form",children:[(0,m.jsxs)("div",{className:"form-group",children:[(0,m.jsxs)("label",{className:"form-label",children:[(0,m.jsx)("i",{className:"bi bi-pencil-square me-1"}),"Title ",(0,m.jsx)("span",{className:"required",children:"*"})]}),(0,m.jsx)("input",{type:"text",className:"form-control",value:b,onChange:e=>p(e.target.value),placeholder:"Enter task title...",disabled:w})]}),(0,m.jsxs)("div",{className:"form-group",children:[(0,m.jsxs)("label",{className:"form-label",children:[(0,m.jsx)("i",{className:"bi bi-text-paragraph me-1"}),"Description ",(0,m.jsx)("span",{className:"required",children:"*"})]}),(0,m.jsx)("textarea",{className:"form-control",rows:5,value:x,onChange:e=>j(e.target.value),placeholder:"Enter task description...",disabled:w})]}),(0,m.jsxs)("div",{className:"form-row",children:[(0,m.jsxs)("div",{className:"form-group",children:[(0,m.jsxs)("label",{className:"form-label",children:[(0,m.jsx)("i",{className:"bi bi-flag me-1"}),"Status"]}),(0,m.jsxs)("select",{className:"form-select",value:N,onChange:e=>g(e.target.value),disabled:w,style:{color:q()},children:[(0,m.jsx)("option",{value:"not-started",children:"Not Started"}),(0,m.jsx)("option",{value:"in-progress",children:"In Progress"}),(0,m.jsx)("option",{value:"completed",children:"Completed"})]})]}),(0,m.jsxs)("div",{className:"form-group",children:[(0,m.jsxs)("label",{className:"form-label",children:[(0,m.jsx)("i",{className:"bi bi-calendar-event me-1"}),"Deadline"]}),(0,m.jsx)("input",{type:"datetime-local",className:"form-control",value:f?(0,o.wM)(f):"",onChange:e=>v(e.target.value),disabled:w})]})]}),F&&(0,m.jsxs)("div",{className:"form-group reminders-section",children:[(0,m.jsxs)("label",{className:"form-label",children:[(0,m.jsx)("i",{className:"bi bi-clock-history me-1"}),"Reminders"]}),(0,m.jsx)(n.A,{tempDeadline:f,tempReminders:k,setTempReminders:y,theme:s,ALL_INTERVALS:d.Ym})]})]}),(0,m.jsxs)("div",{className:"editor-actions",children:[!h&&(0,m.jsxs)("button",{className:"btn btn-danger",onClick:()=>T(!0),disabled:w,children:[(0,m.jsx)("i",{className:"bi bi-trash me-2"}),"Delete Task"]}),(0,m.jsxs)("div",{className:"action-group",children:[(0,m.jsx)("button",{className:"btn btn-secondary",onClick:E,disabled:w,children:"Cancel"}),(0,m.jsx)("button",{className:"btn btn-primary",onClick:async()=>{if(!b.trim()||!x.trim())return void D("Title and description are required");C(!0),D(null);const e=new Date,s=f?new Date(f):null,r=s&&s>e?(s-e)/36e5:0,l=r>0?(e=>{const s=e.some((e=>"daily"===e.type)),a=e.some((e=>"weekly"===e.type));let t=e.filter((e=>("one-time"===e.type||!e.type)&&e.remindBefore<=r));if(s&&r>0){const e=Math.floor(r/24);for(let s=1;s<=e;s++)t.push({remindBefore:24*s,sent:!1,type:"daily",dayNumber:s})}if(a&&r>0){const e=Math.floor(r/168);for(let s=1;s<=e;s++)t.push({remindBefore:24*s*7,sent:!1,type:"weekly",weekNumber:s})}return t})(k):[],n={title:b.trim(),description:x.trim(),status:N,deadline:f?s.toISOString():null,reminders:l};try{h?await(0,i.UT)((0,t.A)((0,t.A)({},n),{},{priority:1})):await(0,i.lC)(u,n),a("/tasks")}catch(S){console.error("Error saving task:",S),D("Failed to save task. Please try again.")}finally{C(!1)}},disabled:!b.trim()||!x.trim()||w,children:w?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("span",{className:"spinner-border spinner-border-sm me-2"}),"Saving..."]}):(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("i",{className:"bi bi-check-lg me-2"}),h?"Create Task":"Save Changes"]})})]})]})]})}),(0,m.jsx)(c.A,{theme:s,show:A,title:"Delete Task",message:"Are you sure you want to delete this task? This action cannot be undone.",onConfirm:async()=>{C(!0);try{await(0,i.vq)(u),a("/tasks")}catch(S){console.error("Error deleting task:",S),D("Failed to delete task"),C(!1),T(!1)}},onCancel:()=>T(!1)})]})}},8421:()=>{}}]);
//# sourceMappingURL=326.83da7247.chunk.js.map