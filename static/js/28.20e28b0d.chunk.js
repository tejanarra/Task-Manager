"use strict";(self.webpackChunktask_manager_frontend=self.webpackChunktask_manager_frontend||[]).push([[28],{28:(e,a,t)=>{t.r(a),t.d(a,{default:()=>d});var s=t(43),r=t(505),i=t(216),n=t(729),o=t(579);const l=e=>{let{theme:a,email:t,setEmail:l,handleSendVerificationCode:c,setMessage:d,setError:m,setIsLoading:u,setIsVerificationStep:h,isLoading:p}=e;const[f,g]=(0,s.useState)(""),v=(0,i.Zp)(),{login:x}=(0,n.A)();return(0,o.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),m(""),d(""),u(!0);try{const e=await(0,r.A7)(t,f);d("Verification successful! You are being redirected to home.");const{token:a,userInfo:s}=e.data;setTimeout((()=>{h(!1),x(a,s),v("/tasks")}),2e3)}catch(i){var a,s;m((null===(a=i.response)||void 0===a||null===(s=a.data)||void 0===s?void 0:s.message)||"Verification failed.")}finally{u(!1)}},className:"verification-form",children:[(0,o.jsx)("div",{className:"mb-3",children:(0,o.jsx)("input",{type:"email",className:"form-control py-2",id:"email",placeholder:"Enter your email",value:t,onChange:e=>l(e.target.value),required:!0})}),(0,o.jsx)("div",{className:"mb-3",children:(0,o.jsx)("input",{type:"text",className:"form-control py-2",id:"verificationCode",placeholder:"Enter verification code",value:f,onChange:e=>g(e.target.value),required:!0})}),(0,o.jsxs)("div",{className:"d-flex flex-row flex-wrap justify-content-between align-items-center mt-3",children:[(0,o.jsx)("button",{type:"submit",className:"btn verify-btn",disabled:p,children:p?(0,o.jsx)("span",{className:"spinner-border spinner-border-sm text-light",role:"status","aria-hidden":"true"}):"Verify Code"}),(0,o.jsx)("button",{type:"button",className:"btn btn-link resend-link",onClick:c,children:"Resend Code"})]})]})};var c=t(475);const d=e=>{let{theme:a}=e;const[t,i]=(0,s.useState)(""),[n,d]=(0,s.useState)(""),[m,u]=(0,s.useState)(""),[h,p]=(0,s.useState)(""),[f,g]=(0,s.useState)(""),[v,x]=(0,s.useState)(""),[y,j]=(0,s.useState)(""),[b,N]=(0,s.useState)(!1),[w,k]=(0,s.useState)(!1),[C,S]=(0,s.useState)(!1),[E,V]=(0,s.useState)(!0);return(0,o.jsx)("div",{className:"register-page d-flex align-items-center justify-content-center",children:(0,o.jsxs)("div",{className:"register-form wider-form",children:[(0,o.jsx)("h1",{className:"fw-bold mb-2",children:b||C?"Verify Registration":"Register"}),(0,o.jsx)("p",{className:"text-".concat("dark"===a?"light":"muted"," mb-4"),children:b||C?"Enter your verification code":"Fill in the details to create your account"}),v&&(0,o.jsx)("div",{className:"alert alert-danger",children:v}),y&&(0,o.jsx)("div",{className:"alert alert-success",children:y}),(0,o.jsxs)("div",{className:"form-check mb-3",children:[(0,o.jsx)("input",{type:"checkbox",className:"form-check-input",id:"hasVerificationCode",checked:C,onChange:()=>{S(!C),C&&N(!1)}}),(0,o.jsx)("label",{className:"form-check-label",htmlFor:"hasVerificationCode",children:"I already have a verification code"})]}),!b&&!C&&(0,o.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),x(""),j(""),k(!0),h!==f)return V(!1),void k(!1);try{const e=await(0,r.DY)(t,n,m,h);j(e.data.message||"Registration successful!"),N(!0),S(!0)}catch(i){var a,s;x((null===(a=i.response)||void 0===a||null===(s=a.data)||void 0===s?void 0:s.message)||"Registration failed.")}finally{k(!1)}},children:[(0,o.jsxs)("div",{className:"row mb-3",children:[(0,o.jsx)("div",{className:"col-6",children:(0,o.jsx)("input",{type:"text",className:"form-control py-2",placeholder:"First Name",value:t,onChange:e=>i(e.target.value),required:!0})}),(0,o.jsx)("div",{className:"col-6",children:(0,o.jsx)("input",{type:"text",className:"form-control py-2",placeholder:"Last Name",value:n,onChange:e=>d(e.target.value),required:!0})})]}),(0,o.jsx)("div",{className:"mb-3",children:(0,o.jsx)("input",{type:"email",className:"form-control py-2",placeholder:"Email",value:m,onChange:e=>u(e.target.value),required:!0})}),(0,o.jsx)("div",{className:"mb-3",children:(0,o.jsx)("input",{type:"password",className:"form-control py-2",placeholder:"Password",value:h,onChange:e=>p(e.target.value),required:!0})}),(0,o.jsx)("div",{className:"mb-3",children:(0,o.jsx)("input",{type:"password",className:"form-control py-2",placeholder:"Confirm Password",value:f,onChange:e=>{g(e.target.value),V(e.target.value===h)},required:!0})}),!E&&(0,o.jsx)("div",{className:"alert alert-danger",children:"Passwords do not match."}),(0,o.jsx)("button",{type:"submit",className:"btn register-btn w-100 mb-3",disabled:w||!E,children:w?(0,o.jsx)("span",{className:"spinner-border spinner-border-sm text-light",role:"status","aria-hidden":"true"}):"Register"})]}),(b||C)&&(0,o.jsx)(l,{email:m,setEmail:u,handleSendVerificationCode:async e=>{e.preventDefault(),x(""),j(""),k(!0);try{const e=await(0,r.J2)(m);j(e.data.message||"Verification code sent!")}catch(s){var a,t;x((null===(a=s.response)||void 0===a||null===(t=a.data)||void 0===t?void 0:t.message)||"Failed to send code.")}finally{k(!1)}},setMessage:j,setError:x,setIsLoading:k,setIsVerificationStep:N,isLoading:w}),(0,o.jsx)("div",{className:"text-center mt-4",children:(0,o.jsxs)("p",{className:"mb-0 d-flex justify-content-center align-items-center gap-1",children:["Already have an account?"," ",(0,o.jsx)(c.N_,{to:"/login",className:"login-link",children:"Login"})]})})]})})}},505:(e,a,t)=>{t.d(a,{A7:()=>u,DY:()=>m,E$:()=>v,J2:()=>h,Lx:()=>c,U0:()=>p,UT:()=>i,XL:()=>d,ec:()=>g,j:()=>r,lC:()=>n,r7:()=>x,vF:()=>l,vq:()=>o,xw:()=>f});const s=t(722).A.create({baseURL:"https://task-manager-sigma-ashen.vercel.app/api",headers:{"ngrok-skip-browser-warning":"true"}});s.interceptors.request.use((e=>{const a=localStorage.getItem("token");return a&&(e.headers.Authorization="Bearer ".concat(a)),e}),(e=>Promise.reject(e)));const r=()=>s.get("/tasks"),i=e=>s.post("/tasks",e),n=(e,a)=>s.put("/tasks/".concat(e),a),o=e=>s.delete("/tasks/".concat(e)),l=(e,a)=>s.put("/tasks/".concat(e,"/priority"),{priority:a}),c=(e,a)=>s.post("/auth/login",{email:e,password:a}),d=async e=>s.post("/auth/google",{code:e}),m=(e,a,t,r)=>s.post("/auth/register",{firstName:e,lastName:a,email:t,password:r}),u=(e,a)=>s.post("/auth/verify-registration",{email:e,verificationCode:a}),h=e=>s.post("/auth/resend-verification",{email:e}),p=e=>s.post("/auth/forgot-password",{email:e}),f=(e,a,t)=>s.post("/auth/verify-code",{email:e,verificationCode:a,newPassword:t}),g=(e,a)=>s.post("/auth/change-password",{currentPassword:e,newPassword:a}),v=async()=>{try{return(await s.get("/profile")).data}catch(e){throw console.error("Error fetching profile:",e),e}},x=async e=>{try{return(await s.put("/profile",e,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(a){throw console.error("Error updating profile:",a),a}}}}]);
//# sourceMappingURL=28.20e28b0d.chunk.js.map