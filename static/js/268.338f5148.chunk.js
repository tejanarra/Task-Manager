"use strict";(self.webpackChunktask_manager_frontend=self.webpackChunktask_manager_frontend||[]).push([[268],{268:(e,s,r)=>{r.r(s),r.d(s,{default:()=>d});var a=r(555),t=r(43),o=r(216),n=r(505),c=(r(210),r(347),r(729)),i=r(579);const d=()=>{const[e,s]=(0,t.useState)({currentPassword:"",newPassword:"",confirmNewPassword:""}),[r,d]=(0,t.useState)(""),[l,u]=(0,t.useState)(""),m=(0,o.Zp)(),{logout:w}=(0,c.A)(),p=r=>{const{name:t,value:o}=r.target;s((0,a.A)((0,a.A)({},e),{},{[t]:o}))};return(0,i.jsx)("div",{className:"profile-container",children:(0,i.jsxs)("div",{className:"profile-card shadow rounded",children:[(0,i.jsx)("h2",{className:"profile-title text-center mb-4 bold-text",children:"Change Password"}),l&&(0,i.jsx)("p",{className:"text-success text-center",children:l}),r&&(0,i.jsx)("p",{className:"text-danger text-center",children:r}),(0,i.jsxs)("form",{onSubmit:async s=>{s.preventDefault();const{currentPassword:r,newPassword:a,confirmNewPassword:t}=e;if(r&&a&&t)if(a===t)try{await(0,n.ec)(r,a),u("Password changed successfully!"),d(""),setTimeout((()=>m("/profile-overview")),2e3)}catch(l){var o,c,i;console.error("Password change error:",(null===(o=l.response)||void 0===o?void 0:o.data)||l.message),d((null===(c=l.response)||void 0===c||null===(i=c.data)||void 0===i?void 0:i.message)||"Failed to change password. Please try again."),u(""),l&&403===l.status&&(w(),m("/login"))}else d("Passwords do not match.");else d("All fields are required.")},children:[(0,i.jsxs)("div",{className:"form-group mb-3",children:[(0,i.jsx)("label",{htmlFor:"currentPassword",className:"form-label",children:"Current Password"}),(0,i.jsx)("input",{type:"password",className:"form-control",id:"currentPassword",name:"currentPassword",value:e.currentPassword,onChange:p,required:!0})]}),(0,i.jsxs)("div",{className:"form-group mb-3",children:[(0,i.jsx)("label",{htmlFor:"newPassword",className:"form-label",children:"New Password"}),(0,i.jsx)("input",{type:"password",className:"form-control",id:"newPassword",name:"newPassword",value:e.newPassword,onChange:p,required:!0})]}),(0,i.jsxs)("div",{className:"form-group mb-3",children:[(0,i.jsx)("label",{htmlFor:"confirmNewPassword",className:"form-label",children:"Confirm New Password"}),(0,i.jsx)("input",{type:"password",className:"form-control",id:"confirmNewPassword",name:"confirmNewPassword",value:e.confirmNewPassword,onChange:p,required:!0})]}),(0,i.jsxs)("div",{className:"row mt-4",children:[(0,i.jsx)("div",{className:"col-12 col-md-6 mb-2 mb-md-0",children:(0,i.jsx)("button",{type:"button",className:"btn btn-secondary w-100",onClick:()=>m("/profile-overview"),children:"Cancel"})}),(0,i.jsx)("div",{className:"col-12 col-md-6",children:(0,i.jsx)("button",{type:"submit",className:"btn btn-dark w-100",children:"Save Changes"})})]})]})]})})}},505:(e,s,r)=>{r.d(s,{A7:()=>w,DY:()=>m,E$:()=>v,J2:()=>p,Lx:()=>l,Pr:()=>N,U0:()=>h,UT:()=>n,XL:()=>u,ec:()=>g,gQ:()=>x,j:()=>o,lC:()=>c,r7:()=>P,vF:()=>d,vq:()=>i,xw:()=>f});const a=r(722).A.create({baseURL:"https://task-manager-sigma-ashen.vercel.app/api",headers:{"ngrok-skip-browser-warning":"true"},timeout:3e4});a.interceptors.request.use((e=>{const s=localStorage.getItem("token");return s&&(e.headers.Authorization="Bearer ".concat(s)),e}),(e=>Promise.reject(e)));const t=e=>{var s;return e.response?{message:(null===(s=e.response.data)||void 0===s?void 0:s.error)||"An error occurred",status:e.response.status}:e.request?{message:"No response from server. Please check your connection.",status:0}:{message:e.message||"An unexpected error occurred",status:-1}},o=()=>a.get("/tasks"),n=e=>a.post("/tasks",e),c=(e,s)=>a.put("/tasks/".concat(e),s),i=e=>a.delete("/tasks/".concat(e)),d=(e,s)=>a.put("/tasks/".concat(e,"/priority"),{priority:s}),l=(e,s)=>a.post("/auth/login",{email:e,password:s}),u=async e=>a.post("/auth/google",{code:e}),m=(e,s,r,t)=>a.post("/auth/register",{firstName:e,lastName:s,email:r,password:t}),w=(e,s)=>a.post("/auth/verify-registration",{email:e,verificationCode:s}),p=e=>a.post("/auth/resend-verification",{email:e}),h=e=>a.post("/auth/forgot-password",{email:e}),f=(e,s,r)=>a.post("/auth/verify-code",{email:e,verificationCode:s,newPassword:r}),g=(e,s)=>a.post("/auth/change-password",{currentPassword:e,newPassword:s}),v=async()=>{try{return(await a.get("/profile")).data}catch(e){throw console.error("Error fetching profile:",e),e}},P=async e=>{try{return(await a.put("/profile",e,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(s){throw console.error("Error updating profile:",s),s}},N=async e=>{try{return{success:!0,data:(await a.post("/ai/chat",{prompt:e})).data}}catch(s){return{success:!1,error:t(s).message}}},x=async function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];try{return{success:!0,data:(await a.post("/ai/chat-conversation",{message:e,conversationHistory:s})).data}}catch(r){return{success:!1,error:t(r).message}}}},347:()=>{},210:()=>{}}]);
//# sourceMappingURL=268.338f5148.chunk.js.map