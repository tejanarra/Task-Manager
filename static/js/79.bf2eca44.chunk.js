"use strict";(self.webpackChunktask_manager_frontend=self.webpackChunktask_manager_frontend||[]).push([[79],{1291:(e,t,n)=>{n.d(t,{Ic:()=>s,fw:()=>r,wM:()=>i});var a=n(1535);const r=e=>{const t=new Date(e),n=new Date,r=Math.floor((n-t)/1e3);if(r<0){const e=Math.abs(r);return e<60?"Just now":e<60?"in ".concat(e," second").concat(1!==e?"s":""):e<3600?"in ".concat(Math.ceil(e/60)," minute").concat(1!==Math.ceil(e/60)?"s":""):e<86400?"in ".concat(Math.ceil(e/3600)," hour").concat(1!==Math.ceil(e/3600)?"s":""):e<604800?"in ".concat(Math.ceil(e/86400)," day").concat(1!==Math.ceil(e/86400)?"s":""):(0,a.GP)(t,"MMM dd, yyyy")}if(r<60)return"Just now";if(r<60)return"".concat(r," second").concat(1!==r?"s":""," ago");if(r<3600)return"".concat(Math.floor(r/60)," minute").concat(1!==Math.floor(r/60)?"s":""," ago");if(r<86400)return"".concat(Math.floor(r/3600)," hour").concat(1!==Math.floor(r/3600)?"s":""," ago");if(r<604800){const e=Math.floor(r/86400);return 1===e?"Yesterday":"".concat(e," days ago")}return(0,a.GP)(t,"MMM dd, yyyy")},s=e=>{const[t,n,a]=e.split("-").map(Number),r=new Date(t,n-1,a);if(isNaN(r))return"Invalid Date";return r.toLocaleString("en-US",{year:"numeric",month:"long",day:"numeric"})},i=e=>{const t=new Date(e),n=t.getFullYear(),a=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0"),s=String(t.getHours()).padStart(2,"0"),i=String(t.getMinutes()).padStart(2,"0");return"".concat(n,"-").concat(a,"-").concat(r,"T").concat(s,":").concat(i)}},2532:(e,t,n)=>{n.d(t,{D8:()=>c,Ez:()=>s,Rr:()=>r,UU:()=>l,Ym:()=>a,d5:()=>i,j$:()=>o});const a=[{value:1,label:"1 hr"},{value:24,label:"1 day"},{value:168,label:"1 week"}],r={NOT_STARTED:"not-started",IN_PROGRESS:"in-progress",COMPLETED:"completed"},s=(r.NOT_STARTED,r.IN_PROGRESS,r.COMPLETED,{[r.COMPLETED]:"#007a00",[r.IN_PROGRESS]:"#daa520",[r.NOT_STARTED]:"#a00000"}),i={TOKEN:"token",USER_INFO:"userInfo",THEME:"theme",AI_CHAT_MODE:"ai_chat_mode",AI_CHAT_HISTORY:"ai_chat_history"},o={ONE_TIME:"one-time",DAILY:"daily",WEEKLY:"weekly"},c={REQUIRED_FIELD:"This field is required",INVALID_EMAIL:"Please enter a valid email address",PASSWORD_MISMATCH:"Passwords do not match",PASSWORD_TOO_SHORT:"Password must be at least 8 characters",INVALID_PHONE:"Please enter a valid phone number"},l={LOGIN_FAILED:"Login failed. Please try again.",REGISTRATION_FAILED:"Registration failed. Please try again.",VERIFICATION_FAILED:"Verification failed. Please try again.",PASSWORD_RESET_FAILED:"Password reset failed. Please try again.",PASSWORD_CHANGE_FAILED:"Failed to change password. Please try again.",PROFILE_UPDATE_FAILED:"Failed to update profile. Please try again.",TASK_FETCH_FAILED:"Failed to fetch tasks. Please try again.",TASK_CREATE_FAILED:"Failed to create task. Please try again.",TASK_UPDATE_FAILED:"Failed to update task. Please try again.",TASK_DELETE_FAILED:"Failed to delete task. Please try again.",NETWORK_ERROR:"Network error. Please check your connection.",GENERIC_ERROR:"Something went wrong. Please try again."}},4505:(e,t,n)=>{n.d(t,{A7:()=>p,DY:()=>h,E$:()=>A,J2:()=>g,Lx:()=>m,Pr:()=>v,U0:()=>y,UT:()=>o,XL:()=>u,ec:()=>b,gQ:()=>w,iV:()=>i,j:()=>s,lC:()=>c,r7:()=>N,vF:()=>d,vq:()=>l,xw:()=>f});const a=n(9722).A.create({baseURL:"http://localhost:5001/api",headers:{"ngrok-skip-browser-warning":"true"},timeout:3e4});a.interceptors.request.use(e=>{const t=localStorage.getItem("token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e));const r=e=>{var t;return e.response?{message:(null===(t=e.response.data)||void 0===t?void 0:t.error)||"An error occurred",status:e.response.status}:e.request?{message:"No response from server. Please check your connection.",status:0}:{message:e.message||"An unexpected error occurred",status:-1}},s=()=>a.get("/tasks"),i=e=>a.get("/tasks/".concat(e)),o=e=>a.post("/tasks",e),c=(e,t)=>a.put("/tasks/".concat(e),t),l=e=>a.delete("/tasks/".concat(e)),d=(e,t)=>a.put("/tasks/".concat(e,"/priority"),{priority:t}),m=(e,t)=>a.post("/auth/login",{email:e,password:t}),u=async e=>a.post("/auth/google",{code:e}),h=(e,t,n,r)=>a.post("/auth/register",{firstName:e,lastName:t,email:n,password:r}),p=(e,t)=>a.post("/auth/verify-registration",{email:e,verificationCode:t}),g=e=>a.post("/auth/resend-verification",{email:e}),y=e=>a.post("/auth/forgot-password",{email:e}),f=(e,t,n)=>a.post("/auth/verify-code",{email:e,verificationCode:t,newPassword:n}),b=(e,t)=>a.post("/auth/change-password",{currentPassword:e,newPassword:t}),A=async()=>{try{return(await a.get("/profile")).data}catch(e){throw console.error("Error fetching profile:",e),e}},N=async e=>{try{return(await a.put("/profile",e,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(t){throw console.error("Error updating profile:",t),t}},v=async e=>{try{const t=Intl.DateTimeFormat().resolvedOptions().timeZone;return{success:!0,data:(await a.post("/ai/chat",{prompt:e},{headers:{"x-user-timezone":t}})).data}}catch(t){return{success:!1,error:r(t).message}}},w=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];try{const n=Intl.DateTimeFormat().resolvedOptions().timeZone;return{success:!0,data:(await a.post("/ai/chat-conversation",{message:e,conversationHistory:t},{headers:{"x-user-timezone":n}})).data}}catch(n){return{success:!1,error:r(n).message}}}},5090:(e,t,n)=>{n.d(t,{A:()=>r});n(8421);var a=n(579);const r=e=>{let{theme:t,show:n,title:r="Confirm Action",message:s="Are you sure you want to proceed?",onConfirm:i,onCancel:o}=e;return n?(0,a.jsx)("div",{className:"custom-modal-overlay d-flex align-items-center justify-content-center",tabIndex:"-1",role:"dialog",onClick:o,children:(0,a.jsxs)("div",{className:"custom-modal-content",role:"document",onClick:e=>e.stopPropagation(),children:[(0,a.jsxs)("div",{className:"custom-modal-header",children:[(0,a.jsx)("h5",{className:"modal2-title fw-bold",children:r}),(0,a.jsx)("button",{type:"button",className:"btn-close","aria-label":"Close",onClick:o})]}),(0,a.jsx)("div",{className:"custom-modal-body",children:(0,a.jsx)("p",{className:"text-".concat("dark"===t?"light":"muted"," mb-4"),children:s})}),(0,a.jsxs)("div",{className:"custom-modal-footer d-flex justify-content-end gap-2",children:[(0,a.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:o,children:"Cancel"}),(0,a.jsx)("button",{type:"button",className:"btn sign-in-btn",onClick:i,children:"Confirm"})]})]})}):null}},6196:(e,t,n)=>{n.d(t,{A:()=>o});var a=n(5043),r=n(579);const s=e=>{let{value:t,label:n,checked:a,onChange:s,className:i="",disabled:o=!1}=e;return(0,r.jsx)("div",{className:"reminder-checkbox-wrapper ".concat(i),children:(0,r.jsxs)("label",{className:"reminder-checkbox-label ".concat(a?"checked":""," ").concat(o?"disabled":""),children:[(0,r.jsx)("input",{type:"checkbox",className:"reminder-checkbox-input",checked:a,onChange:e=>!o&&s(e.target.checked),disabled:o,"aria-label":"Set reminder for ".concat(n),"aria-describedby":"reminder-".concat(t,"-desc")}),(0,r.jsx)("div",{className:"reminder-checkbox-custom"}),(0,r.jsx)("span",{className:"reminder-checkbox-text",id:"reminder-".concat(t,"-desc"),children:n})]})})};var i=n(1291);n(7081);const o=e=>{let{tempDeadline:t,tempReminders:n,setTempReminders:o,theme:c,ALL_INTERVALS:l=[]}=e;const[d,m]=(0,a.useState)(""),[u,h]=(0,a.useState)(!1),p=new Date,g=t?new Date(t):null,y=g&&g>p?(g-p)/36e5:0,f=e=>!e.type||"one-time"===e.type,b=n.some(e=>"daily"===e.type),A=n.some(e=>"weekly"===e.type),N=l.filter(e=>e.value<=y),v=n.filter(e=>{if(!f(e))return!1;if(e.remindAt&&g){const t=new Date(e.remindAt),n=(g-t)/36e5;if(n>y||n<=0)return!1;return!l.some(e=>Math.abs(e.value-n)<.01)}return!1}).map(e=>{if(e.remindAt){const t=new Date(e.remindAt),n=(g-t)/36e5;return{remindAt:e.remindAt,label:t.toLocaleString(),value:n}}return null}).filter(Boolean),w=Math.floor(y/24),x=Math.floor(y/168);return(0,r.jsxs)("div",{className:"task-reminders-container",children:[(0,r.jsx)("div",{className:"reminders-dropdown",onClick:()=>h(!u),children:(0,r.jsxs)("div",{className:"reminders-dropdown-header",children:[(0,r.jsxs)("h6",{children:[(0,r.jsx)("i",{className:"bi bi-clock"})," Reminders",n.length>0&&(0,r.jsx)("span",{className:"reminder-count-badge",children:n.length})]}),u?(0,r.jsx)("i",{className:"bi bi-chevron-up"}):(0,r.jsx)("i",{className:"bi bi-chevron-down"})]})}),u&&(0,r.jsxs)("div",{className:"reminders-dropdown-content",children:[(w>0||x>0)&&(0,r.jsxs)("div",{className:"recurring-reminders-section",children:[(0,r.jsxs)("label",{className:"reminder-section-label",children:[(0,r.jsx)("i",{className:"bi bi-arrow-repeat"})," Recurring Reminders:"]}),(0,r.jsxs)("div",{className:"recurring-options",children:[w>0&&(0,r.jsxs)("div",{className:"recurring-option",children:[(0,r.jsx)("input",{type:"checkbox",checked:b,onChange:e=>{return n=e.target.checked,void o(e=>{const a=e.filter(e=>"daily"!==e.type);return n&&t?[...a,{type:"daily",intervalHours:24,sent:!1,lastSentAt:null}]:a});var n},id:"daily-reminders"}),(0,r.jsx)("label",{htmlFor:"daily-reminders",children:"Daily reminders until deadline"})]}),x>0&&(0,r.jsxs)("div",{className:"recurring-option",children:[(0,r.jsx)("input",{type:"checkbox",checked:A,onChange:e=>{return n=e.target.checked,void o(e=>{const a=e.filter(e=>"weekly"!==e.type);return n&&t?[...a,{type:"weekly",intervalHours:168,sent:!1,lastSentAt:null}]:a});var n},id:"weekly-reminders"}),(0,r.jsx)("label",{htmlFor:"weekly-reminders",children:"Weekly reminders until deadline"})]})]})]}),N.length>0&&(0,r.jsxs)("div",{className:"reminder-section",children:[(0,r.jsxs)("label",{className:"reminder-section-label",children:[(0,r.jsx)("i",{className:"bi bi-bell"})," One-time Reminders:"]}),(0,r.jsx)("div",{className:"reminder-grid",children:N.map(e=>{const a=t?new Date(new Date(t).getTime()-60*e.value*60*1e3).toISOString():null,i=!!n.find(e=>f(e)&&e.remindAt===a);return(0,r.jsx)(s,{value:e.value,label:e.label,checked:i,onChange:n=>((e,n)=>{t&&o(a=>{if(n){const n=new Date(t),r=new Date(n.getTime()-60*e*60*1e3);return a.find(e=>f(e)&&e.remindAt===r.toISOString())?a:[...a,{type:"one-time",remindAt:r.toISOString(),sent:!1,lastSentAt:null}]}{const n=new Date(t),r=new Date(n.getTime()-60*e*60*1e3).toISOString();return a.filter(e=>!f(e)||e.remindAt!==r)}})})(e.value,n)},e.value)})})]}),(0,r.jsxs)("div",{className:"custom-reminder-section",children:[(0,r.jsxs)("label",{className:"reminder-section-label",children:[(0,r.jsx)("i",{className:"bi bi-calendar-plus"})," Add Custom Reminder:"]}),(0,r.jsxs)("div",{className:"custom-reminder-input-group",children:[(0,r.jsx)("input",{type:"datetime-local",value:d,onChange:e=>m(e.target.value),min:(0,i.wM)(p.toISOString()),max:t?(0,i.wM)(t):void 0}),(0,r.jsxs)("button",{className:"btn btn-sm ".concat("dark"===c?"btn-outline-light":"btn-outline-dark"),onClick:()=>{if(!d||!t)return;const e=new Date(d),n=new Date(t);if(isNaN(e.getTime()))return void console.warn("Invalid date selected");if(e>=n)return void console.warn("Custom reminder must be before deadline");if(e<=p)return void console.warn("Custom reminder must be in the future");const a=e.toISOString();o(e=>e.some(e=>f(e)&&e.remindAt===a)?e:[...e,{type:"one-time",remindAt:a,sent:!1,lastSentAt:null}]),m("")},disabled:!d,children:[(0,r.jsx)("i",{className:"bi bi-plus-lg"})," Add"]})]})]}),v.length>0&&(0,r.jsxs)("div",{className:"reminder-section",children:[(0,r.jsxs)("label",{className:"reminder-section-label",children:[(0,r.jsx)("i",{className:"bi bi-calendar-check"})," Custom One-time Reminders:"]}),(0,r.jsx)("div",{className:"reminder-grid",children:v.map((e,t)=>{const a=n.some(t=>f(t)&&t.remindAt===e.remindAt);return(0,r.jsx)(s,{value:e.value,label:e.label,checked:a,onChange:t=>{t||o(t=>t.filter(t=>t.remindAt!==e.remindAt))}},e.remindAt||"".concat(e.value,"-").concat(t))})})]}),n.length>0&&(0,r.jsx)("div",{className:"active-reminders-summary",children:(0,r.jsxs)("small",{children:[(0,r.jsx)("i",{className:"bi bi-info-circle"})," ",(0,r.jsx)("strong",{children:"Active:"}),b&&" Daily",b&&A&&",",A&&" Weekly",(b||A)&&n.filter(f).length>0&&",",n.filter(f).length>0&&" ".concat(n.filter(f).length," one-time")]})})]})]})}},7081:(e,t,n)=>{n.d(t,{NF:()=>c,ZW:()=>o});var a=n(2532);const r=(e,t)=>{if("number"!==typeof e||e<=0||!t)return null;const n=new Date(t),r=new Date(n.getTime()-60*e*60*1e3);return r<=new Date?null:{type:a.j$.ONE_TIME,remindAt:r.toISOString(),sent:!1,lastSentAt:null}},s=(e,t)=>{if(!e||!t)return null;const n=new Date(e),r=new Date(t),s=new Date;return isNaN(n.getTime())||isNaN(r.getTime())||n<=s||n>=r?null:{type:a.j$.ONE_TIME,remindAt:n.toISOString(),sent:!1,lastSentAt:null}},i=(e,t)=>{if(!t)return null;if(e!==a.j$.DAILY&&e!==a.j$.WEEKLY)return null;const n=(new Date(t)-new Date)/36e5,r=e===a.j$.DAILY?24:168;return n<r?null:{type:e,intervalHours:r,sent:!1,lastSentAt:null}},o=(e,t)=>{if(!Array.isArray(e)||!t)return[];const n=[],o=new Set;for(const c of e){if(!c||"object"!==typeof c)continue;const{type:e,remindAt:l,remindBefore:d,customDate:m,intervalHours:u}=c;if(e===a.j$.DAILY||e===a.j$.WEEKLY){const a="recurring-".concat(e);if(o.has(a))continue;const r=i(e,t);r&&(n.push(r),o.add(a));continue}let h=null;if(l?h=s(l,t):m?h=s(m,t):"number"===typeof d&&d>0&&(h=r(d,t)),h){const e="onetime-".concat(h.remindAt);o.has(e)||(n.push(h),o.add(e))}}return n},c=function(e){if(!e||0===e.length)return"";const t=[];let n=0,r=!1,s=!1;for(const i of e)i&&(i.type===a.j$.ONE_TIME?n++:i.type===a.j$.DAILY?r=!0:i.type===a.j$.WEEKLY&&(s=!0));return n>0&&t.push("".concat(n," reminder").concat(n>1?"s":"")),r&&t.push("Daily"),s&&t.push("Weekly"),t.join(", ")}}}]);
//# sourceMappingURL=79.bf2eca44.chunk.js.map