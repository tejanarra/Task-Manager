"use strict";(self.webpackChunktask_manager_frontend=self.webpackChunktask_manager_frontend||[]).push([[28],{28:(e,a,t)=>{t.r(a),t.d(a,{default:()=>d});var s=t(43),r=t(505),i=t(216),n=t(729),o=t(579);const l=e=>{let{theme:a,email:t,setEmail:l,handleSendVerificationCode:c,setMessage:d,setError:m,setIsLoading:u,setIsVerificationStep:h,isLoading:p}=e;const[v,f]=(0,s.useState)(""),g=(0,i.Zp)(),{login:x}=(0,n.A)();return(0,o.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),m(""),d(""),u(!0);try{const e=await(0,r.A7)(t,v);d("Verification successful! You are being redirected to home.");const{token:a,userInfo:s}=e.data;setTimeout((()=>{h(!1),x(a,s),g("/tasks")}),2e3)}catch(i){var a,s;m((null===(a=i.response)||void 0===a||null===(s=a.data)||void 0===s?void 0:s.message)||"Verification failed.")}finally{u(!1)}},className:"verification-form",children:[(0,o.jsx)("div",{className:"mb-3",children:(0,o.jsx)("input",{type:"email",className:"form-control py-2",id:"email",placeholder:"Enter your email",value:t,onChange:e=>l(e.target.value),required:!0})}),(0,o.jsx)("div",{className:"mb-3",children:(0,o.jsx)("input",{type:"text",className:"form-control py-2",id:"verificationCode",placeholder:"Enter verification code",value:v,onChange:e=>f(e.target.value),required:!0})}),(0,o.jsxs)("div",{className:"d-flex flex-row flex-wrap justify-content-between align-items-center mt-3",children:[(0,o.jsx)("button",{type:"submit",className:"btn verify-btn",disabled:p,children:p?(0,o.jsx)("span",{className:"spinner-border spinner-border-sm text-light",role:"status","aria-hidden":"true"}):"Verify Code"}),(0,o.jsx)("button",{type:"button",className:"btn btn-link resend-link",onClick:c,children:"Resend Code"})]})]})};var c=t(475);const d=e=>{let{theme:a}=e;const[t,i]=(0,s.useState)(""),[n,d]=(0,s.useState)(""),[m,u]=(0,s.useState)(""),[h,p]=(0,s.useState)(""),[v,f]=(0,s.useState)(""),[g,x]=(0,s.useState)(""),[y,j]=(0,s.useState)(""),[b,N]=(0,s.useState)(!1),[w,k]=(0,s.useState)(!1),[C,S]=(0,s.useState)(!1),[V,A]=(0,s.useState)(!0);return(0,o.jsx)("div",{className:"register-page d-flex align-items-center justify-content-center",children:(0,o.jsxs)("div",{className:"register-form wider-form",children:[(0,o.jsx)("h1",{className:"fw-bold mb-2",children:b||C?"Verify Registration":"Register"}),(0,o.jsx)("p",{className:"text-".concat("dark"===a?"light":"muted"," mb-4"),children:b||C?"Enter your verification code":"Fill in the details to create your account"}),g&&(0,o.jsx)("div",{className:"alert alert-danger",children:g}),y&&(0,o.jsx)("div",{className:"alert alert-success",children:y}),(0,o.jsxs)("div",{className:"form-check mb-3",children:[(0,o.jsx)("input",{type:"checkbox",className:"form-check-input",id:"hasVerificationCode",checked:C,onChange:()=>{S(!C),C&&N(!1)}}),(0,o.jsx)("label",{className:"form-check-label",htmlFor:"hasVerificationCode",children:"I already have a verification code"})]}),!b&&!C&&(0,o.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),x(""),j(""),k(!0),h!==v)return A(!1),void k(!1);try{const e=await(0,r.DY)(t,n,m,h);j(e.data.message||"Registration successful!"),N(!0),S(!0)}catch(i){var a,s;x((null===(a=i.response)||void 0===a||null===(s=a.data)||void 0===s?void 0:s.message)||"Registration failed.")}finally{k(!1)}},children:[(0,o.jsxs)("div",{className:"row mb-3",children:[(0,o.jsx)("div",{className:"col-6",children:(0,o.jsx)("input",{type:"text",className:"form-control py-2",placeholder:"First Name",value:t,onChange:e=>i(e.target.value),required:!0})}),(0,o.jsx)("div",{className:"col-6",children:(0,o.jsx)("input",{type:"text",className:"form-control py-2",placeholder:"Last Name",value:n,onChange:e=>d(e.target.value),required:!0})})]}),(0,o.jsx)("div",{className:"mb-3",children:(0,o.jsx)("input",{type:"email",className:"form-control py-2",placeholder:"Email",value:m,onChange:e=>u(e.target.value),required:!0})}),(0,o.jsx)("div",{className:"mb-3",children:(0,o.jsx)("input",{type:"password",className:"form-control py-2",placeholder:"Password",value:h,onChange:e=>p(e.target.value),required:!0})}),(0,o.jsx)("div",{className:"mb-3",children:(0,o.jsx)("input",{type:"password",className:"form-control py-2",placeholder:"Confirm Password",value:v,onChange:e=>{f(e.target.value),A(e.target.value===h)},required:!0})}),!V&&(0,o.jsx)("div",{className:"alert alert-danger",children:"Passwords do not match."}),(0,o.jsx)("button",{type:"submit",className:"btn register-btn w-100 mb-3",disabled:w||!V,children:w?(0,o.jsx)("span",{className:"spinner-border spinner-border-sm text-light",role:"status","aria-hidden":"true"}):"Register"})]}),(b||C)&&(0,o.jsx)(l,{email:m,setEmail:u,handleSendVerificationCode:async e=>{e.preventDefault(),x(""),j(""),k(!0);try{const e=await(0,r.J2)(m);j(e.data.message||"Verification code sent!")}catch(s){var a,t;x((null===(a=s.response)||void 0===a||null===(t=a.data)||void 0===t?void 0:t.message)||"Failed to send code.")}finally{k(!1)}},setMessage:j,setError:x,setIsLoading:k,setIsVerificationStep:N,isLoading:w}),(0,o.jsx)("div",{className:"text-center mt-4",children:(0,o.jsxs)("p",{className:"mb-0 d-flex justify-content-center align-items-center gap-1",children:["Already have an account?"," ",(0,o.jsx)(c.N_,{to:"/login",className:"login-link",children:"Login"})]})})]})})}},505:(e,a,t)=>{t.d(a,{A7:()=>p,DY:()=>h,E$:()=>y,J2:()=>v,Lx:()=>m,Pr:()=>b,U0:()=>f,UT:()=>n,XL:()=>u,eY:()=>d,ec:()=>x,gQ:()=>N,j:()=>i,lC:()=>o,r7:()=>j,vF:()=>c,vq:()=>l,xw:()=>g});var s=t(555);const r=t(722).A.create({baseURL:"http://localhost:5001/api",headers:{"ngrok-skip-browser-warning":"true"},timeout:3e4});r.interceptors.request.use((e=>{const a=localStorage.getItem("token");return a&&(e.headers.Authorization="Bearer ".concat(a)),e}),(e=>Promise.reject(e)));const i=()=>r.get("/tasks"),n=e=>r.post("/tasks",(0,s.A)((0,s.A)({},e),{},{deadlineUTC:e.deadlineUTC||null})),o=(e,a)=>{var t;return r.put("/tasks/".concat(e),(0,s.A)((0,s.A)({},a),{},{deadlineUTC:null!==(t=a.deadlineUTC)&&void 0!==t?t:null}))},l=e=>r.delete("/tasks/".concat(e)),c=(e,a)=>r.put("/tasks/".concat(e,"/priority"),{priority:a}),d=(e,a)=>r.patch("/tasks/".concat(e,"/reminders"),{action:"overwrite",reminders:a}),m=(e,a)=>r.post("/auth/login",{email:e,password:a}),u=e=>r.post("/auth/google",{code:e}),h=(e,a,t,s)=>r.post("/auth/register",{firstName:e,lastName:a,email:t,password:s}),p=(e,a)=>r.post("/auth/verify-registration",{email:e,verificationCode:a}),v=e=>r.post("/auth/resend-verification",{email:e}),f=e=>r.post("/auth/forgot-password",{email:e}),g=(e,a,t)=>r.post("/auth/verify-code",{email:e,verificationCode:a,newPassword:t}),x=(e,a)=>r.post("/auth/change-password",{currentPassword:e,newPassword:a}),y=()=>r.get("/profile").then((e=>e.data)),j=e=>r.put("/profile",e,{headers:{"Content-Type":"multipart/form-data"}}).then((e=>e.data)),b=e=>r.post("/ai/chat",{prompt:e}).then((e=>({success:!0,data:e.data}))),N=function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return r.post("/ai/chat-conversation",{message:e,conversationHistory:a})}}}]);
//# sourceMappingURL=28.5d3b9dfa.chunk.js.map