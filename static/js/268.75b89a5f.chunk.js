"use strict";(self.webpackChunktask_manager_frontend=self.webpackChunktask_manager_frontend||[]).push([[268],{268:(e,s,r)=>{r.r(s),r.d(s,{default:()=>i});var a=r(555),o=r(43),t=r(216),n=r(505),c=(r(210),r(347),r(729)),l=r(579);const i=()=>{const[e,s]=(0,o.useState)({currentPassword:"",newPassword:"",confirmNewPassword:""}),[r,i]=(0,o.useState)(""),[d,m]=(0,o.useState)(""),w=(0,t.Zp)(),{logout:u}=(0,c.A)(),p=r=>{const{name:o,value:t}=r.target;s((0,a.A)((0,a.A)({},e),{},{[o]:t}))};return(0,l.jsx)("div",{className:"profile-container",children:(0,l.jsxs)("div",{className:"profile-card shadow rounded",children:[(0,l.jsx)("h2",{className:"profile-title text-center mb-4 bold-text",children:"Change Password"}),d&&(0,l.jsx)("p",{className:"text-success text-center",children:d}),r&&(0,l.jsx)("p",{className:"text-danger text-center",children:r}),(0,l.jsxs)("form",{onSubmit:async s=>{s.preventDefault();const{currentPassword:r,newPassword:a,confirmNewPassword:o}=e;if(r&&a&&o)if(a===o)try{await(0,n.ec)(r,a),m("Password changed successfully!"),i(""),setTimeout((()=>w("/profile-overview")),2e3)}catch(d){var t,c,l;console.error("Password change error:",(null===(t=d.response)||void 0===t?void 0:t.data)||d.message),i((null===(c=d.response)||void 0===c||null===(l=c.data)||void 0===l?void 0:l.message)||"Failed to change password. Please try again."),m(""),d&&403===d.status&&(u(),w("/login"))}else i("Passwords do not match.");else i("All fields are required.")},children:[(0,l.jsxs)("div",{className:"form-group mb-3",children:[(0,l.jsx)("label",{htmlFor:"currentPassword",className:"form-label",children:"Current Password"}),(0,l.jsx)("input",{type:"password",className:"form-control",id:"currentPassword",name:"currentPassword",value:e.currentPassword,onChange:p,required:!0})]}),(0,l.jsxs)("div",{className:"form-group mb-3",children:[(0,l.jsx)("label",{htmlFor:"newPassword",className:"form-label",children:"New Password"}),(0,l.jsx)("input",{type:"password",className:"form-control",id:"newPassword",name:"newPassword",value:e.newPassword,onChange:p,required:!0})]}),(0,l.jsxs)("div",{className:"form-group mb-3",children:[(0,l.jsx)("label",{htmlFor:"confirmNewPassword",className:"form-label",children:"Confirm New Password"}),(0,l.jsx)("input",{type:"password",className:"form-control",id:"confirmNewPassword",name:"confirmNewPassword",value:e.confirmNewPassword,onChange:p,required:!0})]}),(0,l.jsxs)("div",{className:"row mt-4",children:[(0,l.jsx)("div",{className:"col-12 col-md-6 mb-2 mb-md-0",children:(0,l.jsx)("button",{type:"button",className:"btn btn-secondary w-100",onClick:()=>w("/profile-overview"),children:"Cancel"})}),(0,l.jsx)("div",{className:"col-12 col-md-6",children:(0,l.jsx)("button",{type:"submit",className:"btn btn-dark w-100",children:"Save Changes"})})]})]})]})})}},505:(e,s,r)=>{r.d(s,{A7:()=>w,DY:()=>m,E$:()=>g,J2:()=>u,Lx:()=>i,U0:()=>p,UT:()=>t,XL:()=>d,ec:()=>f,j:()=>o,lC:()=>n,r7:()=>v,vF:()=>l,vq:()=>c,xw:()=>h});const a=r(722).A.create({baseURL:"https://task-manager-sigma-ashen.vercel.app/api",headers:{"ngrok-skip-browser-warning":"true"}});a.interceptors.request.use((e=>{const s=localStorage.getItem("token");return s&&(e.headers.Authorization="Bearer ".concat(s)),e}),(e=>Promise.reject(e)));const o=()=>a.get("/tasks"),t=e=>a.post("/tasks",e),n=(e,s)=>a.put("/tasks/".concat(e),s),c=e=>a.delete("/tasks/".concat(e)),l=(e,s)=>a.put("/tasks/".concat(e,"/priority"),{priority:s}),i=(e,s)=>a.post("/auth/login",{email:e,password:s}),d=async e=>a.post("/auth/google",{code:e}),m=(e,s,r,o)=>a.post("/auth/register",{firstName:e,lastName:s,email:r,password:o}),w=(e,s)=>a.post("/auth/verify-registration",{email:e,verificationCode:s}),u=e=>a.post("/auth/resend-verification",{email:e}),p=e=>a.post("/auth/forgot-password",{email:e}),h=(e,s,r)=>a.post("/auth/verify-code",{email:e,verificationCode:s,newPassword:r}),f=(e,s)=>a.post("/auth/change-password",{currentPassword:e,newPassword:s}),g=async()=>{try{return(await a.get("/profile")).data}catch(e){throw console.error("Error fetching profile:",e),e}},v=async e=>{try{return(await a.put("/profile",e,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(s){throw console.error("Error updating profile:",s),s}}},347:()=>{},210:()=>{}}]);
//# sourceMappingURL=268.75b89a5f.chunk.js.map