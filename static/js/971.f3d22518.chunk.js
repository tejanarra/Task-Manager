"use strict";(self.webpackChunktask_manager_frontend=self.webpackChunktask_manager_frontend||[]).push([[971],{658:()=>{},2891:()=>{},4505:(e,s,r)=>{r.d(s,{A7:()=>w,DY:()=>p,E$:()=>x,J2:()=>h,Lx:()=>m,Pr:()=>N,U0:()=>f,UT:()=>c,XL:()=>u,ec:()=>v,gQ:()=>y,iV:()=>n,j:()=>o,lC:()=>i,r7:()=>P,vF:()=>l,vq:()=>d,xw:()=>g});const a=r(9722).A.create({baseURL:"https://task-manager-sigma-ashen.vercel.app/api",headers:{"ngrok-skip-browser-warning":"true"},timeout:3e4});a.interceptors.request.use(e=>{const s=localStorage.getItem("token");s&&(e.headers.Authorization="Bearer ".concat(s));try{const s=Intl.DateTimeFormat().resolvedOptions().timeZone;s&&(e.headers["x-user-timezone"]=s)}catch(r){console.warn("Could not detect user timezone:",r)}return e},e=>Promise.reject(e));const t=e=>{var s;return e.response?{message:(null===(s=e.response.data)||void 0===s?void 0:s.error)||"An error occurred",status:e.response.status}:e.request?{message:"No response from server. Please check your connection.",status:0}:{message:e.message||"An unexpected error occurred",status:-1}},o=()=>a.get("/tasks"),n=e=>a.get("/tasks/".concat(e)),c=e=>a.post("/tasks",e),i=(e,s)=>a.put("/tasks/".concat(e),s),d=e=>a.delete("/tasks/".concat(e)),l=(e,s)=>a.put("/tasks/".concat(e,"/priority"),{priority:s}),m=(e,s)=>a.post("/auth/login",{email:e,password:s}),u=async e=>a.post("/auth/google",{code:e}),p=(e,s,r,t)=>a.post("/auth/register",{firstName:e,lastName:s,email:r,password:t}),w=(e,s)=>a.post("/auth/verify-registration",{email:e,verificationCode:s}),h=e=>a.post("/auth/resend-verification",{email:e}),f=e=>a.post("/auth/forgot-password",{email:e}),g=(e,s,r)=>a.post("/auth/verify-code",{email:e,verificationCode:s,newPassword:r}),v=(e,s)=>a.post("/auth/change-password",{currentPassword:e,newPassword:s}),x=async()=>{try{return(await a.get("/profile")).data}catch(e){throw console.error("Error fetching profile:",e),e}},P=async e=>{try{return(await a.put("/profile",e,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(s){throw console.error("Error updating profile:",s),s}},N=async e=>{try{const s=Intl.DateTimeFormat().resolvedOptions().timeZone;return{success:!0,data:(await a.post("/ai/chat",{prompt:e},{headers:{"x-user-timezone":s}})).data}}catch(s){return{success:!1,error:t(s).message}}},y=async function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];try{const r=Intl.DateTimeFormat().resolvedOptions().timeZone;return{success:!0,data:(await a.post("/ai/chat-conversation",{message:e,conversationHistory:s},{headers:{"x-user-timezone":r}})).data}}catch(r){return{success:!1,error:t(r).message}}}},4971:(e,s,r)=>{r.r(s),r.d(s,{default:()=>d});var a=r(2555),t=r(5043),o=r(3216),n=r(4505),c=(r(658),r(2891),r(8729)),i=r(579);const d=()=>{const[e,s]=(0,t.useState)({currentPassword:"",newPassword:"",confirmNewPassword:""}),[r,d]=(0,t.useState)(""),[l,m]=(0,t.useState)(""),u=(0,o.Zp)(),{logout:p}=(0,c.A)(),w=r=>{const{name:t,value:o}=r.target;s((0,a.A)((0,a.A)({},e),{},{[t]:o}))};return(0,i.jsx)("div",{className:"profile-container",children:(0,i.jsxs)("div",{className:"profile-card shadow rounded",children:[(0,i.jsx)("h2",{className:"profile-title text-center mb-4 bold-text",children:"Change Password"}),l&&(0,i.jsx)("p",{className:"text-success text-center",children:l}),r&&(0,i.jsx)("p",{className:"text-danger text-center",children:r}),(0,i.jsxs)("form",{onSubmit:async s=>{s.preventDefault();const{currentPassword:r,newPassword:a,confirmNewPassword:t}=e;if(r&&a&&t)if(a===t)try{await(0,n.ec)(r,a),m("Password changed successfully!"),d(""),setTimeout(()=>u("/profile-overview"),2e3)}catch(l){var o,c,i;console.error("Password change error:",(null===(o=l.response)||void 0===o?void 0:o.data)||l.message),d((null===(c=l.response)||void 0===c||null===(i=c.data)||void 0===i?void 0:i.message)||"Failed to change password. Please try again."),m(""),l&&403===l.status&&(p(),u("/login"))}else d("Passwords do not match.");else d("All fields are required.")},children:[(0,i.jsxs)("div",{className:"form-group mb-3",children:[(0,i.jsx)("label",{htmlFor:"currentPassword",className:"form-label",children:"Current Password"}),(0,i.jsx)("input",{type:"password",className:"form-control",id:"currentPassword",name:"currentPassword",value:e.currentPassword,onChange:w,required:!0})]}),(0,i.jsxs)("div",{className:"form-group mb-3",children:[(0,i.jsx)("label",{htmlFor:"newPassword",className:"form-label",children:"New Password"}),(0,i.jsx)("input",{type:"password",className:"form-control",id:"newPassword",name:"newPassword",value:e.newPassword,onChange:w,required:!0})]}),(0,i.jsxs)("div",{className:"form-group mb-3",children:[(0,i.jsx)("label",{htmlFor:"confirmNewPassword",className:"form-label",children:"Confirm New Password"}),(0,i.jsx)("input",{type:"password",className:"form-control",id:"confirmNewPassword",name:"confirmNewPassword",value:e.confirmNewPassword,onChange:w,required:!0})]}),(0,i.jsxs)("div",{className:"row mt-4",children:[(0,i.jsx)("div",{className:"col-12 col-md-6 mb-2 mb-md-0",children:(0,i.jsx)("button",{type:"button",className:"btn btn-secondary w-100",onClick:()=>u("/profile-overview"),children:"Cancel"})}),(0,i.jsx)("div",{className:"col-12 col-md-6",children:(0,i.jsx)("button",{type:"submit",className:"btn btn-dark w-100",children:"Save Changes"})})]})]})]})})}}}]);
//# sourceMappingURL=971.f3d22518.chunk.js.map