"use strict";(self.webpackChunktask_manager_frontend=self.webpackChunktask_manager_frontend||[]).push([[615],{869:(e,s,a)=>{a.d(s,{A:()=>r});a(43),a(421);var t=a(579);const r=e=>{let{theme:s,show:a,title:r="Confirm Action",message:n="Are you sure you want to proceed?",onConfirm:i,onCancel:l}=e;return a?(0,t.jsx)("div",{className:"custom-modal-overlay d-flex align-items-center justify-content-center",tabIndex:"-1",role:"dialog",onClick:l,children:(0,t.jsxs)("div",{className:"custom-modal-content",role:"document",onClick:e=>e.stopPropagation(),children:[(0,t.jsxs)("div",{className:"custom-modal-header",children:[(0,t.jsx)("h5",{className:"modal2-title fw-bold",children:r}),(0,t.jsx)("button",{type:"button",className:"btn-close","aria-label":"Close",onClick:l})]}),(0,t.jsx)("div",{className:"custom-modal-body",children:(0,t.jsx)("p",{className:"text-".concat("dark"===s?"light":"muted"," mb-4"),children:n})}),(0,t.jsxs)("div",{className:"custom-modal-footer d-flex justify-content-end gap-2",children:[(0,t.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:l,children:"Cancel"}),(0,t.jsx)("button",{type:"button",className:"btn sign-in-btn",onClick:i,children:"Confirm"})]})]})}):null}},615:(e,s,a)=>{a.r(s),a.d(s,{default:()=>h});var t=a(555),r=a(43),n=a(216),i=a(505),l=a(433),o=a(869),c=a(291),d=a(579);const m=[{value:1,label:"1 hr"},{value:24,label:"1 day"},{value:168,label:"1 week"}];function u(e){return e<1?"".concat(Math.round(60*e)," min"):Number.isInteger(e)?"".concat(e," hr").concat(e>1?"s":""):"".concat(e," hrs")}const h=e=>{let{theme:s}=e;const a=(0,n.Zp)(),{taskId:h}=(0,n.g)(),p="new"===h,[b,f]=(0,r.useState)(""),[g,x]=(0,r.useState)(""),[v,y]=(0,r.useState)("not-started"),[j,N]=(0,r.useState)(null),[k,w]=(0,r.useState)([]),[C,M]=(0,r.useState)(!1),[S,D]=(0,r.useState)(!1),[A,T]=(0,r.useState)(null);(0,r.useEffect)((()=>{(async()=>{if(!p)try{M(!0);const e=(await(0,i.iV)(h)).data;e?(f(e.title),x(e.description),y(e.status),N(e.deadline||null),w(Array.isArray(e.reminders)?e.reminders:[])):(T("Task not found"),setTimeout((()=>a("/tasks")),2e3))}catch(e){console.error("Error loading task:",e),T("Failed to load task")}finally{M(!1)}})()}),[h,p,a]),(0,r.useEffect)((()=>{var e;const s=null===(e=window.history.state)||void 0===e?void 0:e.usr;if(null!==s&&void 0!==s&&s.task){const e=s.task;f(e.title||""),x(e.description||""),y(e.status||"not-started"),N(e.deadline||null),w(Array.isArray(e.reminders)?e.reminders:[])}}),[]);const B=()=>{a("/tasks")},E=()=>{switch(v){case"completed":return"#007a00";case"in-progress":return"#daa520";default:return"#a00000"}},F=j&&new Date(j)>new Date;return C&&!p?(0,d.jsx)("div",{className:"container mt-5",children:(0,d.jsxs)("div",{className:"task-editor-container",style:{position:"relative"},children:[(0,d.jsx)("div",{className:"editor-spine"}),(0,d.jsxs)("div",{className:"loading-state",children:[(0,d.jsx)("div",{className:"spinner-border",role:"status",children:(0,d.jsx)("span",{className:"visually-hidden",children:"Loading..."})}),(0,d.jsx)("p",{children:"Loading task..."})]})]})}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:"container mt-5",children:(0,d.jsxs)("div",{className:"task-editor-container ".concat("dark"===s?"dark":""),style:{position:"relative"},children:[(0,d.jsx)("div",{className:"editor-spine",style:{backgroundColor:E()}}),(0,d.jsxs)("div",{className:"editor-header",children:[(0,d.jsx)("button",{className:"back-button",onClick:B,disabled:C,"aria-label":"Go back to tasks",children:(0,d.jsx)("i",{className:"bi bi-arrow-left"})}),(0,d.jsx)("h2",{children:p?"Create New Task":"Edit Task"}),(0,d.jsx)("i",{className:"bi ".concat("completed"===v?"bi-check-circle-fill":"in-progress"===v?"bi-hourglass-split":"bi-circle"," status-icon-header"),style:{color:E()}})]}),A&&(0,d.jsxs)("div",{className:"alert alert-danger",role:"alert",children:[(0,d.jsx)("i",{className:"bi bi-exclamation-triangle me-2"}),A]}),(0,d.jsxs)("div",{className:"editor-form",children:[(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsxs)("label",{className:"form-label",children:[(0,d.jsx)("i",{className:"bi bi-pencil-square me-1"}),"Title ",(0,d.jsx)("span",{className:"required",children:"*"})]}),(0,d.jsx)("input",{type:"text",className:"form-control",value:b,onChange:e=>f(e.target.value),placeholder:"Enter task title...",disabled:C})]}),(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsxs)("label",{className:"form-label",children:[(0,d.jsx)("i",{className:"bi bi-text-paragraph me-1"}),"Description ",(0,d.jsx)("span",{className:"required",children:"*"})]}),(0,d.jsx)("textarea",{className:"form-control",rows:5,value:g,onChange:e=>x(e.target.value),placeholder:"Enter task description...",disabled:C})]}),(0,d.jsxs)("div",{className:"form-row",children:[(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsxs)("label",{className:"form-label",children:[(0,d.jsx)("i",{className:"bi bi-flag me-1"}),"Status"]}),(0,d.jsxs)("select",{className:"form-select",value:v,onChange:e=>y(e.target.value),disabled:C,style:{color:E()},children:[(0,d.jsx)("option",{value:"not-started",children:"Not Started"}),(0,d.jsx)("option",{value:"in-progress",children:"In Progress"}),(0,d.jsx)("option",{value:"completed",children:"Completed"})]})]}),(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsxs)("label",{className:"form-label",children:[(0,d.jsx)("i",{className:"bi bi-calendar-event me-1"}),"Deadline"]}),(0,d.jsx)("input",{type:"datetime-local",className:"form-control",value:j?(0,c.wM)(j):"",onChange:e=>N(e.target.value),disabled:C})]})]}),F&&(0,d.jsxs)("div",{className:"form-group reminders-section",children:[(0,d.jsxs)("label",{className:"form-label",children:[(0,d.jsx)("i",{className:"bi bi-clock-history me-1"}),"Reminders"]}),(0,d.jsx)(l.A,{tempDeadline:j,tempReminders:k,setTempReminders:w,theme:s,ALL_INTERVALS:m,formatHoursLabel:u})]})]}),(0,d.jsxs)("div",{className:"editor-actions",children:[!p&&(0,d.jsxs)("button",{className:"btn btn-danger",onClick:()=>D(!0),disabled:C,children:[(0,d.jsx)("i",{className:"bi bi-trash me-2"}),"Delete Task"]}),(0,d.jsxs)("div",{className:"action-group",children:[(0,d.jsx)("button",{className:"btn btn-secondary",onClick:B,disabled:C,children:"Cancel"}),(0,d.jsx)("button",{className:"btn btn-primary",onClick:async()=>{if(!b.trim()||!g.trim())return void T("Title and description are required");M(!0),T(null);const e=new Date,s=j?new Date(j):null,r=s&&s>e?(s-e)/36e5:0,n=r>0?(e=>{const s=e.some((e=>"daily"===e.type)),a=e.some((e=>"weekly"===e.type));let t=e.filter((e=>("one-time"===e.type||!e.type)&&e.remindBefore<=r));if(s&&r>0){const e=Math.floor(r/24);for(let s=1;s<=e;s++)t.push({remindBefore:24*s,sent:!1,type:"daily",dayNumber:s})}if(a&&r>0){const e=Math.floor(r/168);for(let s=1;s<=e;s++)t.push({remindBefore:24*s*7,sent:!1,type:"weekly",weekNumber:s})}return t})(k):[],l={title:b.trim(),description:g.trim(),status:v,deadline:j?s.toISOString():null,reminders:n};try{p?await(0,i.UT)((0,t.A)((0,t.A)({},l),{},{priority:1})):await(0,i.lC)(h,l),a("/tasks")}catch(A){console.error("Error saving task:",A),T("Failed to save task. Please try again.")}finally{M(!1)}},disabled:!b.trim()||!g.trim()||C,children:C?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("span",{className:"spinner-border spinner-border-sm me-2"}),"Saving..."]}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("i",{className:"bi bi-check-lg me-2"}),p?"Create Task":"Save Changes"]})})]})]})]})}),(0,d.jsx)(o.A,{theme:s,show:S,title:"Delete Task",message:"Are you sure you want to delete this task? This action cannot be undone.",onConfirm:async()=>{M(!0);try{await(0,i.vq)(h),a("/tasks")}catch(A){console.error("Error deleting task:",A),T("Failed to delete task"),M(!1),D(!1)}},onCancel:()=>D(!1)})]})}},433:(e,s,a)=>{a.d(s,{A:()=>o});var t=a(43),r=a(579);const n=e=>{let{value:s,label:a,checked:t,onChange:n,className:i="",disabled:l=!1}=e;return(0,r.jsx)("div",{className:"d-inline-block ".concat(i),children:(0,r.jsxs)("label",{className:"reminder-checkbox-label d-inline-flex align-items-center ".concat(l?"disabled":""),children:[(0,r.jsx)("input",{type:"checkbox",className:"form-check-input me-2",checked:t,onChange:e=>!l&&n(e.target.checked),disabled:l,"aria-label":"Set reminder for ".concat(a),"aria-describedby":"reminder-".concat(s,"-desc")}),(0,r.jsx)("span",{id:"reminder-".concat(s,"-desc"),children:a})]})})};var i=a(291);const l=e=>{if(e<1)return"".concat(Math.round(60*e)," min");if(e<24)return"".concat(e%1===0?e:e.toFixed(1)," hr").concat(1!==e?"s":"");const s=e/24;if(s<7)return"".concat(s%1===0?s:s.toFixed(1)," day").concat(1!==s?"s":"");const a=s/7;return"".concat(a%1===0?a:a.toFixed(1)," week").concat(1!==a?"s":"")},o=e=>{let{tempDeadline:s,tempReminders:a,setTempReminders:o,theme:c,ALL_INTERVALS:d}=e;const[m,u]=(0,t.useState)(""),[h,p]=(0,t.useState)(!1),b=new Date,f=s?new Date(s):null,g=f&&f>b?(f-b)/36e5:0,x=e=>!e.type||"one-time"===e.type,v=a.some((e=>"daily"===e.type)),y=a.some((e=>"weekly"===e.type)),j=d.filter((e=>e.value<=g)),N=a.filter((e=>{if(!x(e))return!1;if(e.remindBefore>g)return!1;return!d.some((s=>Math.abs(s.value-e.remindBefore)<.01))})).map((e=>{if(e.customDate)try{const s=new Date(e.customDate);return{value:e.remindBefore,label:s.toLocaleString(),customDate:e.customDate}}catch(s){console.warn("Error formatting customDate:",s)}if(f){const s=new Date(f.getTime()-36e5*e.remindBefore);return{value:e.remindBefore,label:s.toLocaleString()}}return{value:e.remindBefore,label:l(e.remindBefore)}})),k=(e,s)=>{o((a=>{if(s){return a.find((s=>x(s)&&Math.abs(s.remindBefore-e)<.01))?a:[...a,{remindBefore:e,sent:!1,type:"one-time"}]}return a.filter((s=>!x(s)||Math.abs(s.remindBefore-e)>=.01))}))},w=Math.floor(g/24),C=Math.floor(g/168);return(0,r.jsxs)("div",{className:"task-reminders-container",children:[(0,r.jsx)("div",{className:"reminders-dropdown",onClick:()=>p(!h),children:(0,r.jsxs)("div",{className:"reminders-dropdown-header",children:[(0,r.jsxs)("h6",{children:[(0,r.jsx)("i",{className:"bi bi-clock"})," Reminders",a.length>0&&(0,r.jsx)("span",{className:"reminder-count-badge",children:a.length})]}),h?(0,r.jsx)("i",{className:"bi bi-chevron-up"}):(0,r.jsx)("i",{className:"bi bi-chevron-down"})]})}),h&&(0,r.jsxs)("div",{className:"reminders-dropdown-content",children:[(w>0||C>0)&&(0,r.jsxs)("div",{className:"recurring-reminders-section",children:[(0,r.jsxs)("label",{className:"reminder-section-label",children:[(0,r.jsx)("i",{className:"bi bi-arrow-repeat"})," Recurring Reminders:"]}),(0,r.jsxs)("div",{className:"recurring-options",children:[w>0&&(0,r.jsxs)("div",{className:"recurring-option",children:[(0,r.jsx)("input",{type:"checkbox",checked:v,onChange:e=>{return s=e.target.checked,void o((e=>s?[...e.filter((e=>"daily"!==e.type)),{remindBefore:24,sent:!1,type:"daily"}]:e.filter((e=>"daily"!==e.type))));var s},id:"daily-reminders"}),(0,r.jsxs)("label",{htmlFor:"daily-reminders",children:["Every Day (up to ",w," reminder",1!==w?"s":"",")"]})]}),C>0&&(0,r.jsxs)("div",{className:"recurring-option",children:[(0,r.jsx)("input",{type:"checkbox",checked:y,onChange:e=>{return s=e.target.checked,void o((e=>s?[...e.filter((e=>"weekly"!==e.type)),{remindBefore:168,sent:!1,type:"weekly"}]:e.filter((e=>"weekly"!==e.type))));var s},id:"weekly-reminders"}),(0,r.jsxs)("label",{htmlFor:"weekly-reminders",children:["Every Week (up to ",C," reminder",1!==C?"s":"",")"]})]})]})]}),j.length>0&&(0,r.jsxs)("div",{className:"reminder-section",children:[(0,r.jsxs)("label",{className:"reminder-section-label",children:[(0,r.jsx)("i",{className:"bi bi-bell"})," One-time Reminders:"]}),(0,r.jsx)("div",{className:"reminder-grid",children:j.map((e=>{const s=!!a.find((s=>x(s)&&Math.abs(s.remindBefore-e.value)<.01));return(0,r.jsx)(n,{value:e.value,label:e.label,checked:s,onChange:s=>k(e.value,s)},e.value)}))})]}),(0,r.jsxs)("div",{className:"custom-reminder-section",children:[(0,r.jsxs)("label",{className:"reminder-section-label",children:[(0,r.jsx)("i",{className:"bi bi-calendar-plus"})," Add Custom Reminder:"]}),(0,r.jsxs)("div",{className:"custom-reminder-input-group",children:[(0,r.jsx)("input",{type:"datetime-local",value:m,onChange:e=>u(e.target.value),min:(0,i.wM)(b.toISOString()),max:s?(0,i.wM)(s):void 0}),(0,r.jsxs)("button",{className:"btn btn-sm ".concat("dark"===c?"btn-outline-light":"btn-outline-dark"),onClick:()=>{if(!m)return;const e=new Date(m);if(isNaN(e.getTime()))return void console.warn("Invalid date selected");if(!f||e>=f)return void console.warn("Custom reminder must be before deadline");if(e<=b)return void console.warn("Custom reminder must be in the future");const s=(f-e)/36e5;s>0&&s<=g&&(o((a=>a.some((e=>x(e)&&Math.abs(e.remindBefore-s)<.01))?a:[...a,{remindBefore:s,sent:!1,type:"one-time",customDate:e.toISOString()}])),u(""))},disabled:!m,children:[(0,r.jsx)("i",{className:"bi bi-plus-lg"})," Add"]})]})]}),N.length>0&&(0,r.jsxs)("div",{className:"reminder-section",children:[(0,r.jsxs)("label",{className:"reminder-section-label",children:[(0,r.jsx)("i",{className:"bi bi-calendar-check"})," Custom One-time Reminders:"]}),(0,r.jsx)("div",{className:"reminder-grid",children:N.map(((e,s)=>{const t=!!a.find((s=>x(s)&&Math.abs(s.remindBefore-e.value)<.01));return(0,r.jsx)(n,{value:e.value,label:e.label,checked:t,onChange:s=>k(e.value,s)},e.customDate||"".concat(e.value,"-").concat(s))}))})]}),a.length>0&&(0,r.jsx)("div",{className:"active-reminders-summary",children:(0,r.jsxs)("small",{children:[(0,r.jsx)("i",{className:"bi bi-info-circle"})," ",(0,r.jsx)("strong",{children:"Active:"}),v&&" Daily",v&&y&&",",y&&" Weekly",(v||y)&&a.filter(x).length>0&&",",a.filter(x).length>0&&" ".concat(a.filter(x).length," one-time")]})})]})]})}},505:(e,s,a)=>{a.d(s,{A7:()=>p,DY:()=>h,E$:()=>v,J2:()=>b,Lx:()=>m,Pr:()=>j,U0:()=>f,UT:()=>l,XL:()=>u,ec:()=>x,gQ:()=>N,iV:()=>i,j:()=>n,lC:()=>o,r7:()=>y,vF:()=>d,vq:()=>c,xw:()=>g});const t=a(722).A.create({baseURL:"https://task-manager-sigma-ashen.vercel.app/api",headers:{"ngrok-skip-browser-warning":"true"},timeout:3e4});t.interceptors.request.use((e=>{const s=localStorage.getItem("token");return s&&(e.headers.Authorization="Bearer ".concat(s)),e}),(e=>Promise.reject(e)));const r=e=>{var s;return e.response?{message:(null===(s=e.response.data)||void 0===s?void 0:s.error)||"An error occurred",status:e.response.status}:e.request?{message:"No response from server. Please check your connection.",status:0}:{message:e.message||"An unexpected error occurred",status:-1}},n=()=>t.get("/tasks"),i=e=>t.get("/tasks/".concat(e)),l=e=>t.post("/tasks",e),o=(e,s)=>t.put("/tasks/".concat(e),s),c=e=>t.delete("/tasks/".concat(e)),d=(e,s)=>t.put("/tasks/".concat(e,"/priority"),{priority:s}),m=(e,s)=>t.post("/auth/login",{email:e,password:s}),u=async e=>t.post("/auth/google",{code:e}),h=(e,s,a,r)=>t.post("/auth/register",{firstName:e,lastName:s,email:a,password:r}),p=(e,s)=>t.post("/auth/verify-registration",{email:e,verificationCode:s}),b=e=>t.post("/auth/resend-verification",{email:e}),f=e=>t.post("/auth/forgot-password",{email:e}),g=(e,s,a)=>t.post("/auth/verify-code",{email:e,verificationCode:s,newPassword:a}),x=(e,s)=>t.post("/auth/change-password",{currentPassword:e,newPassword:s}),v=async()=>{try{return(await t.get("/profile")).data}catch(e){throw console.error("Error fetching profile:",e),e}},y=async e=>{try{return(await t.put("/profile",e,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(s){throw console.error("Error updating profile:",s),s}},j=async e=>{try{const s=Intl.DateTimeFormat().resolvedOptions().timeZone;return{success:!0,data:(await t.post("/ai/chat",{prompt:e},{headers:{"x-user-timezone":s}})).data}}catch(s){return{success:!1,error:r(s).message}}},N=async function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];try{const a=Intl.DateTimeFormat().resolvedOptions().timeZone;return{success:!0,data:(await t.post("/ai/chat-conversation",{message:e,conversationHistory:s},{headers:{"x-user-timezone":a}})).data}}catch(a){return{success:!1,error:r(a).message}}}},291:(e,s,a)=>{a.d(s,{Ic:()=>n,fw:()=>r,wM:()=>i});var t=a(535);const r=e=>{const s=new Date(e),a=new Date,r=Math.floor((a-s)/1e3);if(r<0){const e=Math.abs(r);return e<60?"Just now":e<60?"in ".concat(e," second").concat(1!==e?"s":""):e<3600?"in ".concat(Math.ceil(e/60)," minute").concat(1!==Math.ceil(e/60)?"s":""):e<86400?"in ".concat(Math.ceil(e/3600)," hour").concat(1!==Math.ceil(e/3600)?"s":""):e<604800?"in ".concat(Math.ceil(e/86400)," day").concat(1!==Math.ceil(e/86400)?"s":""):(0,t.GP)(s,"MMM dd, yyyy")}if(r<60)return"Just now";if(r<60)return"".concat(r," second").concat(1!==r?"s":""," ago");if(r<3600)return"".concat(Math.floor(r/60)," minute").concat(1!==Math.floor(r/60)?"s":""," ago");if(r<86400)return"".concat(Math.floor(r/3600)," hour").concat(1!==Math.floor(r/3600)?"s":""," ago");if(r<604800){const e=Math.floor(r/86400);return 1===e?"Yesterday":"".concat(e," days ago")}return(0,t.GP)(s,"MMM dd, yyyy")},n=e=>{const[s,a,t]=e.split("-").map(Number),r=new Date(s,a-1,t);if(isNaN(r))return"Invalid Date";return r.toLocaleString("en-US",{year:"numeric",month:"long",day:"numeric"})},i=e=>{const s=new Date(e),a=s.getFullYear(),t=String(s.getMonth()+1).padStart(2,"0"),r=String(s.getDate()).padStart(2,"0"),n=String(s.getHours()).padStart(2,"0"),i=String(s.getMinutes()).padStart(2,"0");return"".concat(a,"-").concat(t,"-").concat(r,"T").concat(n,":").concat(i)}}}]);
//# sourceMappingURL=615.9e33e5ce.chunk.js.map