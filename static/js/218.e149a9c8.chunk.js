"use strict";(self.webpackChunktask_manager_frontend=self.webpackChunktask_manager_frontend||[]).push([[218],{869:(e,t,a)=>{a.d(t,{A:()=>r});a(43),a(421);var s=a(579);const r=e=>{let{theme:t,show:a,title:r="Confirm Action",message:n="Are you sure you want to proceed?",onConfirm:i,onCancel:l}=e;return a?(0,s.jsx)("div",{className:"custom-modal-overlay d-flex align-items-center justify-content-center",tabIndex:"-1",role:"dialog",onClick:l,children:(0,s.jsxs)("div",{className:"custom-modal-content",role:"document",onClick:e=>e.stopPropagation(),children:[(0,s.jsxs)("div",{className:"custom-modal-header",children:[(0,s.jsx)("h5",{className:"modal2-title fw-bold",children:r}),(0,s.jsx)("button",{type:"button",className:"btn-close","aria-label":"Close",onClick:l})]}),(0,s.jsx)("div",{className:"custom-modal-body",children:(0,s.jsx)("p",{className:"text-".concat("dark"===t?"light":"muted"," mb-4"),children:n})}),(0,s.jsxs)("div",{className:"custom-modal-footer d-flex justify-content-end gap-2",children:[(0,s.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:l,children:"Cancel"}),(0,s.jsx)("button",{type:"button",className:"btn sign-in-btn",onClick:i,children:"Confirm"})]})]})}):null}},218:(e,t,a)=>{a.r(t),a.d(t,{default:()=>g});var s=a(555),r=a(43),n=a(505),i=a(729),l=(a(421),a(869)),c=a(579);const o=e=>{let{value:t,label:a,checked:s,onChange:r,className:n="",disabled:i=!1}=e;return(0,c.jsx)("div",{className:"d-inline-block ".concat(n),children:(0,c.jsxs)("label",{className:"reminder-checkbox-label d-inline-flex align-items-center ".concat(i?"disabled":""),children:[(0,c.jsx)("input",{type:"checkbox",className:"form-check-input me-2",checked:s,onChange:e=>!i&&r(e.target.checked),disabled:i,"aria-label":"Set reminder for ".concat(a),"aria-describedby":"reminder-".concat(t,"-desc")}),(0,c.jsx)("span",{id:"reminder-".concat(t,"-desc"),children:a})]})})};var d=a(291);const m=e=>{let{tempDeadline:t,tempReminders:a,setTempReminders:n,theme:i,ALL_INTERVALS:l,formatHoursLabel:m}=e;const u=new Date,h=t?new Date(t):null,p=h&&h>u?(h-u)/36e5:0,f=a.some((e=>"daily"===e.type)),g=a.some((e=>"weekly"===e.type)),x=e=>{n((t=>{if(e){const e=t.filter((e=>"daily"!==e.type)),a=(()=>{const e=[],t=Math.floor(p/24);for(let a=1;a<=t;a++){const t=24*a;e.push({remindBefore:t,sent:!1,type:"daily",dayNumber:a})}return e})();return[...e,...a]}return t.filter((e=>"daily"!==e.type))}))},y=e=>{n((t=>{if(e){const e=t.filter((e=>"weekly"!==e.type)),a=(()=>{const e=[],t=Math.floor(p/168);for(let a=1;a<=t;a++){const t=24*a*7;e.push({remindBefore:t,sent:!1,type:"weekly",weekNumber:a})}return e})();return[...e,...a]}return t.filter((e=>"weekly"!==e.type))}))},b=l.filter((e=>e.value<=p)),k=a.filter((e=>!e.type&&!l.some((t=>Math.abs(t.value-e.remindBefore)<.01))&&e.remindBefore<=p)).map((e=>{if(e.customDate)return{value:e.remindBefore,label:new Date(e.customDate).toLocaleString()};if(e.remindBefore>168&&h){const t=new Date(h.getTime()-36e5*e.remindBefore);return{value:e.remindBefore,label:t.toLocaleString()}}return{value:e.remindBefore,label:m(e.remindBefore)}})),j=(e,t)=>{n((a=>{const r=a.find((t=>!t.type&&Math.abs(t.remindBefore-e)<.01));return t?r?a.map((t=>!t.type&&Math.abs(t.remindBefore-e)<.01?(0,s.A)((0,s.A)({},t),{},{sent:!1}):t)):[...a,{remindBefore:e,sent:!1}]:a.filter((t=>t.type||Math.abs(t.remindBefore-e)>=.01))}))},[v,N]=(0,r.useState)(""),[w,S]=(0,r.useState)(!1),C=Math.floor(p/24),A=Math.floor(p/168);return(0,c.jsxs)("div",{className:"task-reminders-container",children:[(0,c.jsx)("div",{className:"reminders-dropdown",onClick:()=>S(!w),children:(0,c.jsxs)("div",{className:"reminders-dropdown-header",children:[(0,c.jsx)("h6",{children:"Reminders"}),w?(0,c.jsx)("i",{className:"bi bi-chevron-up"}):(0,c.jsx)("i",{className:"bi bi-chevron-down"})]})}),w&&(0,c.jsxs)("div",{className:"reminders-dropdown-content",children:[(0,c.jsxs)("div",{className:"custom-reminder-section",children:[(0,c.jsx)("label",{className:"reminder-section-label",children:"Add Custom Reminder:"}),(0,c.jsxs)("div",{className:"custom-reminder-input-group",children:[(0,c.jsx)("input",{type:"datetime-local",value:v,onChange:e=>N(e.target.value),min:(0,d.wM)((new Date).toISOString()),max:t?(0,d.wM)(t):void 0}),(0,c.jsx)("button",{className:"btn btn-sm ".concat("dark"===i?"btn-outline-light":"btn-outline-dark"),onClick:()=>{if(!v)return;const e=new Date(v);if(isNaN(e))return;if(!h||e>=h)return;const t=(h-e)/36e5;t>0&&t<=p&&n((a=>a.some((e=>!e.type&&Math.abs(e.remindBefore-t)<.01))?a:[...a,{remindBefore:t,sent:!1,customDate:e.toISOString()}])),N("")},children:"Add"})]})]}),(C>0||A>0)&&(0,c.jsxs)("div",{className:"recurring-reminders-section",children:[(0,c.jsx)("label",{className:"reminder-section-label",children:"Recurring Reminders:"}),(0,c.jsxs)("div",{className:"recurring-options",children:[C>0&&(0,c.jsxs)("div",{className:"recurring-option",children:[(0,c.jsx)("input",{type:"checkbox",checked:f,onChange:e=>x(e.target.checked),id:"daily-reminders"}),(0,c.jsxs)("label",{htmlFor:"daily-reminders",children:["Every Day (",C," reminder",1!==C?"s":"",")"]})]}),A>0&&(0,c.jsxs)("div",{className:"recurring-option",children:[(0,c.jsx)("input",{type:"checkbox",checked:g,onChange:e=>y(e.target.checked),id:"weekly-reminders"}),(0,c.jsxs)("label",{htmlFor:"weekly-reminders",children:["Every Week (",A," reminder",1!==A?"s":"",")"]})]})]})]}),b.length>0&&(0,c.jsxs)("div",{className:"reminder-section",children:[(0,c.jsx)("label",{className:"reminder-section-label",children:"One-time Reminders:"}),(0,c.jsx)("div",{className:"reminder-grid",children:b.map((e=>{const t=a.find((t=>!t.type&&Math.abs(t.remindBefore-e.value)<.01)),s=!!t&&!t.sent;return(0,c.jsx)(o,{value:e.value,label:e.label,checked:s,onChange:t=>j(e.value,t)},e.value)}))})]}),k.length>0&&(0,c.jsxs)("div",{className:"reminder-section",children:[(0,c.jsx)("label",{className:"reminder-section-label",children:"Custom One-time Reminders:"}),(0,c.jsx)("div",{className:"reminder-grid",children:k.map((e=>{const t=a.find((t=>!t.type&&Math.abs(t.remindBefore-e.value)<.01)),s=!!t&&!t.sent;return(0,c.jsx)(o,{value:e.value,label:e.label,checked:s,onChange:t=>j(e.value,t)},e.value)}))})]}),(f||g)&&(0,c.jsx)("div",{className:"active-reminders-summary",children:(0,c.jsxs)("small",{children:[(0,c.jsx)("strong",{children:"Active recurring reminders:"}),f&&" Daily reminders (".concat(a.filter((e=>"daily"===e.type)).length," total)"),f&&g&&", ",g&&" Weekly reminders (".concat(a.filter((e=>"weekly"===e.type)).length," total)")]})})]})]})},u=[{value:1,label:"1 hr"},{value:24,label:"1 day"},{value:168,label:"1 week"}];function h(e){return e<1?"".concat(Math.round(60*e)," min"):Number.isInteger(e)?"".concat(e," hr").concat(e>1?"s":""):"".concat(e," hrs")}const p=e=>{let{theme:t,task:a,setTasks:i,isNewTask:o=!1,onSave:p=()=>{},onCancel:f=()=>{}}=e;const[g,x]=(0,r.useState)(o),[y,b]=(0,r.useState)(a.title),[k,j]=(0,r.useState)(a.description),[v,N]=(0,r.useState)(a.status),[w,S]=(0,r.useState)(a.deadline||null),[C,A]=(0,r.useState)(Array.isArray(a.reminders)?a.reminders:[]),[M,D]=(0,r.useState)(!1),[B,T]=(0,r.useState)(!1),E=(0,r.useRef)(null),L=(0,r.useCallback)((()=>{b(a.title),j(a.description),N(a.status),S(a.deadline||null),A(Array.isArray(a.reminders)?a.reminders:[]),o?f(a.id):x(!1)}),[a.title,a.description,a.status,a.deadline,a.reminders,o,f,a.id]);(0,r.useEffect)((()=>{const e=e=>{g&&E.current&&!E.current.contains(e.target)&&L()};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)}),[g,L]);const R=async()=>{if(!y.trim()||!k.trim())return;T(!0);if(!(y!==a.title||k!==a.description||v!==a.status||w!==a.deadline||JSON.stringify(C)!==JSON.stringify(a.reminders))&&!o)return x(!1),void T(!1);const e=new Date,t=w?new Date(w):null,r=t&&t>e?(t-e)/36e5:0;let l;l=r>0?(e=>{const t=e.some((e=>"daily"===e.type)),a=e.some((e=>"weekly"===e.type));let s=e.filter((e=>!e.type&&e.remindBefore<=r));if(t&&r>0){const e=Math.floor(r/24);for(let t=1;t<=e;t++){const e=24*t;s.push({remindBefore:e,sent:!1,type:"daily",dayNumber:t})}}if(a&&r>0){const e=Math.floor(r/168);for(let t=1;t<=e;t++){const e=24*t*7;s.push({remindBefore:e,sent:!1,type:"weekly",weekNumber:t})}}return s})(C):[];const c={title:y.trim(),description:k.trim(),status:v,deadline:w?t.toISOString():null,reminders:l};try{if(o)p((0,s.A)((0,s.A)({},a),c));else{const e=await(0,n.lC)(a.id,c);i((t=>t.map((t=>t.id===e.data.id?e.data:t)))),x(!1)}}catch(d){console.error("Error updating task:",d)}finally{T(!1)}},I=(e=>{switch(e){case"completed":return"#007a00";case"in-progress":return"#daa520";default:return"#a00000"}})(a.status),P=w&&new Date(w)>new Date,O=(()=>{if(!C||0===C.length)return null;const e=C.filter((e=>"daily"===e.type)).length,t=C.filter((e=>"weekly"===e.type)).length,a=C.filter((e=>!e.type)).length,s=[];return e>0&&s.push("Daily (".concat(e,")")),t>0&&s.push("Weekly (".concat(t,")")),a>0&&s.push("One-time (".concat(a,")")),s.length>0?s.join(", "):null})();return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("div",{ref:E,className:"task-card ".concat("dark"===t?"dark-mode":""," ").concat(B?"loading":""," ").concat(o?"new-task":""),onClick:()=>!g&&x(!0),children:[(0,c.jsx)("div",{className:"task-strip",style:{backgroundColor:I}}),(0,c.jsxs)("div",{className:"task-card-content",children:[!g&&(0,c.jsx)("i",{className:"bi ".concat("completed"===a.status?"bi-check-circle":"in-progress"===a.status?"bi-hourglass":"bi-ban"," status-icon"),style:{color:I}}),g?(0,c.jsxs)("div",{className:"task-form-grid",children:[(0,c.jsxs)("div",{className:"task-form-group full-width",children:[(0,c.jsx)("label",{className:"form-label",children:"Title"}),(0,c.jsx)("input",{type:"text",className:"form-control",value:y,onChange:e=>b(e.target.value),placeholder:"Enter task title..."})]}),(0,c.jsxs)("div",{className:"task-form-group full-width",children:[(0,c.jsx)("label",{className:"form-label",children:"Description"}),(0,c.jsx)("textarea",{className:"form-control",rows:3,value:k,onChange:e=>j(e.target.value),placeholder:"Enter task description..."})]}),(0,c.jsxs)("div",{className:"task-form-group",children:[(0,c.jsx)("label",{className:"form-label",children:"Status"}),(0,c.jsxs)("select",{className:"form-select",value:v,onChange:e=>N(e.target.value),children:[(0,c.jsx)("option",{value:"not-started",children:"Not Started"}),(0,c.jsx)("option",{value:"in-progress",children:"In Progress"}),(0,c.jsx)("option",{value:"completed",children:"Completed"})]})]}),(0,c.jsxs)("div",{className:"task-form-group",children:[(0,c.jsx)("label",{className:"form-label",children:"Deadline"}),(0,c.jsx)("input",{type:"datetime-local",className:"form-control",value:w?(0,d.wM)(w):"",onChange:e=>S(e.target.value)})]}),P&&(0,c.jsx)("div",{className:"task-form-group full-width",children:(0,c.jsx)(m,{tempDeadline:w,tempReminders:C,setTempReminders:A,theme:t,ALL_INTERVALS:u,formatHoursLabel:h})})]}):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("h5",{className:"task-title",style:{color:I},children:y}),(0,c.jsx)("p",{className:"task-description",children:k})]}),(0,c.jsxs)("div",{className:"task-metadata",children:[(0,c.jsxs)("div",{className:"task-metadata-item",children:[(0,c.jsx)("strong",{children:"Created"}),(0,c.jsx)("span",{children:(0,d.fw)(a.createdAt)})]}),(0,c.jsxs)("div",{className:"task-metadata-item",children:[(0,c.jsx)("strong",{children:"Deadline"}),(0,c.jsx)("span",{children:a.deadline?(0,d.fw)(a.deadline):"No deadline set"})]})]}),g&&(0,c.jsxs)("div",{className:"task-actions",children:[!o&&(0,c.jsx)("button",{className:"btn ".concat("dark"===t?"btn-outline-danger":"btn-secondary"),onClick:e=>{e.stopPropagation(),D(!0)},disabled:B,children:B?"Deleting...":"Delete"}),(0,c.jsx)("button",{className:"btn ".concat("dark"===t?"btn-outline-light":"btn-dark"),onClick:e=>{e.stopPropagation(),R()},disabled:!y.trim()||!k.trim()||B,children:B?"Saving...":"Save"})]}),!g&&O&&(0,c.jsxs)("div",{className:"reminder-indicator",title:"Reminders: ".concat(O),children:[(0,c.jsx)("i",{className:"bi bi-clock"}),(0,c.jsx)("small",{children:O})]})]})]}),(0,c.jsx)(l.A,{theme:t,show:M,title:"Delete Task",message:"Are you sure you want to delete this task? This action cannot be undone.",onConfirm:async()=>{T(!0);try{await(0,n.vq)(a.id),i((e=>e.filter((e=>e.id!==a.id)))),D(!1)}catch(e){console.error("Error deleting task:",e)}finally{T(!1),D(!1)}},onCancel:()=>D(!1)})]})};var f=a(150);const g=e=>{let{theme:t}=e;const{user:a,logout:l}=(0,i.A)(),[o,d]=(0,r.useState)(null),[m,u]=(0,r.useState)(null);(0,r.useEffect)((()=>{(async()=>{if(a)try{const e=await(0,n.j)();d(e.data)}catch(e){console.error("Error loading tasks:",e),e.response&&403===e.response.status&&l()}})()}),[a,l]);const h=()=>{const e={id:"temp-".concat(Date.now()),title:"",description:"",status:"not-started",deadline:null,reminders:[],createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString(),priority:1};u(e.id),d((t=>[e,...t]))},g=async e=>{try{const t=await(0,n.UT)({title:e.title,description:e.description,status:e.status,deadline:e.deadline,priority:o.length+1,reminders:e.reminders});d((a=>a.map((a=>a.id===e.id?t.data:a)))),u(null)}catch(t){console.error("Error saving new task:",t),t.response&&403===t.response.status&&l()}},x=e=>{d((t=>t.filter((t=>t.id!==e)))),u(null)};return o?(0,c.jsx)("div",{className:"container mt-5",children:(0,c.jsx)("div",{className:"task-container",children:(0,c.jsxs)("div",{className:"card-body p-3",children:[(0,c.jsxs)("div",{className:"d-flex flex-row justify-content-between align-items-center mb-3 header-container",children:[(0,c.jsx)("h2",{className:"card-title mb-0",children:"Your Tasks"}),"dark"===t?(0,c.jsx)("button",{className:"btn btn-outline-light d-flex align-items-center gap-2 add-task-button",onClick:h,"aria-label":"Add a new task",children:"New Task"}):(0,c.jsx)("button",{className:"btn btn-outline-dark d-flex align-items-center gap-2 add-task-button",onClick:h,"aria-label":"Add a new task",children:"New Task"})]}),0===o.length?(0,c.jsx)("p",{className:"text-".concat("dark"===t?"light":"muted"," mb-4"),children:"No tasks available"}):(0,c.jsx)(f.JY,{onDragEnd:async e=>{const{destination:t,source:a}=e;if(!t||t.index===a.index)return;const r=Array.from(o),[i]=r.splice(a.index,1);r.splice(t.index,0,i);const c=r.map(((e,t)=>(0,s.A)((0,s.A)({},e),{},{priority:t+1})));d(c);try{const e=i.id,a=t.index+1;await(0,n.vF)(e,a)}catch(m){console.error("Error updating task priority:",m),m.response&&403===m.response.status&&l()}},children:(0,c.jsx)(f.gL,{droppableId:"taskList",children:e=>(0,c.jsxs)("div",(0,s.A)((0,s.A)({},e.droppableProps),{},{ref:e.innerRef,className:"task-list",children:[o.sort(((e,t)=>e.priority-t.priority)).map(((e,a)=>(0,c.jsx)(f.sx,{draggableId:e.id.toString(),index:a,children:a=>(0,c.jsx)("div",(0,s.A)((0,s.A)((0,s.A)({ref:a.innerRef},a.draggableProps),a.dragHandleProps),{},{className:"mb-3",style:(0,s.A)({},a.draggableProps.style),children:(0,c.jsx)(p,{theme:t,task:e,setTasks:d,isNewTask:e.id===m,onSave:g,onCancel:x})}))},e.id))),e.placeholder]}))})})]})})}):(0,c.jsx)("div",{className:"container mt-5",children:(0,c.jsx)("div",{className:"task-container",children:(0,c.jsxs)("div",{className:"card-body p-3",children:[(0,c.jsx)("div",{className:"d-flex justify-content-between align-items-center mb-3 header-container",children:(0,c.jsx)("h2",{className:"card-title mb-0",children:"Your Tasks"})}),(0,c.jsx)("div",{className:"shimmer-list",children:Array.from({length:5}).map(((e,t)=>(0,c.jsxs)("div",{className:"shimmer-task-item",children:[(0,c.jsx)("div",{className:"shimmer-task-header"}),(0,c.jsx)("div",{className:"shimmer-task-body"})]},t)))})]})})})}},505:(e,t,a)=>{a.d(t,{A7:()=>u,DY:()=>m,E$:()=>x,J2:()=>h,Lx:()=>o,U0:()=>p,UT:()=>n,XL:()=>d,ec:()=>g,j:()=>r,lC:()=>i,r7:()=>y,vF:()=>c,vq:()=>l,xw:()=>f});const s=a(722).A.create({baseURL:"https://task-manager-sigma-ashen.vercel.app/api",headers:{"ngrok-skip-browser-warning":"true"}});s.interceptors.request.use((e=>{const t=localStorage.getItem("token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e}),(e=>Promise.reject(e)));const r=()=>s.get("/tasks"),n=e=>s.post("/tasks",e),i=(e,t)=>s.put("/tasks/".concat(e),t),l=e=>s.delete("/tasks/".concat(e)),c=(e,t)=>s.put("/tasks/".concat(e,"/priority"),{priority:t}),o=(e,t)=>s.post("/auth/login",{email:e,password:t}),d=async e=>s.post("/auth/google",{code:e}),m=(e,t,a,r)=>s.post("/auth/register",{firstName:e,lastName:t,email:a,password:r}),u=(e,t)=>s.post("/auth/verify-registration",{email:e,verificationCode:t}),h=e=>s.post("/auth/resend-verification",{email:e}),p=e=>s.post("/auth/forgot-password",{email:e}),f=(e,t,a)=>s.post("/auth/verify-code",{email:e,verificationCode:t,newPassword:a}),g=(e,t)=>s.post("/auth/change-password",{currentPassword:e,newPassword:t}),x=async()=>{try{return(await s.get("/profile")).data}catch(e){throw console.error("Error fetching profile:",e),e}},y=async e=>{try{return(await s.put("/profile",e,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(t){throw console.error("Error updating profile:",t),t}}},291:(e,t,a)=>{a.d(t,{Ic:()=>n,fw:()=>r,wM:()=>i});var s=a(535);const r=e=>{const t=new Date(e),a=new Date,r=Math.floor((a-t)/1e3);if(r<0){const e=Math.abs(r);return e<60?"Just now":e<60?"in ".concat(e," second").concat(1!==e?"s":""):e<3600?"in ".concat(Math.ceil(e/60)," minute").concat(1!==Math.ceil(e/60)?"s":""):e<86400?"in ".concat(Math.ceil(e/3600)," hour").concat(1!==Math.ceil(e/3600)?"s":""):e<604800?"in ".concat(Math.ceil(e/86400)," day").concat(1!==Math.ceil(e/86400)?"s":""):(0,s.GP)(t,"MMM dd, yyyy")}if(r<60)return"Just now";if(r<60)return"".concat(r," second").concat(1!==r?"s":""," ago");if(r<3600)return"".concat(Math.floor(r/60)," minute").concat(1!==Math.floor(r/60)?"s":""," ago");if(r<86400)return"".concat(Math.floor(r/3600)," hour").concat(1!==Math.floor(r/3600)?"s":""," ago");if(r<604800){const e=Math.floor(r/86400);return 1===e?"Yesterday":"".concat(e," days ago")}return(0,s.GP)(t,"MMM dd, yyyy")},n=e=>{const[t,a,s]=e.split("-").map(Number),r=new Date(t,a-1,s);if(isNaN(r))return"Invalid Date";return r.toLocaleString("en-US",{year:"numeric",month:"long",day:"numeric"})},i=e=>{const t=new Date(e),a=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0"),n=String(t.getHours()).padStart(2,"0"),i=String(t.getMinutes()).padStart(2,"0");return"".concat(a,"-").concat(s,"-").concat(r,"T").concat(n,":").concat(i)}}}]);
//# sourceMappingURL=218.e149a9c8.chunk.js.map