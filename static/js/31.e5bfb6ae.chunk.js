"use strict";(self.webpackChunktask_manager_frontend=self.webpackChunktask_manager_frontend||[]).push([[31],{4505:(e,t,s)=>{s.d(t,{A7:()=>h,DY:()=>p,E$:()=>y,J2:()=>g,Lx:()=>u,Pr:()=>b,U0:()=>v,UT:()=>i,XL:()=>m,ec:()=>w,gQ:()=>k,iV:()=>n,j:()=>o,lC:()=>c,r7:()=>x,vF:()=>d,vq:()=>l,xw:()=>f});const a=s(9722).A.create({baseURL:"https://task-manager-sigma-ashen.vercel.app/api",headers:{"ngrok-skip-browser-warning":"true"},timeout:3e4});a.interceptors.request.use(e=>{const t=localStorage.getItem("token");t&&(e.headers.Authorization="Bearer ".concat(t));try{const t=Intl.DateTimeFormat().resolvedOptions().timeZone;t&&(e.headers["x-user-timezone"]=t)}catch(s){console.warn("Could not detect user timezone:",s)}return e},e=>Promise.reject(e));const r=e=>{var t;return e.response?{message:(null===(t=e.response.data)||void 0===t?void 0:t.error)||"An error occurred",status:e.response.status}:e.request?{message:"No response from server. Please check your connection.",status:0}:{message:e.message||"An unexpected error occurred",status:-1}},o=()=>a.get("/tasks"),n=e=>a.get("/tasks/".concat(e)),i=e=>a.post("/tasks",e),c=(e,t)=>a.put("/tasks/".concat(e),t),l=e=>a.delete("/tasks/".concat(e)),d=(e,t)=>a.put("/tasks/".concat(e,"/priority"),{priority:t}),u=(e,t)=>a.post("/auth/login",{email:e,password:t}),m=async e=>a.post("/auth/google",{code:e}),p=(e,t,s,r)=>a.post("/auth/register",{firstName:e,lastName:t,email:s,password:r}),h=(e,t)=>a.post("/auth/verify-registration",{email:e,verificationCode:t}),g=e=>a.post("/auth/resend-verification",{email:e}),v=e=>a.post("/auth/forgot-password",{email:e}),f=(e,t,s)=>a.post("/auth/verify-code",{email:e,verificationCode:t,newPassword:s}),w=(e,t)=>a.post("/auth/change-password",{currentPassword:e,newPassword:t}),y=async()=>{try{return(await a.get("/profile")).data}catch(e){throw console.error("Error fetching profile:",e),e}},x=async e=>{try{return(await a.put("/profile",e,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(t){throw console.error("Error updating profile:",t),t}},b=async e=>{try{const t=Intl.DateTimeFormat().resolvedOptions().timeZone;return{success:!0,data:(await a.post("/ai/chat",{prompt:e},{headers:{"x-user-timezone":t}})).data}}catch(t){return{success:!1,error:r(t).message}}},k=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];try{const s=Intl.DateTimeFormat().resolvedOptions().timeZone;return{success:!0,data:(await a.post("/ai/chat-conversation",{message:e,conversationHistory:t},{headers:{"x-user-timezone":s}})).data}}catch(s){return{success:!1,error:r(s).message}}}},6031:(e,t,s)=>{s.r(t),s.d(t,{default:()=>i});var a=s(5043),r=s(3216),o=s(4505),n=s(579);const i=e=>{let{theme:t}=e;const[s,i]=(0,a.useState)(""),[c,l]=(0,a.useState)(""),[d,u]=(0,a.useState)(""),[m,p]=(0,a.useState)(""),[h,g]=(0,a.useState)(""),[v,f]=(0,a.useState)(""),[w,y]=(0,a.useState)(!1),[x,b]=(0,a.useState)(!1),[k,j]=(0,a.useState)(!1),N=(0,r.Zp)();return(0,n.jsx)("div",{className:"forgot-password-page d-flex align-items-center justify-content-center",children:(0,n.jsxs)("div",{className:"forgot-password-form wider-form",children:[(0,n.jsx)("h1",{className:"fw-bold mb-2",children:"Forgot Password"}),(0,n.jsx)("p",{className:"text-".concat("dark"===t?"light":"muted"," mb-4"),children:x||w?"Enter your verification code and reset your password.":"Enter your email to receive a verification code."}),(0,n.jsxs)("form",{onSubmit:x||w?async e=>{if(e.preventDefault(),f(""),g(""),j(!0),d!==m)return f("Passwords do not match."),void j(!1);try{const e=await(0,o.xw)(s,c,d);g(e.data.message||"Password reset successful!"),setTimeout(()=>{N("/login")},2e3)}catch(r){var t,a;console.error("Error resetting password:",r),f((null===(t=r.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message)||"Something went wrong. Please try again.")}finally{j(!1)}}:async e=>{e.preventDefault(),f(""),g(""),j(!0);try{const e=await(0,o.U0)(s);g(e.data.message||"Please check your email for further instructions."),y(!0)}catch(r){var t,a;console.error("Error sending reset email:",r),f((null===(t=r.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message)||"Something went wrong. Please try again.")}finally{j(!1)}},children:[(0,n.jsxs)("div",{className:"form-check mb-3",children:[(0,n.jsx)("input",{type:"checkbox",className:"form-check-input",id:"hasCodeCheck",checked:x,onChange:()=>{b(!x),f(""),g("")}}),(0,n.jsx)("label",{className:"form-check-label",htmlFor:"hasCodeCheck",children:"I already have a verification code"})]}),(0,n.jsx)("div",{className:"mb-3",children:(0,n.jsx)("input",{type:"email",className:"form-control py-2",id:"email",placeholder:"Enter your email",value:s,onChange:e=>i(e.target.value),required:!0,disabled:w})}),(x||w)&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"mb-3",children:(0,n.jsx)("input",{type:"text",className:"form-control py-2",id:"verificationCode",placeholder:"Enter verification code",value:c,onChange:e=>l(e.target.value),required:!0})}),(0,n.jsx)("div",{className:"mb-3",children:(0,n.jsx)("input",{type:"password",className:"form-control py-2",id:"newPassword",placeholder:"Enter new password",value:d,onChange:e=>u(e.target.value),required:!0})}),(0,n.jsx)("div",{className:"mb-3",children:(0,n.jsx)("input",{type:"password",className:"form-control py-2",id:"confirmNewPassword",placeholder:"Confirm new password",value:m,onChange:e=>p(e.target.value),required:!0})})]}),v&&(0,n.jsx)("div",{className:"alert alert-danger",children:v}),h&&(0,n.jsx)("div",{className:"alert alert-success",children:h}),(0,n.jsxs)("div",{className:"d-flex justify-content-between mt-4",children:[(0,n.jsx)("button",{type:"submit",className:"btn forgot-btn",disabled:k,children:k?(0,n.jsx)("span",{className:"spinner-border spinner-border-sm text-light",role:"status","aria-hidden":"true"}):x||w?"Reset":"Send Code"}),(0,n.jsx)("button",{type:"button",className:"btn btn-link back-to-login",onClick:()=>N("/login"),children:"Back to Login"})]})]})]})})}}}]);
//# sourceMappingURL=31.e5bfb6ae.chunk.js.map