"use strict";(self.webpackChunktask_manager_frontend=self.webpackChunktask_manager_frontend||[]).push([[443],{869:(e,a,t)=>{t.d(a,{A:()=>o});t(43),t(421);var s=t(579);const o=e=>{let{theme:a,show:t,title:o="Confirm Action",message:r="Are you sure you want to proceed?",onConfirm:n,onCancel:c}=e;return t?(0,s.jsx)("div",{className:"custom-modal-overlay d-flex align-items-center justify-content-center",tabIndex:"-1",role:"dialog",onClick:c,children:(0,s.jsxs)("div",{className:"custom-modal-content",role:"document",onClick:e=>e.stopPropagation(),children:[(0,s.jsxs)("div",{className:"custom-modal-header",children:[(0,s.jsx)("h5",{className:"modal2-title fw-bold",children:o}),(0,s.jsx)("button",{type:"button",className:"btn-close","aria-label":"Close",onClick:c})]}),(0,s.jsx)("div",{className:"custom-modal-body",children:(0,s.jsx)("p",{className:"text-".concat("dark"===a?"light":"muted"," mb-4"),children:r})}),(0,s.jsxs)("div",{className:"custom-modal-footer d-flex justify-content-end gap-2",children:[(0,s.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:c,children:"Cancel"}),(0,s.jsx)("button",{type:"button",className:"btn sign-in-btn",onClick:n,children:"Confirm"})]})]})}):null}},443:(e,a,t)=>{t.r(a),t.d(a,{default:()=>d});var s=t(43),o=t(216),r=t(505),n=(t(210),t(729)),c=t(869),l=t(291),i=t(579);const d=e=>{var a,t;let{theme:d}=e;const[m,u]=(0,s.useState)(!1),{logout:h}=(0,n.A)(),[p,v]=(0,s.useState)(null),[x,g]=(0,s.useState)(""),N=(0,o.Zp)();(0,s.useEffect)((()=>{(async()=>{try{const e=await(0,r.E$)();if(e.avatar&&e.avatar.data){const a=function(e){var a="";return[].slice.call(new Uint8Array(e)).forEach((e=>a+=String.fromCharCode(e))),window.btoa(a)}(e.avatar.data);e.avatar="data:image/jpeg;base64,".concat(a)}v(e)}catch(e){g("Failed to fetch profile data."),e&&403===e.status&&(h(),N("/login")),console.log(e)}})()}),[h,N]);return x?(0,i.jsxs)("div",{className:"profile-container",children:[(0,i.jsx)("h2",{className:"profile-title",children:"Profile Overview"}),(0,i.jsx)("p",{className:"text-danger text-center",children:x})]}):p?(0,i.jsxs)("div",{className:"profile-container",children:[(0,i.jsxs)("div",{className:"profile-card shadow rounded",children:[(0,i.jsx)("h2",{className:"profile-title text-center mb-4",children:"Profile Overview"}),(0,i.jsxs)("div",{className:"text-center",children:[p.avatar?(0,i.jsx)("img",{src:p.avatar,alt:"Profile",className:"rounded-circle profile-image"}):(0,i.jsx)("div",{className:"initials-circle",children:(0,i.jsx)("span",{className:"initials-text",children:"".concat((null===(a=p.firstName)||void 0===a?void 0:a[0])||"").concat((null===(t=p.lastName)||void 0===t?void 0:t[0])||"").toUpperCase()})}),(0,i.jsx)("h3",{className:"mt-3",children:"".concat(p.firstName," ").concat(p.lastName)}),(0,i.jsx)("p",{className:"text-".concat("dark"===d?"light":"muted"," mb-4"),children:p.bio||"No bio available"})]}),(0,i.jsxs)("div",{className:"profile-details mt-4",children:[(0,i.jsxs)("div",{className:"detail-row",children:[(0,i.jsx)("strong",{className:"detail-label",children:"Email:"}),(0,i.jsx)("span",{className:"detail-value",children:p.email})]}),(0,i.jsxs)("div",{className:"detail-row",children:[(0,i.jsx)("strong",{className:"detail-label",children:"Phone:"}),(0,i.jsx)("span",{className:"detail-value",children:p.phoneNumber||"Not provided"})]}),(0,i.jsxs)("div",{className:"detail-row",children:[(0,i.jsx)("strong",{className:"detail-label",children:"Date of Birth:"}),(0,i.jsx)("span",{className:"detail-value",children:p.dob?(0,l.Ic)(p.dob):"Not provided"})]})]}),(0,i.jsxs)("div",{className:"row mt-4",children:[(0,i.jsx)("div",{className:"col-12 col-md-6 mb-2 mb-md-0",children:(0,i.jsx)("button",{className:"btn btn-secondary w-100",onClick:()=>N("/change-password"),children:"Change Password"})}),(0,i.jsx)("div",{className:"col-12 col-md-6",children:(0,i.jsx)("button",{className:"btn sign-in-btn w-100",onClick:()=>N("/edit-profile"),children:"Edit Profile"})})]}),(0,i.jsx)("div",{className:"row mt-2",children:(0,i.jsx)("div",{className:"col-12",children:(0,i.jsx)("button",{className:"btn btn-danger w-100",onClick:()=>{u(!0)},children:"Logout"})})})]}),(0,i.jsx)(c.A,{theme:d,show:m,title:"Logout",message:"Are you sure you want to log out?",onConfirm:()=>{h(),u(!1),N("/login")},onCancel:()=>u(!1)})]}):(0,i.jsx)("div",{className:"profile-container",children:(0,i.jsxs)("div",{className:"profile-card shadow rounded",children:[(0,i.jsx)("h2",{className:"profile-title text-center mb-4",children:"Profile Overview"}),(0,i.jsxs)("div",{className:"skeleton-loader",children:[(0,i.jsx)("div",{className:"skeleton-avatar mb-4"}),(0,i.jsx)("div",{className:"skeleton-line mb-3"}),(0,i.jsx)("div",{className:"skeleton-line mb-3"}),(0,i.jsx)("hr",{}),(0,i.jsx)("div",{className:"skeleton-detail-row mb-3"}),(0,i.jsx)("div",{className:"skeleton-detail-row mb-3"}),(0,i.jsx)("div",{className:"skeleton-detail-row"}),(0,i.jsxs)("div",{className:"row mt-4",children:[(0,i.jsx)("div",{className:"col-12 col-md-6 mb-2 mb-md-0",children:(0,i.jsx)("div",{className:"skeleton-button"})}),(0,i.jsx)("div",{className:"col-12 col-md-6",children:(0,i.jsx)("div",{className:"skeleton-button"})})]}),(0,i.jsx)("div",{className:"row mt-3",children:(0,i.jsx)("div",{className:"col-12",children:(0,i.jsx)("div",{className:"skeleton-button-lg"})})})]})]})})}},505:(e,a,t)=>{t.d(a,{A7:()=>p,DY:()=>h,E$:()=>f,J2:()=>v,Lx:()=>m,Pr:()=>b,U0:()=>x,UT:()=>c,XL:()=>u,ec:()=>N,gQ:()=>w,iV:()=>n,j:()=>r,lC:()=>l,r7:()=>j,vF:()=>d,vq:()=>i,xw:()=>g});const s=t(722).A.create({baseURL:"https://task-manager-sigma-ashen.vercel.app/api",headers:{"ngrok-skip-browser-warning":"true"},timeout:3e4});s.interceptors.request.use((e=>{const a=localStorage.getItem("token");return a&&(e.headers.Authorization="Bearer ".concat(a)),e}),(e=>Promise.reject(e)));const o=e=>{var a;return e.response?{message:(null===(a=e.response.data)||void 0===a?void 0:a.error)||"An error occurred",status:e.response.status}:e.request?{message:"No response from server. Please check your connection.",status:0}:{message:e.message||"An unexpected error occurred",status:-1}},r=()=>s.get("/tasks"),n=e=>s.get("/tasks/".concat(e)),c=e=>s.post("/tasks",e),l=(e,a)=>s.put("/tasks/".concat(e),a),i=e=>s.delete("/tasks/".concat(e)),d=(e,a)=>s.put("/tasks/".concat(e,"/priority"),{priority:a}),m=(e,a)=>s.post("/auth/login",{email:e,password:a}),u=async e=>s.post("/auth/google",{code:e}),h=(e,a,t,o)=>s.post("/auth/register",{firstName:e,lastName:a,email:t,password:o}),p=(e,a)=>s.post("/auth/verify-registration",{email:e,verificationCode:a}),v=e=>s.post("/auth/resend-verification",{email:e}),x=e=>s.post("/auth/forgot-password",{email:e}),g=(e,a,t)=>s.post("/auth/verify-code",{email:e,verificationCode:a,newPassword:t}),N=(e,a)=>s.post("/auth/change-password",{currentPassword:e,newPassword:a}),f=async()=>{try{return(await s.get("/profile")).data}catch(e){throw console.error("Error fetching profile:",e),e}},j=async e=>{try{return(await s.put("/profile",e,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(a){throw console.error("Error updating profile:",a),a}},b=async e=>{try{const a=Intl.DateTimeFormat().resolvedOptions().timeZone;return{success:!0,data:(await s.post("/ai/chat",{prompt:e},{headers:{"x-user-timezone":a}})).data}}catch(a){return{success:!1,error:o(a).message}}},w=async function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];try{const t=Intl.DateTimeFormat().resolvedOptions().timeZone;return{success:!0,data:(await s.post("/ai/chat-conversation",{message:e,conversationHistory:a},{headers:{"x-user-timezone":t}})).data}}catch(t){return{success:!1,error:o(t).message}}}},291:(e,a,t)=>{t.d(a,{Ic:()=>r,fw:()=>o,wM:()=>n});var s=t(535);const o=e=>{const a=new Date(e),t=new Date,o=Math.floor((t-a)/1e3);if(o<0){const e=Math.abs(o);return e<60?"Just now":e<60?"in ".concat(e," second").concat(1!==e?"s":""):e<3600?"in ".concat(Math.ceil(e/60)," minute").concat(1!==Math.ceil(e/60)?"s":""):e<86400?"in ".concat(Math.ceil(e/3600)," hour").concat(1!==Math.ceil(e/3600)?"s":""):e<604800?"in ".concat(Math.ceil(e/86400)," day").concat(1!==Math.ceil(e/86400)?"s":""):(0,s.GP)(a,"MMM dd, yyyy")}if(o<60)return"Just now";if(o<60)return"".concat(o," second").concat(1!==o?"s":""," ago");if(o<3600)return"".concat(Math.floor(o/60)," minute").concat(1!==Math.floor(o/60)?"s":""," ago");if(o<86400)return"".concat(Math.floor(o/3600)," hour").concat(1!==Math.floor(o/3600)?"s":""," ago");if(o<604800){const e=Math.floor(o/86400);return 1===e?"Yesterday":"".concat(e," days ago")}return(0,s.GP)(a,"MMM dd, yyyy")},r=e=>{const[a,t,s]=e.split("-").map(Number),o=new Date(a,t-1,s);if(isNaN(o))return"Invalid Date";return o.toLocaleString("en-US",{year:"numeric",month:"long",day:"numeric"})},n=e=>{const a=new Date(e),t=a.getFullYear(),s=String(a.getMonth()+1).padStart(2,"0"),o=String(a.getDate()).padStart(2,"0"),r=String(a.getHours()).padStart(2,"0"),n=String(a.getMinutes()).padStart(2,"0");return"".concat(t,"-").concat(s,"-").concat(o,"T").concat(r,":").concat(n)}},210:()=>{}}]);
//# sourceMappingURL=443.2e6ff87e.chunk.js.map