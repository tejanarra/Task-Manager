"use strict";(self.webpackChunktask_manager_frontend=self.webpackChunktask_manager_frontend||[]).push([[326],{6800:(e,s,a)=>{a.r(s),a.d(s,{default:()=>h});var t=a(2555),r=a(5043),i=a(3216),l=a(4505),n=a(6196),c=a(5090),o=a(1291),d=a(7081),m=a(2532),u=a(579);const h=e=>{let{theme:s}=e;const a=(0,i.Zp)(),{taskId:h}=(0,i.g)(),b="new"===h,[x,j]=(0,r.useState)(""),[p,N]=(0,r.useState)(""),[v,k]=(0,r.useState)("not-started"),[g,f]=(0,r.useState)(null),[y,w]=(0,r.useState)([]),[C,S]=(0,r.useState)(!1),[T,A]=(0,r.useState)(!1),[E,D]=(0,r.useState)(null);(0,r.useEffect)(()=>{(async()=>{if(!b)try{S(!0);const e=(await(0,l.iV)(h)).data;e?(j(e.title),N(e.description),k(e.status),f(e.deadline||null),w(Array.isArray(e.reminders)?e.reminders:[])):(D("Task not found"),setTimeout(()=>a("/tasks"),2e3))}catch(e){console.error("Error loading task:",e),D("Failed to load task")}finally{S(!1)}})()},[h,b,a]),(0,r.useEffect)(()=>{var e;const s=null===(e=window.history.state)||void 0===e?void 0:e.usr;if(null!==s&&void 0!==s&&s.task){const e=s.task;j(e.title||""),N(e.description||""),k(e.status||"not-started"),f(e.deadline||null),w(Array.isArray(e.reminders)?e.reminders:[])}},[]);const F=()=>{a("/tasks")},q=()=>{switch(v){case"completed":return"#007a00";case"in-progress":return"#daa520";default:return"#a00000"}},L=g&&new Date(g)>new Date;return C&&!b?(0,u.jsx)("div",{className:"container mt-5",children:(0,u.jsxs)("div",{className:"task-editor-container",style:{position:"relative"},children:[(0,u.jsx)("div",{className:"editor-spine"}),(0,u.jsxs)("div",{className:"loading-state",children:[(0,u.jsx)("div",{className:"spinner-border",role:"status",children:(0,u.jsx)("span",{className:"visually-hidden",children:"Loading..."})}),(0,u.jsx)("p",{children:"Loading task..."})]})]})}):(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{className:"container mt-5",children:(0,u.jsxs)("div",{className:"task-editor-container ".concat("dark"===s?"dark":""),style:{position:"relative"},children:[(0,u.jsx)("div",{className:"editor-spine",style:{backgroundColor:q()}}),(0,u.jsxs)("div",{className:"editor-header",children:[(0,u.jsx)("button",{className:"back-button",onClick:F,disabled:C,"aria-label":"Go back to task list",children:(0,u.jsx)("i",{className:"bi bi-arrow-left","aria-hidden":"true"})}),(0,u.jsx)("h2",{children:b?"Create New Task":"Edit Task"}),(0,u.jsx)("i",{className:"bi ".concat("completed"===v?"bi-check-circle-fill":"in-progress"===v?"bi-hourglass-split":"bi-circle"," status-icon-header"),style:{color:q()}})]}),E&&(0,u.jsxs)("div",{className:"alert alert-danger",role:"alert",children:[(0,u.jsx)("i",{className:"bi bi-exclamation-triangle me-2"}),E]}),(0,u.jsxs)("div",{className:"editor-form",children:[(0,u.jsxs)("div",{className:"form-group",children:[(0,u.jsxs)("label",{className:"form-label",children:[(0,u.jsx)("i",{className:"bi bi-pencil-square me-1"}),"Title ",(0,u.jsx)("span",{className:"required",children:"*"})]}),(0,u.jsx)("input",{type:"text",className:"form-control",value:x,onChange:e=>j(e.target.value),placeholder:"Enter task title...",disabled:C})]}),(0,u.jsxs)("div",{className:"form-group",children:[(0,u.jsxs)("label",{className:"form-label",children:[(0,u.jsx)("i",{className:"bi bi-text-paragraph me-1"}),"Description ",(0,u.jsx)("span",{className:"required",children:"*"})]}),(0,u.jsx)("textarea",{className:"form-control",rows:5,value:p,onChange:e=>N(e.target.value),placeholder:"Enter task description...",disabled:C})]}),(0,u.jsxs)("div",{className:"form-row",children:[(0,u.jsxs)("div",{className:"form-group",children:[(0,u.jsxs)("label",{className:"form-label",children:[(0,u.jsx)("i",{className:"bi bi-flag me-1"}),"Status"]}),(0,u.jsxs)("select",{className:"form-select",value:v,onChange:e=>k(e.target.value),disabled:C,style:{color:q()},children:[(0,u.jsx)("option",{value:"not-started",children:"Not Started"}),(0,u.jsx)("option",{value:"in-progress",children:"In Progress"}),(0,u.jsx)("option",{value:"completed",children:"Completed"})]})]}),(0,u.jsxs)("div",{className:"form-group",children:[(0,u.jsxs)("label",{className:"form-label",children:[(0,u.jsx)("i",{className:"bi bi-calendar-event me-1"}),"Deadline"]}),(0,u.jsx)("input",{type:"datetime-local",className:"form-control",value:g?(0,o.wM)(g):"",onChange:e=>f(e.target.value),disabled:C})]})]}),L&&(0,u.jsxs)("div",{className:"form-group reminders-section",children:[(0,u.jsxs)("label",{className:"form-label",children:[(0,u.jsx)("i",{className:"bi bi-clock-history me-1"}),"Reminders"]}),(0,u.jsx)(n.A,{tempDeadline:g,tempReminders:y,setTempReminders:w,theme:s,ALL_INTERVALS:m.Ym})]})]}),(0,u.jsxs)("div",{className:"editor-actions",children:[!b&&(0,u.jsxs)("button",{className:"btn btn-danger",onClick:()=>A(!0),disabled:C,children:[(0,u.jsx)("i",{className:"bi bi-trash me-2"}),"Delete Task"]}),(0,u.jsxs)("div",{className:"action-group",children:[(0,u.jsx)("button",{className:"btn btn-secondary",onClick:F,disabled:C,children:"Cancel"}),(0,u.jsx)("button",{className:"btn btn-primary",onClick:async()=>{if(!x.trim()||!p.trim())return void D("Title and description are required");S(!0),D(null);const e=g?(0,d.ZW)(y,g):[],s={title:x.trim(),description:p.trim(),status:v,deadline:g?new Date(g).toISOString():null,reminders:e};try{b?await(0,l.UT)((0,t.A)((0,t.A)({},s),{},{priority:1})):await(0,l.lC)(h,s),a("/tasks")}catch(E){console.error("Error saving task:",E),D("Failed to save task. Please try again.")}finally{S(!1)}},disabled:!x.trim()||!p.trim()||C,children:C?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("span",{className:"spinner-border spinner-border-sm me-2"}),"Saving..."]}):(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("i",{className:"bi bi-check-lg me-2"}),b?"Create Task":"Save Changes"]})})]})]})]})}),(0,u.jsx)(c.A,{theme:s,show:T,title:"Delete Task",message:"Are you sure you want to delete this task? This action cannot be undone.",onConfirm:async()=>{S(!0);try{await(0,l.vq)(h),a("/tasks")}catch(E){console.error("Error deleting task:",E),D("Failed to delete task"),S(!1),A(!1)}},onCancel:()=>A(!1)})]})}},8421:()=>{}}]);
//# sourceMappingURL=326.254e4798.chunk.js.map