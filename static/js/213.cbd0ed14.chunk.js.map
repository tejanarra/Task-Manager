{"version":3,"file":"static/js/213.cbd0ed14.chunk.js","mappings":"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","sources":["components/ConfirmationModal.js","components/AIChatModal/QuickMode.js","utils/reminderHelpers.js","components/AIChatModal/ChatMessage.js","components/taskItem/TaskItem.js","components/AIChatModal/ChatMode.js","components/AIChatModal/TaskPreviewModal.js","components/AIChatModal/AIChatModal.js","components/TaskList.js","components/taskItem/TaskCard.js","components/taskItem/ReminderCheckbox.js","components/taskItem/TaskReminders.js","services/api.js","utils/dateUtils.js"],"sourcesContent":["import React from \"react\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport \"../Styles/ConfirmationModal.css\";\n\nconst ConfirmationModal = ({\n  theme,\n  show,\n  title = \"Confirm Action\",\n  message = \"Are you sure you want to proceed?\",\n  onConfirm,\n  onCancel,\n}) => {\n  if (!show) return null;\n\n  return (\n    <div\n      className=\"custom-modal-overlay d-flex align-items-center justify-content-center\"\n      tabIndex=\"-1\"\n      role=\"dialog\"\n      onClick={onCancel}\n    >\n      <div\n        className=\"custom-modal-content\"\n        role=\"document\"\n        onClick={(e) => e.stopPropagation()}\n      >\n        <div className=\"custom-modal-header\">\n          <h5 className=\"modal2-title fw-bold\">{title}</h5>\n          <button\n            type=\"button\"\n            className=\"btn-close\"\n            aria-label=\"Close\"\n            onClick={onCancel}\n          ></button>\n        </div>\n        <div className=\"custom-modal-body\">\n          <p className={`text-${theme === \"dark\" ? \"light\" : \"muted\"} mb-4`}>\n            {message}\n          </p>\n        </div>\n        <div className=\"custom-modal-footer d-flex justify-content-end gap-2\">\n          <button\n            type=\"button\"\n            className=\"btn btn-secondary\"\n            onClick={onCancel}\n          >\n            Cancel\n          </button>\n          <button type=\"button\" className=\"btn sign-in-btn\" onClick={onConfirm}>\n            Confirm\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ConfirmationModal;\n","import { useState, useRef, useEffect } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { generateAITask } from \"../../services/api\";\n\nconst QuickMode = ({ setError, onClose }) => {\n  const navigate = useNavigate();\n  const [quickPrompt, setQuickPrompt] = useState(\"\");\n  const [isLoading, setIsLoading] = useState(false);\n  const inputRef = useRef(null);\n\n  useEffect(() => {\n    if (inputRef.current) inputRef.current.focus();\n  }, []);\n\n  const handleQuickGenerate = async () => {\n    if (!quickPrompt.trim()) return;\n    setIsLoading(true);\n    setError(null);\n\n    const result = await generateAITask(quickPrompt);\n    setIsLoading(false);\n\n    if (!result.success) {\n      setError(result.error);\n      return;\n    }\n\n    const aiTask = result.data;\n    const newTask = {\n      title: aiTask.title,\n      description: aiTask.description,\n      status: aiTask.status || \"not-started\",\n      deadline: aiTask.deadline,\n      reminders: aiTask.reminders || [],\n    };\n\n    // Close modal and navigate to editor with task data\n    onClose();\n    navigate(\"/tasks/new/edit\", { state: { task: newTask } });\n  };\n\n  const handleKeyPress = (e) => {\n    if (e.key === \"Enter\" && !e.shiftKey) {\n      e.preventDefault();\n      handleQuickGenerate();\n    }\n  };\n\n  return (\n    <div className=\"quick-mode\">\n      <div className=\"quick-mode-content\">\n        <label className=\"form-label\">Describe your task:</label>\n        <textarea\n          ref={inputRef}\n          className=\"form-control\"\n          rows={4}\n          value={quickPrompt}\n          onChange={(e) => setQuickPrompt(e.target.value)}\n          onKeyDown={handleKeyPress}\n          placeholder=\"E.g., 'Prepare project report by Friday 5PM with reminders 1 day and 1 hour before'\"\n          disabled={isLoading}\n        />\n        <div className=\"quick-mode-suggestions\">\n          <small>Try these:</small>\n          {[\n            \"Schedule dentist appointment next Tuesday at 3pm\",\n            \"Plan weekend shopping with 1 day reminder\",\n            \"Prepare presentation for Monday with daily reminders\",\n          ].map((text) => (\n            <button\n              key={text}\n              className=\"suggestion-chip\"\n              onClick={() => setQuickPrompt(text)}\n              disabled={isLoading}\n            >\n              {text}\n            </button>\n          ))}\n        </div>\n      </div>\n\n      <div className=\"modal-actions\">\n        <button\n          className=\"btn btn-secondary\"\n          onClick={onClose}\n          disabled={isLoading}\n        >\n          Cancel\n        </button>\n        <button\n          className=\"btn btn-primary\"\n          onClick={handleQuickGenerate}\n          disabled={!quickPrompt.trim() || isLoading}\n        >\n          {isLoading ? (\n            <>\n              <span className=\"spinner-border spinner-border-sm me-2\"></span>{\" \"}\n              Generating...\n            </>\n          ) : (\n            <>\n              <i className=\"bi bi-magic me-2\"></i> Generate Task\n            </>\n          )}\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport default QuickMode;\n","/**\n * Normalize and calculate remindBefore for all reminders before saving.\n * @param {Array} reminders - List of reminder objects\n * @param {string|Date} deadline - ISO string or Date for task deadline\n * @returns {Array} normalized reminders\n */\nexport const normalizeRemindersBeforeSave = (reminders, deadline) => {\n  if (!Array.isArray(reminders) || !deadline) return reminders;\n\n  const deadlineDate = new Date(deadline);\n\n  return reminders.map((r) => {\n    // Skip invalid dates or reminders with explicit remindBefore\n    if (r.remindBefore && !r.customDate) return r;\n\n    // If a customDate exists, calculate remindBefore dynamically\n    if (r.customDate) {\n      const customDate = new Date(r.customDate);\n      if (!isNaN(customDate.getTime()) && customDate < deadlineDate) {\n        const diffHours = (deadlineDate - customDate) / (1000 * 60 * 60);\n        return { ...r, remindBefore: diffHours };\n      }\n    }\n\n    // Fallback: keep as-is\n    return r;\n  });\n};\n","import React from \"react\";\n\nconst ChatMessage = ({ msg, user, theme }) => {\n  const userAvatar = user.avatar;\n  const initials =\n    (user.firstName?.[0]?.toUpperCase() || \"\") +\n    (user.lastName?.[0]?.toUpperCase() || \"\");\n  const displayInitials = initials || \"?\";\n\n  // Format timestamp for WhatsApp-like display\n  const formatTime = (timestamp) => {\n    const date = new Date(timestamp);\n    const now = new Date();\n    const diffInHours = (now - date) / (1000 * 60 * 60);\n\n    // If message is from today, show time only\n    if (diffInHours < 24 && date.getDate() === now.getDate()) {\n      return date.toLocaleTimeString([], {\n        hour: \"2-digit\",\n        minute: \"2-digit\",\n      });\n    }\n\n    // If yesterday\n    if (diffInHours < 48 && date.getDate() === now.getDate() - 1) {\n      return `Yesterday ${date.toLocaleTimeString([], {\n        hour: \"2-digit\",\n        minute: \"2-digit\",\n      })}`;\n    }\n\n    // Otherwise show date and time\n    return (\n      date.toLocaleDateString([], {\n        month: \"short\",\n        day: \"numeric\",\n      }) +\n      \" \" +\n      date.toLocaleTimeString([], {\n        hour: \"2-digit\",\n        minute: \"2-digit\",\n      })\n    );\n  };\n\n  // Format message content with basic markdown-like formatting\n  const formatMessageContent = (content) => {\n    if (!content) return \"\";\n\n    // Split by numbered lists (1., 2., etc.)\n    const parts = content.split(/(\\d+\\.\\s+[^\\n]+)/g);\n\n    return parts.map((part, index) => {\n      // Check if this is a numbered list item\n      if (/^\\d+\\.\\s+/.test(part)) {\n        const match = part.match(/^(\\d+)\\.\\s+(.+)/);\n        if (match) {\n          return (\n            <div\n              key={index}\n              style={{ marginLeft: \"0.5rem\", marginTop: \"0.25rem\" }}\n            >\n              <strong>{match[1]}.</strong> {match[2]}\n            </div>\n          );\n        }\n      }\n\n      // Process inline formatting\n      const processedPart = part\n        .split(/(\\*\\*[^*]+\\*\\*)/g) // Bold text\n        .map((segment, i) => {\n          if (segment.startsWith(\"**\") && segment.endsWith(\"**\")) {\n            return <strong key={i}>{segment.slice(2, -2)}</strong>;\n          }\n          return segment;\n        });\n\n      return <span key={index}>{processedPart}</span>;\n    });\n  };\n\n  return (\n    <div className={`chat-message ${msg.role}`}>\n      <div className=\"message-avatar\">\n        {msg.role === \"user\" ? (\n          userAvatar ? (\n            <img\n              src={userAvatar}\n              alt=\"User\"\n              style={{\n                width: \"100%\",\n                height: \"100%\",\n                borderRadius: \"50%\",\n                objectFit: \"cover\",\n              }}\n            />\n          ) : (\n            <div\n              style={{\n                width: \"100%\",\n                height: \"100%\",\n                borderRadius: \"50%\",\n                backgroundColor: theme === \"dark\" ? \"#ffffff\" : \"#000000\",\n                color: theme === \"dark\" ? \"#000000\" : \"#ffffff\",\n                fontWeight: \"bold\",\n                display: \"flex\",\n                alignItems: \"center\",\n                justifyContent: \"center\",\n                fontSize: \"0.85rem\",\n              }}\n            >\n              {displayInitials}\n            </div>\n          )\n        ) : (\n          <i className=\"bi bi-robot\"></i>\n        )}\n      </div>\n      <div className=\"message-content\">\n        <div className=\"message-text\">\n          <div className=\"message-text-content\">\n            {formatMessageContent(msg.content)}\n          </div>\n          <div className=\"message-time\">\n            {formatTime(msg.timestamp)}\n            {msg.role === \"user\" && (\n              <i\n                className=\"bi bi-check-all\"\n                style={{ fontSize: \"0.75rem\" }}\n              ></i>\n            )}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ChatMessage;\n","import React, { useState, useEffect, useRef, useCallback } from \"react\";\nimport { deleteTask, updateTask } from \"../../services/api\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport ConfirmationModal from \"../ConfirmationModal\";\nimport TaskReminders from \"./TaskReminders\";\nimport { formatRelativeTime, formatDateTimeLocal } from \"../../utils/dateUtils\";\nimport \"./Styles/TaskItem.css\";\n\nconst ALL_INTERVALS = [\n  { value: 1, label: \"1 hr\" },\n  { value: 24, label: \"1 day\" },\n  { value: 168, label: \"1 week\" },\n];\n\nfunction formatHoursLabel(h) {\n  if (h < 1) return `${Math.round(h * 60)} min`;\n  if (Number.isInteger(h)) return `${h} hr${h > 1 ? \"s\" : \"\"}`;\n  return `${h} hrs`;\n}\n\nconst TaskItem = ({\n  theme,\n  task,\n  setTasks,\n  isNewTask = false,\n  onSave = () => {},\n  onCancel = () => {},\n}) => {\n  const [isEditing, setIsEditing] = useState(isNewTask);\n  const [tempTitle, setTempTitle] = useState(task.title);\n  const [tempDescription, setTempDescription] = useState(task.description);\n  const [tempStatus, setTempStatus] = useState(task.status);\n  const [tempDeadline, setTempDeadline] = useState(task.deadline || null);\n  const [tempReminders, setTempReminders] = useState(\n    Array.isArray(task.reminders) ? task.reminders : []\n  );\n  const [showDeleteModal, setShowDeleteModal] = useState(false);\n  const [isLoading, setIsLoading] = useState(false);\n  const cardRef = useRef(null);\n\n  // ✅ Ensure reminders update when the AI-created task is previewed\n  useEffect(() => {\n    if (Array.isArray(task.reminders) && task.reminders.length > 0) {\n      setTempReminders(task.reminders);\n    }\n  }, [task.reminders]);\n\n  const handleCancel = useCallback(() => {\n    setTempTitle(task.title);\n    setTempDescription(task.description);\n    setTempStatus(task.status);\n    setTempDeadline(task.deadline || null);\n    setTempReminders(Array.isArray(task.reminders) ? task.reminders : []);\n    isNewTask ? onCancel(task.id) : setIsEditing(false);\n  }, [\n    task.title,\n    task.description,\n    task.status,\n    task.deadline,\n    task.reminders,\n    isNewTask,\n    onCancel,\n    task.id,\n  ]);\n\n  useEffect(() => {\n    const handleClickOutside = (e) => {\n      if (isEditing && cardRef.current && !cardRef.current.contains(e.target)) {\n        handleCancel();\n      }\n    };\n    document.addEventListener(\"mousedown\", handleClickOutside);\n    return () => document.removeEventListener(\"mousedown\", handleClickOutside);\n  }, [isEditing, handleCancel]);\n\n  const handleSave = async () => {\n    if (!tempTitle.trim() || !tempDescription.trim()) return;\n\n    setIsLoading(true);\n\n    const changed =\n      tempTitle !== task.title ||\n      tempDescription !== task.description ||\n      tempStatus !== task.status ||\n      tempDeadline !== task.deadline ||\n      JSON.stringify(tempReminders) !== JSON.stringify(task.reminders);\n\n    if (!changed && !isNewTask) {\n      setIsEditing(false);\n      setIsLoading(false);\n      return;\n    }\n\n    const now = new Date();\n    const deadlineDate = tempDeadline ? new Date(tempDeadline) : null;\n    const diffInHours =\n      deadlineDate && deadlineDate > now\n        ? (deadlineDate - now) / (1000 * 60 * 60)\n        : 0;\n\n    const regenerateRecurringReminders = (reminders) => {\n      const hasDaily = reminders.some((r) => r.type === \"daily\");\n      const hasWeekly = reminders.some((r) => r.type === \"weekly\");\n\n      let filteredReminders = reminders.filter(\n        (r) =>\n          (r.type === \"one-time\" || !r.type) && r.remindBefore <= diffInHours\n      );\n\n      if (hasDaily && diffInHours > 0) {\n        const maxDays = Math.floor(diffInHours / 24);\n        for (let day = 1; day <= maxDays; day++) {\n          filteredReminders.push({\n            remindBefore: day * 24,\n            sent: false,\n            type: \"daily\",\n            dayNumber: day,\n          });\n        }\n      }\n\n      if (hasWeekly && diffInHours > 0) {\n        const maxWeeks = Math.floor(diffInHours / (24 * 7));\n        for (let week = 1; week <= maxWeeks; week++) {\n          filteredReminders.push({\n            remindBefore: week * 24 * 7,\n            sent: false,\n            type: \"weekly\",\n            weekNumber: week,\n          });\n        }\n      }\n\n      return filteredReminders;\n    };\n\n    const finalReminders =\n      diffInHours > 0 ? regenerateRecurringReminders(tempReminders) : [];\n\n    const updatedTaskData = {\n      title: tempTitle.trim(),\n      description: tempDescription.trim(),\n      status: tempStatus,\n      deadline: tempDeadline ? deadlineDate.toISOString() : null,\n      reminders: finalReminders,\n    };\n\n    try {\n      if (isNewTask) {\n        onSave({ ...task, ...updatedTaskData });\n      } else {\n        const response = await updateTask(task.id, updatedTaskData);\n        setTasks((prev) =>\n          prev.map((t) => (t.id === response.data.id ? response.data : t))\n        );\n        setIsEditing(false);\n      }\n    } catch (error) {\n      console.error(\"Error updating task:\", error);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleDelete = () => setShowDeleteModal(true);\n  const confirmDelete = async () => {\n    setIsLoading(true);\n    try {\n      await deleteTask(task.id);\n      setTasks((prev) => prev.filter((t) => t.id !== task.id));\n      setShowDeleteModal(false);\n    } catch (error) {\n      console.error(\"Error deleting task:\", error);\n    } finally {\n      setIsLoading(false);\n      setShowDeleteModal(false);\n    }\n  };\n\n  const getStripColor = (status) => {\n    switch (status) {\n      case \"completed\":\n        return \"#007a00\";\n      case \"in-progress\":\n        return \"#daa520\";\n      default:\n        return \"#a00000\";\n    }\n  };\n\n  const stripColor = getStripColor(task.status);\n  const isDeadlineInFuture =\n    tempDeadline && new Date(tempDeadline) > new Date();\n\n  // ✅ Fixed — correctly include \"one-time\" reminders\n  const getReminderSummary = () => {\n    if (!tempReminders || tempReminders.length === 0) return null;\n\n    const dailyCount = tempReminders.filter((r) => r.type === \"daily\").length;\n    const weeklyCount = tempReminders.filter((r) => r.type === \"weekly\").length;\n    const oneTimeCount = tempReminders.filter(\n      (r) => r.type === \"one-time\" || !r.type\n    ).length;\n\n    const parts = [];\n    if (dailyCount > 0) parts.push(`Daily (${dailyCount})`);\n    if (weeklyCount > 0) parts.push(`Weekly (${weeklyCount})`);\n    if (oneTimeCount > 0) parts.push(`One-time (${oneTimeCount})`);\n\n    return parts.length > 0 ? parts.join(\", \") : null;\n  };\n\n  const reminderSummary = getReminderSummary();\n\n  return (\n    <>\n      <div\n        ref={cardRef}\n        className={`task-card ${theme === \"dark\" ? \"dark\" : \"\"} ${\n          isLoading ? \"loading\" : \"\"\n        } ${isNewTask ? \"new-task\" : \"\"}`}\n        onClick={() => !isEditing && setIsEditing(true)}\n      >\n        <div\n          className=\"task-strip\"\n          style={{ backgroundColor: stripColor }}\n        ></div>\n\n        <div className=\"task-card-content\">\n          {!isEditing && (\n            <i\n              className={`bi ${\n                task.status === \"completed\"\n                  ? \"bi-check-circle\"\n                  : task.status === \"in-progress\"\n                  ? \"bi-hourglass\"\n                  : \"bi-ban\"\n              } status-icon`}\n              style={{ color: stripColor }}\n            />\n          )}\n\n          {isEditing ? (\n            <div className=\"task-form-grid\">\n              <div className=\"task-form-group full-width\">\n                <label className=\"form-label\">Title</label>\n                <input\n                  type=\"text\"\n                  className=\"form-control\"\n                  value={tempTitle}\n                  onChange={(e) => setTempTitle(e.target.value)}\n                  placeholder=\"Enter task title...\"\n                />\n              </div>\n\n              <div className=\"task-form-group full-width\">\n                <label className=\"form-label\">Description</label>\n                <textarea\n                  className=\"form-control\"\n                  rows={3}\n                  value={tempDescription}\n                  onChange={(e) => setTempDescription(e.target.value)}\n                  placeholder=\"Enter task description...\"\n                />\n              </div>\n\n              <div className=\"task-form-group\">\n                <label className=\"form-label\">Status</label>\n                <select\n                  className=\"form-select\"\n                  value={tempStatus}\n                  onChange={(e) => setTempStatus(e.target.value)}\n                >\n                  <option value=\"not-started\">Not Started</option>\n                  <option value=\"in-progress\">In Progress</option>\n                  <option value=\"completed\">Completed</option>\n                </select>\n              </div>\n\n              <div className=\"task-form-group\">\n                <label className=\"form-label\">Deadline</label>\n                <input\n                  type=\"datetime-local\"\n                  className=\"form-control\"\n                  value={tempDeadline ? formatDateTimeLocal(tempDeadline) : \"\"}\n                  onChange={(e) => setTempDeadline(e.target.value)}\n                />\n              </div>\n\n              {isDeadlineInFuture && (\n                <div className=\"task-form-group full-width\">\n                  <TaskReminders\n                    tempDeadline={tempDeadline}\n                    tempReminders={tempReminders}\n                    setTempReminders={setTempReminders}\n                    theme={theme}\n                    ALL_INTERVALS={ALL_INTERVALS}\n                    formatHoursLabel={formatHoursLabel}\n                  />\n                </div>\n              )}\n            </div>\n          ) : (\n            <>\n              <h5 className=\"task-title\" style={{ color: stripColor }}>\n                {tempTitle}\n              </h5>\n              <p className=\"task-description\">{tempDescription}</p>\n            </>\n          )}\n\n          <div className=\"task-metadata\">\n            <div className=\"task-metadata-item\">\n              <strong>Created</strong>\n              <span>{formatRelativeTime(task.createdAt)}</span>\n            </div>\n            <div className=\"task-metadata-item\">\n              <strong>Deadline</strong>\n              <span>\n                {task.deadline\n                  ? formatRelativeTime(task.deadline)\n                  : \"No deadline set\"}\n              </span>\n            </div>\n          </div>\n\n          {isEditing && (\n            <div className=\"task-actions\">\n              {!isNewTask && (\n                <button\n                  className={`btn ${\n                    theme === \"dark\" ? \"btn-outline-danger\" : \"btn-secondary\"\n                  }`}\n                  onClick={(e) => {\n                    e.stopPropagation();\n                    handleDelete();\n                  }}\n                  disabled={isLoading}\n                >\n                  {isLoading ? \"Deleting...\" : \"Delete\"}\n                </button>\n              )}\n              <button\n                className={`btn ${\n                  theme === \"dark\" ? \"btn-outline-light\" : \"btn-dark\"\n                }`}\n                onClick={(e) => {\n                  e.stopPropagation();\n                  handleSave();\n                }}\n                disabled={\n                  !tempTitle.trim() || !tempDescription.trim() || isLoading\n                }\n              >\n                {isLoading ? \"Saving...\" : \"Save\"}\n              </button>\n            </div>\n          )}\n\n          {/* ✅ Reminders now always show when available */}\n          {!isEditing && reminderSummary && (\n            <div\n              className=\"reminder-indicator\"\n              title={`Reminders: ${reminderSummary}`}\n            >\n              <i className=\"bi bi-clock\"></i>\n              <small>{reminderSummary}</small>\n            </div>\n          )}\n        </div>\n      </div>\n\n      <ConfirmationModal\n        theme={theme}\n        show={showDeleteModal}\n        title=\"Delete Task\"\n        message=\"Are you sure you want to delete this task? This action cannot be undone.\"\n        onConfirm={confirmDelete}\n        onCancel={() => setShowDeleteModal(false)}\n      />\n    </>\n  );\n};\n\nexport default TaskItem;\n","import React, { useState, useRef, useEffect } from \"react\";\nimport { normalizeRemindersBeforeSave } from \"../../utils/reminderHelpers\";\n\nimport {\n  sendAIChatMessage,\n  generateAITask,\n  updateTask,\n  deleteTask,\n  createTask,\n} from \"../../services/api\";\nimport ChatMessage from \"./ChatMessage\";\nimport TaskItem from \"../taskItem/TaskItem\";\nimport { useAuth } from \"../../context/AuthContext\";\n\nconst CHAT_HISTORY_KEY = \"ai_chat_history\";\n\nconst ChatMode = ({ setError, theme, refreshTasks }) => {\n  const { user } = useAuth();\n  \n  // Load chat history from localStorage on mount\n  const [chatMessages, setChatMessages] = useState(() => {\n    try {\n      const saved = localStorage.getItem(CHAT_HISTORY_KEY);\n      return saved ? JSON.parse(saved) : [];\n    } catch (error) {\n      console.error(\"Error loading chat history:\", error);\n      return [];\n    }\n  });\n  \n  const [chatInput, setChatInput] = useState(\"\");\n  const [isLoading, setIsLoading] = useState(false);\n  const [previewTask, setPreviewTask] = useState(null);\n  const chatEndRef = useRef(null);\n  const inputRef = useRef(null);\n\n  useEffect(() => {\n    if (inputRef.current) inputRef.current.focus();\n  }, []);\n\n  useEffect(() => {\n    chatEndRef.current?.scrollIntoView({ behavior: \"smooth\" });\n  }, [chatMessages, previewTask]);\n\n  // Save chat history to localStorage whenever it changes\n  useEffect(() => {\n    try {\n      localStorage.setItem(CHAT_HISTORY_KEY, JSON.stringify(chatMessages));\n    } catch (error) {\n      console.error(\"Error saving chat history:\", error);\n    }\n  }, [chatMessages]);\n\n  /* ====================================================\n     Send Message to AI (chatConversation)\n  ==================================================== */\n  const handleChatSend = async () => {\n    if (!chatInput.trim()) return;\n\n    const userMessage = {\n      role: \"user\",\n      content: chatInput.trim(),\n      timestamp: new Date().toISOString(),\n    };\n\n    setChatMessages((prev) => [...prev, userMessage]);\n    setChatInput(\"\");\n    setIsLoading(true);\n    setError(null);\n\n    const conversationHistory = chatMessages.map((msg) => ({\n      role: msg.role,\n      content: msg.content,\n    }));\n\n    const result = await sendAIChatMessage(\n      userMessage.content,\n      conversationHistory\n    );\n\n    setIsLoading(false);\n    if (!result.success) {\n      setError(result.error);\n      return;\n    }\n\n    const { reply, previewUpdate } = result.data;\n\n    if (previewUpdate && previewUpdate.reminders) {\n      previewUpdate.reminders = normalizeRemindersBeforeSave(\n        previewUpdate.reminders,\n        previewUpdate.deadline\n      );\n    }\n\n    // Add assistant's reply\n    setChatMessages((prev) => [\n      ...prev,\n      {\n        role: \"assistant\",\n        content: reply,\n        timestamp: new Date().toISOString(),\n      },\n    ]);\n\n    // If AI suggests update/delete – show inline TaskItem\n    if (previewUpdate) {\n      setPreviewTask({\n        ...previewUpdate,\n        _aiSuggested: true,\n        isUpdate:\n          previewUpdate.action === \"update\" ||\n          previewUpdate.action === \"delete\",\n        isNewTask: previewUpdate.action === \"create\" || previewUpdate.isNewTask,\n        createdAt: previewUpdate.createdAt || new Date().toISOString(),\n        updatedAt: new Date().toISOString(),\n      });\n    }\n  };\n\n  /* ====================================================\n     Generate new task from chat\n  ==================================================== */\n  const handleGenerateFromChat = async () => {\n    if (chatMessages.length === 0) {\n      setError(\"No conversation found to generate task from\");\n      return;\n    }\n\n    setIsLoading(true);\n    setError(null);\n\n    const conversationSummary = chatMessages\n      .map(\n        (msg) => `${msg.role === \"user\" ? \"User\" : \"Assistant\"}: ${msg.content}`\n      )\n      .join(\"\\n\");\n\n    const contextualPrompt = `Based on this conversation, create a task:\\n\\n${conversationSummary}\\n\\nCreate a detailed task with appropriate deadline and reminders.`;\n\n    const result = await generateAITask(contextualPrompt);\n    setIsLoading(false);\n\n    if (!result.success) {\n      setError(result.error);\n      return;\n    }\n\n    const aiTask = result.data;\n    setPreviewTask({\n      ...aiTask,\n      id: `temp-${Date.now()}`,\n      status: aiTask.status || \"not-started\",\n      createdAt: new Date().toISOString(),\n      updatedAt: new Date().toISOString(),\n      priority: 1,\n      _aiSuggested: true,\n      isNewTask: true,\n      action: \"create\",\n    });\n  };\n\n  /* ====================================================\n     Confirm or Cancel AI Update / Delete\n  ==================================================== */\n  const handleConfirmUpdate = async (task) => {\n    try {\n      if (!task) return;\n      setIsLoading(true);\n      setError(null);\n\n      // Normalize reminders before saving\n      const normalizedReminders = normalizeRemindersBeforeSave(\n        task.reminders || [],\n        task.deadline\n      );\n\n      let resultMessage = \"\";\n\n      if (task.action === \"delete\") {\n        await deleteTask(task.id);\n        resultMessage = `🗑️ Deleted task \"${task.title}\".`;\n      } else if (task.action === \"create\") {\n        await createTask({\n          title: task.title,\n          description: task.description,\n          status: task.status,\n          deadline: task.deadline,\n          reminders: normalizedReminders,\n        });\n        resultMessage = `✨ Created new task \"${task.title}\".`;\n      } else {\n        await updateTask(task.id, {\n          title: task.title,\n          description: task.description,\n          status: task.status,\n          deadline: task.deadline,\n          reminders: normalizedReminders,\n        });\n        resultMessage = `✅ Updated task \"${task.title}\".`;\n      }\n\n      await refreshTasks();\n      setPreviewTask(null);\n      setChatMessages((prev) => [\n        ...prev,\n        {\n          role: \"assistant\",\n          content: resultMessage,\n          timestamp: new Date().toISOString(),\n        },\n      ]);\n    } catch (error) {\n      console.error(\"Error applying AI update:\", error);\n      setError(\"Failed to apply update.\");\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleCancelPreview = () => setPreviewTask(null);\n\n  /* ====================================================\n     Helpers\n  ==================================================== */\n  const resetChat = () => {\n    setChatMessages([]);\n    setError(null);\n    setPreviewTask(null);\n    try {\n      localStorage.removeItem(CHAT_HISTORY_KEY);\n    } catch (error) {\n      console.error(\"Error clearing chat history:\", error);\n    }\n  };\n\n  const handleKeyPress = (e) => {\n    if (e.key === \"Enter\" && !e.shiftKey) {\n      e.preventDefault();\n      handleChatSend();\n    }\n  };\n\n  /* ====================================================\n     RENDER\n  ==================================================== */\n  return (\n    <div className=\"chat-mode\">\n      <div className=\"chat-messages\">\n        {/* Empty Chat State */}\n        {chatMessages.length === 0 && !previewTask ? (\n          <div className=\"chat-empty-state\">\n            <i className=\"bi bi-chat-heart\"></i>\n            <p>Start a conversation with AI</p>\n            <small>Ask questions or describe your task step by step</small>\n          </div>\n        ) : (\n          chatMessages.map((msg, index) => (\n            <ChatMessage key={index} msg={msg} user={user} theme={theme} />\n          ))\n        )}\n\n        {/* Inline Task Preview using TaskItem */}\n        {previewTask && (\n          <div className=\"chat-message assistant\">\n            <div className=\"message-avatar\">\n              <i className=\"bi bi-robot\"></i>\n            </div>\n            <div className=\"message-content w-100\">\n              {previewTask.action === \"delete\" ? (\n                <div\n                  className={`ai-delete-preview p-3 rounded ${\n                    theme === \"dark\"\n                      ? \"bg-dark text-light\"\n                      : \"bg-light text-dark\"\n                  }`}\n                >\n                  <h6 className=\"mb-2\">\n                    🗑️ Confirm delete: <strong>{previewTask.title}</strong>?\n                  </h6>\n                  <div className=\"d-flex gap-2\">\n                    <button\n                      className=\"btn btn-danger btn-sm\"\n                      onClick={() => handleConfirmUpdate(previewTask)}\n                      disabled={isLoading}\n                    >\n                      {isLoading ? \"Deleting...\" : \"Delete\"}\n                    </button>\n                    <button\n                      className=\"btn btn-secondary btn-sm\"\n                      onClick={handleCancelPreview}\n                      disabled={isLoading}\n                    >\n                      Cancel\n                    </button>\n                  </div>\n                </div>\n              ) : (\n                <TaskItem\n                  theme={theme}\n                  task={{\n                    ...previewTask,\n                    title: previewTask.title || \"\",\n                    description: previewTask.description || \"\",\n                    reminders: Array.isArray(previewTask.reminders)\n                      ? previewTask.reminders\n                      : [],\n                  }}\n                  isNewTask={true}\n                  onSave={handleConfirmUpdate}\n                  onCancel={handleCancelPreview}\n                />\n              )}\n            </div>\n          </div>\n        )}\n\n        {/* Typing indicator */}\n        {isLoading && (\n          <div className=\"chat-message assistant\">\n            <div className=\"message-avatar\">\n              <i className=\"bi bi-robot\"></i>\n            </div>\n            <div className=\"message-content\">\n              <div className=\"typing-indicator\">\n                <span></span>\n                <span></span>\n                <span></span>\n              </div>\n            </div>\n          </div>\n        )}\n\n        <div ref={chatEndRef} />\n      </div>\n\n      {/* Chat Input */}\n      <div className=\"chat-input-container\">\n        <input\n          ref={inputRef}\n          type=\"text\"\n          className=\"form-control\"\n          value={chatInput}\n          onChange={(e) => setChatInput(e.target.value)}\n          onKeyDown={handleKeyPress}\n          placeholder=\"Type your message...\"\n          disabled={isLoading}\n        />\n        <button\n          className=\"send-button\"\n          onClick={handleChatSend}\n          disabled={!chatInput.trim() || isLoading}\n        >\n          <i className=\"bi bi-send-fill\"></i>\n        </button>\n      </div>\n\n      {/* Chat Footer Actions */}\n      <div className=\"chat-actions\">\n        <button\n          className=\"btn btn-sm btn-outline-secondary\"\n          onClick={resetChat}\n          disabled={isLoading || chatMessages.length === 0}\n        >\n          <i className=\"bi bi-arrow-clockwise me-1\"></i> Clear Chat\n        </button>\n        <button\n          className=\"btn btn-sm btn-primary\"\n          onClick={handleGenerateFromChat}\n          disabled={isLoading || chatMessages.length === 0}\n        >\n          <i className=\"bi bi-magic me-1\"></i> Generate Task\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport default ChatMode;","import TaskItem from \"../taskItem/TaskItem\";\n\nconst TaskPreviewModal = ({ theme, task, onClose, onSave }) => (\n  <div className=\"ai-preview-overlay\" onClick={onClose}>\n    <div className=\"ai-preview-modal\" onClick={(e) => e.stopPropagation()}>\n      <h5 className=\"mb-3\">\n        <i className=\"bi bi-eye\"></i> Task Preview\n      </h5>\n\n      <TaskItem\n        theme={theme}\n        task={task}\n        isNewTask={true}\n        onSave={onSave}\n        onCancel={onClose}\n      />\n\n      <div className=\"text-end mt-2\">\n        <button className=\"btn btn-secondary\" onClick={onClose}>\n          Cancel\n        </button>\n      </div>\n    </div>\n  </div>\n);\n\nexport default TaskPreviewModal;\n","import { useState, useEffect, useCallback } from \"react\";\nimport QuickMode from \"./QuickMode\";\nimport ChatMode from \"./ChatMode\";\nimport TaskPreviewModal from \"./TaskPreviewModal\";\nimport \"./Styles/AIChatModal.css\";\n\nconst AIChatModal = ({\n  show,\n  onClose,\n  onTaskGenerated,\n  theme,\n  refreshTasks,\n}) => {\n  const [mode, setMode] = useState(\"quick\");\n  const [previewTask, setPreviewTask] = useState(null);\n  const [error, setError] = useState(null);\n  const [isClosing, setIsClosing] = useState(false);\n\n  // Load last used mode from localStorage\n  useEffect(() => {\n    try {\n      const savedMode = localStorage.getItem(\"ai_chat_mode\");\n      if (savedMode && (savedMode === \"quick\" || savedMode === \"chat\")) {\n        setMode(savedMode);\n      }\n    } catch (error) {\n      console.error(\"Error loading chat mode:\", error);\n    }\n  }, []);\n\n  // Save mode preference when it changes\n  useEffect(() => {\n    try {\n      localStorage.setItem(\"ai_chat_mode\", mode);\n    } catch (error) {\n      console.error(\"Error saving chat mode:\", error);\n    }\n  }, [mode]);\n\n  const handleClose = useCallback(() => {\n    setIsClosing(true);\n    setTimeout(() => {\n      setIsClosing(false);\n      setError(null);\n      onClose();\n    }, 250);\n  }, [onClose]);\n\n  // Handle ESC key to close modal\n  useEffect(() => {\n    const handleEscape = (e) => {\n      if (e.key === \"Escape\" && show && !previewTask) {\n        handleClose();\n      }\n    };\n\n    if (show) {\n      document.addEventListener(\"keydown\", handleEscape);\n      document.body.style.overflow = \"hidden\";\n    }\n\n    return () => {\n      document.removeEventListener(\"keydown\", handleEscape);\n      document.body.style.overflow = \"unset\";\n    };\n  }, [show, previewTask, handleClose]);\n\n  const handleOverlayClick = (e) => {\n    if (e.target === e.currentTarget && !previewTask) {\n      handleClose();\n    }\n  };\n\n  if (!show && !isClosing) return null;\n\n  return (\n    <div\n      className={`ai-modal-overlay ${isClosing ? \"closing\" : \"\"}`}\n      onClick={handleOverlayClick}\n    >\n      <div\n        className={`ai-modal-content ${theme === \"dark\" ? \"dark-mode\" : \"\"} ${\n          isClosing ? \"closing\" : \"\"\n        }`}\n        onClick={(e) => e.stopPropagation()}\n      >\n        {/* Header */}\n        <div className=\"ai-modal-header\">\n          <h3>\n            <i className=\"bi bi-robot\"></i> AI Task Assistant\n          </h3>\n          <button\n            className=\"close-button\"\n            onClick={handleClose}\n            aria-label=\"Close AI Assistant\"\n          >\n            <i className=\"bi bi-x-lg\"></i>\n          </button>\n        </div>\n\n        {/* Mode Selector */}\n        <div className=\"ai-mode-selector\">\n          <button\n            className={`mode-button ${mode === \"quick\" ? \"active\" : \"\"}`}\n            onClick={() => setMode(\"quick\")}\n            aria-pressed={mode === \"quick\"}\n          >\n            <i className=\"bi bi-lightning-charge\"></i> Quick\n          </button>\n          <button\n            className={`mode-button ${mode === \"chat\" ? \"active\" : \"\"}`}\n            onClick={() => setMode(\"chat\")}\n            aria-pressed={mode === \"chat\"}\n          >\n            <i className=\"bi bi-chat-dots\"></i> Chat\n          </button>\n        </div>\n\n        {/* Error Banner */}\n        {error && (\n          <div className=\"error-banner\">\n            <i className=\"bi bi-exclamation-triangle\"></i> {error}\n            <button\n              onClick={() => setError(null)}\n              style={{\n                marginLeft: \"auto\",\n                background: \"none\",\n                border: \"none\",\n                color: \"inherit\",\n                cursor: \"pointer\",\n                padding: \"0 4px\",\n              }}\n              aria-label=\"Dismiss error\"\n            >\n              <i className=\"bi bi-x-lg\"></i>\n            </button>\n          </div>\n        )}\n\n        {/* Mode Content */}\n        {mode === \"quick\" ? (\n          <QuickMode\n            setError={setError}\n            setPreviewTask={setPreviewTask}\n            onTaskGenerated={onTaskGenerated}\n            onClose={handleClose}\n            theme={theme}\n          />\n        ) : (\n          <ChatMode\n            setError={setError}\n            theme={theme}\n            refreshTasks={refreshTasks}\n            onClose={handleClose}\n          />\n        )}\n      </div>\n\n      {/* Preview Modal */}\n      {previewTask && (\n        <TaskPreviewModal\n          theme={theme}\n          task={previewTask}\n          onClose={() => setPreviewTask(null)}\n          onSave={(task) => {\n            onTaskGenerated(task);\n            setPreviewTask(null);\n            handleClose();\n          }}\n        />\n      )}\n    </div>\n  );\n};\n\nexport default AIChatModal;\n","import React, { useState, useEffect, useCallback } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { fetchTasks, updateTaskPriority } from \"../services/api\";\nimport { useAuth } from \"../context/AuthContext\";\nimport TaskCard from \"./taskItem/TaskCard\";\nimport AIChatModal from \"./AIChatModal/AIChatModal\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport \"../Styles/TaskList.css\";\n\nimport {\n  DndContext,\n  closestCenter,\n  PointerSensor,\n  useSensor,\n  useSensors,\n  DragOverlay,\n  MouseSensor,\n  TouchSensor,\n} from \"@dnd-kit/core\";\nimport {\n  SortableContext,\n  arrayMove,\n  useSortable,\n  rectSortingStrategy,\n} from \"@dnd-kit/sortable\";\nimport { CSS } from \"@dnd-kit/utilities\";\n\n// ---------- Sortable Task Card ----------\nconst SortableTask = ({ task, theme }) => {\n  const {\n    attributes,\n    listeners,\n    setNodeRef,\n    transform,\n    transition,\n    isDragging,\n  } = useSortable({\n    id: task.id,\n    transition: {\n      duration: 250,\n      easing: \"cubic-bezier(0.25, 0.8, 0.25, 1)\",\n    },\n  });\n\n  const style = {\n    transform: CSS.Transform.toString(transform),\n    transition:\n      transition || \"transform 250ms cubic-bezier(0.25, 0.8, 0.25, 1)\",\n    opacity: isDragging ? 0 : 1,\n    cursor: \"grab\",\n    // FIXED: Changed from \"none\" to \"manipulation\" to allow scrolling\n    touchAction: \"manipulation\",\n  };\n\n  return (\n    <div ref={setNodeRef} style={style} {...attributes} {...listeners}>\n      <TaskCard theme={theme} task={task} />\n    </div>\n  );\n};\n\n// ---------- Main TaskList Component ----------\nconst TaskList = ({ theme }) => {\n  const navigate = useNavigate();\n  const { user, logout } = useAuth();\n  const [tasks, setTasks] = useState(null);\n  const [showAIModal, setShowAIModal] = useState(false);\n  const [activeId, setActiveId] = useState(null);\n\n  // IMPROVED: Better touch sensor configuration for mobile\n  const sensors = useSensors(\n    useSensor(MouseSensor, {\n      activationConstraint: {\n        distance: 10,\n      },\n    }),\n    useSensor(TouchSensor, {\n      activationConstraint: {\n        delay: 200, // Reduced from 250ms for better responsiveness\n        tolerance: 5, // Reduced from 8 for more precise control\n      },\n    }),\n    useSensor(PointerSensor, {\n      activationConstraint: {\n        distance: 10,\n      },\n    })\n  );\n\n  const loadTasks = useCallback(async () => {\n    if (user) {\n      try {\n        const response = await fetchTasks();\n        setTasks(response.data);\n      } catch (error) {\n        console.error(\"Error loading tasks:\", error);\n        if (error.response && error.response.status === 403) logout();\n      }\n    }\n  }, [user, logout]);\n\n  useEffect(() => {\n    loadTasks();\n  }, [loadTasks]);\n\n  const refreshTasks = async () => {\n    try {\n      const response = await fetchTasks();\n      setTasks(response.data);\n      return response.data;\n    } catch (error) {\n      console.error(\"Error refreshing tasks:\", error);\n    }\n  };\n\n  // ---------- Drag & Drop ----------\n  const handleDragStart = (event) => {\n    setActiveId(event.active.id);\n  };\n\n  const handleDragEnd = async (event) => {\n    const { active, over } = event;\n    setActiveId(null);\n\n    if (!over || active.id === over.id) return;\n\n    setTasks((prevTasks) => {\n      const oldIndex = prevTasks.findIndex((t) => t.id === active.id);\n      const newIndex = prevTasks.findIndex((t) => t.id === over.id);\n\n      if (oldIndex === -1 || newIndex === -1) return prevTasks;\n\n      const reordered = arrayMove(prevTasks, oldIndex, newIndex);\n\n      // Update priorities in the backend\n      const updatePromises = reordered.map((task, idx) => {\n        const newPriority = idx + 1;\n        if (task.priority !== newPriority) {\n          return updateTaskPriority(task.id, newPriority).catch((err) => {\n            console.error(`Error updating priority for task ${task.id}:`, err);\n          });\n        }\n        return Promise.resolve();\n      });\n\n      Promise.all(updatePromises);\n\n      // Return reordered array with updated priorities\n      return reordered.map((task, idx) => ({\n        ...task,\n        priority: idx + 1,\n      }));\n    });\n  };\n\n  const handleDragCancel = () => {\n    setActiveId(null);\n  };\n\n  // ---------- Task Management ----------\n  const handleAddTask = () => {\n    navigate(\"/tasks/new/edit\");\n  };\n\n  const handleAITaskGenerated = (aiGeneratedTask) => {\n    // Navigate to editor with task data\n    navigate(\"/tasks/new/edit\", { state: { task: aiGeneratedTask } });\n  };\n\n  // ---------- Shimmer Loader ----------\n  const renderShimmerLoader = () => (\n    <div className=\"container mt-5\">\n      <div className=\"task-container\">\n        <div className=\"card-body p-3\">\n          <div className=\"d-flex flex-row justify-content-between align-items-center mb-3 header-container\">\n            <h2 className=\"card-title mb-0\">Your Tasks</h2>\n            <div className=\"d-flex gap-2 button-group\">\n              <button\n                className={`btn btn-outline-${\n                  theme === \"dark\" ? \"light\" : \"dark\"\n                } ai-button`}\n                disabled\n              >\n                <i className=\"bi bi-robot me-2\"></i>\n                <span className=\"button-text\">AI Assistant</span>\n              </button>\n\n              <button\n                className={`btn btn-outline-${\n                  theme === \"dark\" ? \"light\" : \"dark\"\n                } d-flex align-items-center gap-2`}\n                disabled\n              >\n                <i className=\"bi bi-plus-circle\"></i>\n                <span className=\"button-text\">New Task</span>\n              </button>\n            </div>\n          </div>\n\n          <div className=\"shimmer-list\">\n            {Array.from({ length: 5 }).map((_, index) => (\n              <div key={index} className=\"shimmer-task-item\">\n                <div className=\"shimmer-task-header\"></div>\n                <div className=\"shimmer-task-body\"></div>\n              </div>\n            ))}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n\n  if (!tasks) return renderShimmerLoader();\n\n  // Sort tasks by priority\n  const sortedTasks = [...tasks].sort((a, b) => a.priority - b.priority);\n  const activeTask = activeId ? tasks.find((t) => t.id === activeId) : null;\n\n  // ---------- Render ----------\n  return (\n    <>\n      <div className=\"container mt-5\">\n        <div className=\"task-container\">\n          <div className=\"card-body p-3\">\n            <div className=\"d-flex flex-row justify-content-between align-items-center mb-3 header-container\">\n              <h2 className=\"card-title mb-0\">Your Tasks</h2>\n              <div className=\"d-flex gap-2 button-group\">\n                <button\n                  className={`btn btn-outline-${\n                    theme === \"dark\" ? \"light\" : \"dark\"\n                  } ai-button`}\n                  onClick={() => setShowAIModal(true)}\n                >\n                  <i className=\"bi bi-robot me-2\"></i>\n                  <span className=\"button-text\">AI Assistant</span>\n                </button>\n\n                <button\n                  className={`btn btn-outline-${\n                    theme === \"dark\" ? \"light\" : \"dark\"\n                  } d-flex align-items-center gap-2`}\n                  onClick={handleAddTask}\n                >\n                  <i className=\"bi bi-plus-circle\"></i>\n                  <span className=\"button-text\">New Task</span>\n                </button>\n              </div>\n            </div>\n\n            {tasks.length === 0 ? (\n              <div className=\"empty-state\">\n                <i className=\"bi bi-clipboard-check empty-state-icon\"></i>\n                <p\n                  className={`text-${\n                    theme === \"dark\" ? \"light\" : \"muted\"\n                  } mb-2`}\n                >\n                  No tasks yet\n                </p>\n                <small className=\"text-muted\">\n                  Create your first task or use AI Assistant to get started\n                </small>\n              </div>\n            ) : (\n              <DndContext\n                sensors={sensors}\n                collisionDetection={closestCenter}\n                onDragStart={handleDragStart}\n                onDragEnd={handleDragEnd}\n                onDragCancel={handleDragCancel}\n              >\n                <SortableContext\n                  items={sortedTasks.map((t) => t.id)}\n                  strategy={rectSortingStrategy}\n                >\n                  <div className=\"task-list\">\n                    {sortedTasks.map((task) => (\n                      <SortableTask key={task.id} task={task} theme={theme} />\n                    ))}\n                  </div>\n                </SortableContext>\n\n                <DragOverlay\n                  adjustScale={false}\n                  dropAnimation={{\n                    duration: 300,\n                    easing: \"cubic-bezier(0.25, 0.8, 0.25, 1)\",\n                  }}\n                  style={{\n                    cursor: \"grabbing\",\n                  }}\n                >\n                  {activeTask ? (\n                    <div\n                      style={{\n                        transform: \"scale(1.03) rotate(2deg)\",\n                        cursor: \"grabbing\",\n                        boxShadow:\n                          \"0 12px 24px rgba(0, 0, 0, 0.25), 0 4px 8px rgba(0, 0, 0, 0.15)\",\n                        borderRadius: \"10px\",\n                        transition:\n                          \"all 150ms cubic-bezier(0.25, 0.8, 0.25, 1)\",\n                      }}\n                    >\n                      <TaskCard theme={theme} task={activeTask} />\n                    </div>\n                  ) : null}\n                </DragOverlay>\n              </DndContext>\n            )}\n          </div>\n        </div>\n      </div>\n\n      <AIChatModal\n        show={showAIModal}\n        onClose={() => setShowAIModal(false)}\n        onTaskGenerated={handleAITaskGenerated}\n        theme={theme}\n        refreshTasks={refreshTasks}\n      />\n    </>\n  );\n};\n\nexport default TaskList;\n","import React from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { formatRelativeTime } from \"../../utils/dateUtils\";\nimport \"./Styles/TaskCard.css\";\n\nconst TaskCard = ({ theme, task, demoMode = false }) => {\n  const navigate = useNavigate();\n\n  const handleClick = () => {\n    if (!demoMode) {\n      navigate(`/tasks/${task.id}/edit`);\n    }\n  };\n\n  const getStripColor = (status) => {\n    switch (status) {\n      case \"completed\":\n        return \"#007a00\";\n      case \"in-progress\":\n        return \"#daa520\";\n      default:\n        return \"#a00000\";\n    }\n  };\n\n  const stripColor = getStripColor(task.status);\n\n  const getReminderSummary = () => {\n    if (!task.reminders || task.reminders.length === 0) return null;\n\n    const dailyCount = task.reminders.filter((r) => r.type === \"daily\").length;\n    const weeklyCount = task.reminders.filter(\n      (r) => r.type === \"weekly\"\n    ).length;\n    const oneTimeCount = task.reminders.filter(\n      (r) => r.type === \"one-time\" || !r.type\n    ).length;\n\n    const parts = [];\n    if (dailyCount > 0) parts.push(`Daily (${dailyCount})`);\n    if (weeklyCount > 0) parts.push(`Weekly (${weeklyCount})`);\n    if (oneTimeCount > 0) parts.push(`One-time (${oneTimeCount})`);\n\n    return parts.length > 0 ? parts.join(\", \") : null;\n  };\n\n  const reminderSummary = getReminderSummary();\n\n  return (\n    <div\n      className={`task-card ${theme === \"dark\" ? \"dark\" : \"\"}`}\n      onClick={handleClick}\n    >\n      <div className=\"task-strip\" style={{ backgroundColor: stripColor }}></div>\n\n      <div className=\"task-card-content\">\n        <i\n          className={`bi ${\n            task.status === \"completed\"\n              ? \"bi-check-circle\"\n              : task.status === \"in-progress\"\n              ? \"bi-hourglass\"\n              : \"bi-ban\"\n          } status-icon`}\n          style={{ color: stripColor }}\n        />\n\n        <h5 className=\"task-title\" style={{ color: stripColor }}>\n          {task.title}\n        </h5>\n        <p className=\"task-description\">{task.description}</p>\n\n        <div className=\"task-metadata\">\n          <div className=\"task-metadata-item\">\n            <strong>Created</strong>\n            <span>{formatRelativeTime(task.createdAt)}</span>\n          </div>\n          <div className=\"task-metadata-item\">\n            <strong>Deadline</strong>\n            <span>\n              {task.deadline\n                ? formatRelativeTime(task.deadline)\n                : \"No deadline set\"}\n            </span>\n          </div>\n        </div>\n\n        {reminderSummary && (\n          <div\n            className=\"reminder-indicator\"\n            title={`Reminders: ${reminderSummary}`}\n          >\n            <i className=\"bi bi-clock\"></i>\n            <small>{reminderSummary}</small>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default TaskCard;\n","import \"./Styles/ReminderCheckbox.css\";\n\nconst ReminderCheckbox = ({\n  value,\n  label,\n  checked,\n  onChange,\n  className = \"\",\n  disabled = false,\n}) => (\n  <div className={`d-inline-block ${className}`}>\n    <label\n      className={`reminder-checkbox-label d-inline-flex align-items-center ${\n        disabled ? \"disabled\" : \"\"\n      }`}\n    >\n      <input\n        type=\"checkbox\"\n        className=\"form-check-input me-2\"\n        checked={checked}\n        onChange={(e) => !disabled && onChange(e.target.checked)}\n        disabled={disabled}\n        aria-label={`Set reminder for ${label}`}\n        aria-describedby={`reminder-${value}-desc`}\n      />\n      <span id={`reminder-${value}-desc`}>{label}</span>\n    </label>\n  </div>\n);\n\nexport default ReminderCheckbox;\n","import React, { useState } from \"react\";\nimport ReminderCheckbox from \"./ReminderCheckbox\";\nimport { formatDateTimeLocal } from \"../../utils/dateUtils\";\nimport \"./Styles/TaskReminders.css\";\n\nexport const formatHoursLabel = (h) => {\n  if (h < 1) return `${Math.round(h * 60)} min`;\n  if (h < 24)\n    return `${h % 1 === 0 ? h : h.toFixed(1)} hr${h !== 1 ? \"s\" : \"\"}`;\n  const days = h / 24;\n  if (days < 7)\n    return `${days % 1 === 0 ? days : days.toFixed(1)} day${\n      days !== 1 ? \"s\" : \"\"\n    }`;\n  const weeks = days / 7;\n  return `${weeks % 1 === 0 ? weeks : weeks.toFixed(1)} week${\n    weeks !== 1 ? \"s\" : \"\"\n  }`;\n};\n\nconst TaskReminders = ({\n  tempDeadline,\n  tempReminders,\n  setTempReminders,\n  theme,\n  ALL_INTERVALS,\n}) => {\n  const [customReminder, setCustomReminder] = useState(\"\");\n  const [isOpen, setIsOpen] = useState(false);\n\n  const now = new Date();\n  const deadlineDate = tempDeadline ? new Date(tempDeadline) : null;\n  const diffInHours =\n    deadlineDate && deadlineDate > now\n      ? (deadlineDate - now) / (1000 * 60 * 60)\n      : 0;\n\n  // Helper to check if reminder is one-time (not daily/weekly)\n  const isOneTimeReminder = (r) => {\n    return !r.type || r.type === \"one-time\";\n  };\n\n  // Check if daily reminders are active\n  const hasDailyReminders = tempReminders.some((r) => r.type === \"daily\");\n\n  // Check if weekly reminders are active\n  const hasWeeklyReminders = tempReminders.some((r) => r.type === \"weekly\");\n\n  // Toggle daily reminders\n  const toggleDailyReminders = (checked) => {\n    setTempReminders((prev) => {\n      if (checked) {\n        // Remove existing daily reminders and add a single daily reminder template\n        const withoutDaily = prev.filter((r) => r.type !== \"daily\");\n        return [\n          ...withoutDaily,\n          { remindBefore: 24, sent: false, type: \"daily\" },\n        ];\n      } else {\n        // Remove all daily reminders\n        return prev.filter((r) => r.type !== \"daily\");\n      }\n    });\n  };\n\n  // Toggle weekly reminders\n  const toggleWeeklyReminders = (checked) => {\n    setTempReminders((prev) => {\n      if (checked) {\n        // Remove existing weekly reminders and add a single weekly reminder template\n        const withoutWeekly = prev.filter((r) => r.type !== \"weekly\");\n        return [\n          ...withoutWeekly,\n          { remindBefore: 168, sent: false, type: \"weekly\" },\n        ];\n      } else {\n        // Remove all weekly reminders\n        return prev.filter((r) => r.type !== \"weekly\");\n      }\n    });\n  };\n\n  // Default intervals (e.g. 1 hr, 1 day, 1 week) - these are one-time reminders\n  const defaultIntervals = ALL_INTERVALS.filter((i) => i.value <= diffInHours);\n\n  // Custom reminders - one-time reminders that don't match default intervals\n  const customIntervals = tempReminders\n    .filter((r) => {\n      if (!isOneTimeReminder(r)) return false;\n      if (r.remindBefore > diffInHours) return false;\n\n      // Check if this matches any default interval\n      const matchesDefault = ALL_INTERVALS.some(\n        (ai) => Math.abs(ai.value - r.remindBefore) < 0.01\n      );\n\n      return !matchesDefault;\n    })\n    .map((r) => {\n      // If has customDate, show formatted date\n      if (r.customDate) {\n        try {\n          const date = new Date(r.customDate);\n          return {\n            value: r.remindBefore,\n            label: date.toLocaleString(),\n            customDate: r.customDate,\n          };\n        } catch (err) {\n          console.warn(\"Error formatting customDate:\", err);\n        }\n      }\n\n      // Otherwise calculate date from remindBefore\n      if (deadlineDate) {\n        const reminderDate = new Date(\n          deadlineDate.getTime() - r.remindBefore * 3600000\n        );\n        return {\n          value: r.remindBefore,\n          label: reminderDate.toLocaleString(),\n        };\n      }\n\n      // Fallback to hours label\n      return {\n        value: r.remindBefore,\n        label: formatHoursLabel(r.remindBefore),\n      };\n    });\n\n  // Toggle reminder\n  const toggleReminder = (value, checked) => {\n    setTempReminders((prev) => {\n      if (checked) {\n        // Check if already exists\n        const existing = prev.find(\n          (r) => isOneTimeReminder(r) && Math.abs(r.remindBefore - value) < 0.01\n        );\n\n        if (!existing) {\n          return [\n            ...prev,\n            { remindBefore: value, sent: false, type: \"one-time\" },\n          ];\n        }\n        return prev;\n      } else {\n        // Remove the reminder\n        return prev.filter(\n          (r) =>\n            !isOneTimeReminder(r) || Math.abs(r.remindBefore - value) >= 0.01\n        );\n      }\n    });\n  };\n\n  // Add custom reminder\n  const handleAddCustomReminder = () => {\n    if (!customReminder) return;\n\n    const selectedDate = new Date(customReminder);\n    if (isNaN(selectedDate.getTime())) {\n      console.warn(\"Invalid date selected\");\n      return;\n    }\n\n    if (!deadlineDate || selectedDate >= deadlineDate) {\n      console.warn(\"Custom reminder must be before deadline\");\n      return;\n    }\n\n    if (selectedDate <= now) {\n      console.warn(\"Custom reminder must be in the future\");\n      return;\n    }\n\n    const hours = (deadlineDate - selectedDate) / (1000 * 60 * 60);\n\n    if (hours > 0 && hours <= diffInHours) {\n      setTempReminders((prev) => {\n        // Check if similar reminder already exists\n        const exists = prev.some(\n          (r) => isOneTimeReminder(r) && Math.abs(r.remindBefore - hours) < 0.01\n        );\n\n        if (!exists) {\n          return [\n            ...prev,\n            {\n              remindBefore: hours,\n              sent: false,\n              type: \"one-time\",\n              customDate: selectedDate.toISOString(),\n            },\n          ];\n        }\n        return prev;\n      });\n      setCustomReminder(\"\");\n    }\n  };\n\n  // Calculate how many days/weeks until deadline\n  const maxDays = Math.floor(diffInHours / 24);\n  const maxWeeks = Math.floor(diffInHours / (24 * 7));\n\n  return (\n    <div className=\"task-reminders-container\">\n      {/* Dropdown Header Bar */}\n      <div className=\"reminders-dropdown\" onClick={() => setIsOpen(!isOpen)}>\n        <div className=\"reminders-dropdown-header\">\n          <h6>\n            <i className=\"bi bi-clock\"></i> Reminders\n            {tempReminders.length > 0 && (\n              <span className=\"reminder-count-badge\">\n                {tempReminders.length}\n              </span>\n            )}\n          </h6>\n          {isOpen ? (\n            <i className=\"bi bi-chevron-up\"></i>\n          ) : (\n            <i className=\"bi bi-chevron-down\"></i>\n          )}\n        </div>\n      </div>\n\n      {/* Collapsible Content */}\n      {isOpen && (\n        <div className=\"reminders-dropdown-content\">\n          {/* Recurring Reminders Section */}\n          {(maxDays > 0 || maxWeeks > 0) && (\n            <div className=\"recurring-reminders-section\">\n              <label className=\"reminder-section-label\">\n                <i className=\"bi bi-arrow-repeat\"></i> Recurring Reminders:\n              </label>\n              <div className=\"recurring-options\">\n                {maxDays > 0 && (\n                  <div className=\"recurring-option\">\n                    <input\n                      type=\"checkbox\"\n                      checked={hasDailyReminders}\n                      onChange={(e) => toggleDailyReminders(e.target.checked)}\n                      id=\"daily-reminders\"\n                    />\n                    <label htmlFor=\"daily-reminders\">\n                      Every Day (up to {maxDays} reminder\n                      {maxDays !== 1 ? \"s\" : \"\"})\n                    </label>\n                  </div>\n                )}\n                {maxWeeks > 0 && (\n                  <div className=\"recurring-option\">\n                    <input\n                      type=\"checkbox\"\n                      checked={hasWeeklyReminders}\n                      onChange={(e) => toggleWeeklyReminders(e.target.checked)}\n                      id=\"weekly-reminders\"\n                    />\n                    <label htmlFor=\"weekly-reminders\">\n                      Every Week (up to {maxWeeks} reminder\n                      {maxWeeks !== 1 ? \"s\" : \"\"})\n                    </label>\n                  </div>\n                )}\n              </div>\n            </div>\n          )}\n\n          {/* One-time Reminders Section */}\n          {defaultIntervals.length > 0 && (\n            <div className=\"reminder-section\">\n              <label className=\"reminder-section-label\">\n                <i className=\"bi bi-bell\"></i> One-time Reminders:\n              </label>\n              <div className=\"reminder-grid\">\n                {defaultIntervals.map((item) => {\n                  const existing = tempReminders.find(\n                    (r) =>\n                      isOneTimeReminder(r) &&\n                      Math.abs(r.remindBefore - item.value) < 0.01\n                  );\n                  const checked = !!existing;\n                  return (\n                    <ReminderCheckbox\n                      key={item.value}\n                      value={item.value}\n                      label={item.label}\n                      checked={checked}\n                      onChange={(checked) =>\n                        toggleReminder(item.value, checked)\n                      }\n                    />\n                  );\n                })}\n              </div>\n            </div>\n          )}\n\n          {/* Custom Reminder Section */}\n          <div className=\"custom-reminder-section\">\n            <label className=\"reminder-section-label\">\n              <i className=\"bi bi-calendar-plus\"></i> Add Custom Reminder:\n            </label>\n            <div className=\"custom-reminder-input-group\">\n              <input\n                type=\"datetime-local\"\n                value={customReminder}\n                onChange={(e) => setCustomReminder(e.target.value)}\n                min={formatDateTimeLocal(now.toISOString())}\n                max={\n                  tempDeadline ? formatDateTimeLocal(tempDeadline) : undefined\n                }\n              />\n              <button\n                className={`btn btn-sm ${\n                  theme === \"dark\" ? \"btn-outline-light\" : \"btn-outline-dark\"\n                }`}\n                onClick={handleAddCustomReminder}\n                disabled={!customReminder}\n              >\n                <i className=\"bi bi-plus-lg\"></i> Add\n              </button>\n            </div>\n          </div>\n\n          {/* Custom One-time Reminders Section */}\n          {customIntervals.length > 0 && (\n            <div className=\"reminder-section\">\n              <label className=\"reminder-section-label\">\n                <i className=\"bi bi-calendar-check\"></i> Custom One-time\n                Reminders:\n              </label>\n              <div className=\"reminder-grid\">\n                {customIntervals.map((item, index) => {\n                  const existing = tempReminders.find(\n                    (r) =>\n                      isOneTimeReminder(r) &&\n                      Math.abs(r.remindBefore - item.value) < 0.01\n                  );\n                  const checked = !!existing;\n                  return (\n                    <ReminderCheckbox\n                      key={item.customDate || `${item.value}-${index}`}\n                      value={item.value}\n                      label={item.label}\n                      checked={checked}\n                      onChange={(checked) =>\n                        toggleReminder(item.value, checked)\n                      }\n                    />\n                  );\n                })}\n              </div>\n            </div>\n          )}\n\n          {/* Active reminders summary */}\n          {tempReminders.length > 0 && (\n            <div className=\"active-reminders-summary\">\n              <small>\n                <i className=\"bi bi-info-circle\"></i> <strong>Active:</strong>\n                {hasDailyReminders && \" Daily\"}\n                {hasDailyReminders && hasWeeklyReminders && \",\"}\n                {hasWeeklyReminders && \" Weekly\"}\n                {(hasDailyReminders || hasWeeklyReminders) &&\n                  tempReminders.filter(isOneTimeReminder).length > 0 &&\n                  \",\"}\n                {tempReminders.filter(isOneTimeReminder).length > 0 &&\n                  ` ${tempReminders.filter(isOneTimeReminder).length} one-time`}\n              </small>\n            </div>\n          )}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default TaskReminders;\n","import axios from \"axios\";\n\nconst api = axios.create({\n  baseURL: \"https://task-manager-sigma-ashen.vercel.app/api\", // Replace with your backend URL\n  // baseURL: \"http://localhost:5001/api\", // Localhost for local development\n  headers: {\n    \"ngrok-skip-browser-warning\": \"true\",\n  },\n  timeout: 30000, // 30 second timeout\n});\n\napi.interceptors.request.use(\n  (config) => {\n    const token = localStorage.getItem(\"token\");\n    if (token) {\n      config.headers.Authorization = `Bearer ${token}`;\n    }\n    return config;\n  },\n  (error) => Promise.reject(error)\n);\n\n// Enhanced error handler\nconst handleApiError = (error) => {\n  if (error.response) {\n    // Server responded with error\n    return {\n      message: error.response.data?.error || \"An error occurred\",\n      status: error.response.status,\n    };\n  } else if (error.request) {\n    // Request made but no response\n    return {\n      message: \"No response from server. Please check your connection.\",\n      status: 0,\n    };\n  } else {\n    // Error setting up request\n    return {\n      message: error.message || \"An unexpected error occurred\",\n      status: -1,\n    };\n  }\n};\n\n// Task-related endpoints\nexport const fetchTasks = () => api.get(\"/tasks\");\nexport const fetchTaskById = (taskId) => api.get(`/tasks/${taskId}`);\nexport const createTask = (newTask) => api.post(\"/tasks\", newTask);\nexport const updateTask = (taskId, updatedTask) =>\n  api.put(`/tasks/${taskId}`, updatedTask);\nexport const deleteTask = (taskId) => api.delete(`/tasks/${taskId}`);\nexport const updateTaskPriority = (taskId, priority) =>\n  api.put(`/tasks/${taskId}/priority`, { priority });\n\n// Authentication-related endpoints\nexport const loginUser = (email, password) => {\n  return api.post(\"/auth/login\", { email, password });\n};\n\nexport const loginWithGoogle = async (authorizationCode) => {\n  return api.post(`/auth/google`, { code: authorizationCode });\n};\n\nexport const registerUser = (firstName, lastName, email, password) => {\n  return api.post(\"/auth/register\", { firstName, lastName, email, password });\n};\n\nexport const verifyRegistrationCode = (email, verificationCode) => {\n  return api.post(\"/auth/verify-registration\", { email, verificationCode });\n};\n\nexport const sendVerificationCode = (email) => {\n  return api.post(\"/auth/resend-verification\", { email });\n};\n\nexport const sendForgotPasswordRequest = (email) => {\n  return api.post(\"/auth/forgot-password\", { email });\n};\n\nexport const resetPassword = (email, verificationCode, newPassword) => {\n  return api.post(\"/auth/verify-code\", {\n    email,\n    verificationCode,\n    newPassword,\n  });\n};\n\nexport const changePassword = (currentPassword, newPassword) => {\n  return api.post(\"/auth/change-password\", { currentPassword, newPassword });\n};\n\nexport const verifyToken = () => api.get(\"/verify-token\");\n\n// Profile-related endpoints\nexport const getProfile = async () => {\n  try {\n    const response = await api.get(\"/profile\");\n    return response.data;\n  } catch (err) {\n    console.error(\"Error fetching profile:\", err);\n    throw err;\n  }\n};\n\nexport const updateProfile = async (formData) => {\n  try {\n    const response = await api.put(\"/profile\", formData, {\n      headers: {\n        \"Content-Type\": \"multipart/form-data\",\n      },\n    });\n    return response.data;\n  } catch (err) {\n    console.error(\"Error updating profile:\", err);\n    throw err;\n  }\n};\n\n// AI-related endpoints\nexport const generateAITask = async (prompt) => {\n  try {\n    const timezone = Intl.DateTimeFormat().resolvedOptions().timeZone;\n    const response = await api.post(\n      \"/ai/chat\",\n      { prompt },\n      { headers: { \"x-user-timezone\": timezone } }\n    );\n    return { success: true, data: response.data };\n  } catch (error) {\n    const errorInfo = handleApiError(error);\n    return { success: false, error: errorInfo.message };\n  }\n};\n\nexport const sendAIChatMessage = async (message, conversationHistory = []) => {\n  try {\n    const timezone = Intl.DateTimeFormat().resolvedOptions().timeZone;\n    const response = await api.post(\n      \"/ai/chat-conversation\",\n      { message, conversationHistory },\n      { headers: { \"x-user-timezone\": timezone } }\n    );\n    return { success: true, data: response.data };\n  } catch (error) {\n    const errorInfo = handleApiError(error);\n    return { success: false, error: errorInfo.message };\n  }\n};\n\nexport default api;\n","import { format } from \"date-fns\";\n\nexport const formatRelativeTime = (dateString) => {\n  const date = new Date(dateString);\n  const now = new Date();\n  const diffInSeconds = Math.floor((now - date) / 1000);\n  const justNowThreshold = 60;\n  if (diffInSeconds < 0) {\n    const futureDiff = Math.abs(diffInSeconds);\n    if (futureDiff < justNowThreshold) return \"Just now\";\n    if (futureDiff < 60) return `in ${futureDiff} second${futureDiff !== 1 ? \"s\" : \"\"}`;\n    if (futureDiff < 3600) return `in ${Math.ceil(futureDiff / 60)} minute${Math.ceil(futureDiff / 60) !== 1 ? \"s\" : \"\"}`;\n    if (futureDiff < 86400) return `in ${Math.ceil(futureDiff / 3600)} hour${Math.ceil(futureDiff / 3600) !== 1 ? \"s\" : \"\"}`;\n    if (futureDiff < 604800) return `in ${Math.ceil(futureDiff / 86400)} day${Math.ceil(futureDiff / 86400) !== 1 ? \"s\" : \"\"}`;\n    return format(date, \"MMM dd, yyyy\");\n  } else {\n    if (diffInSeconds < justNowThreshold) return \"Just now\";\n    if (diffInSeconds < 60) return `${diffInSeconds} second${diffInSeconds !== 1 ? \"s\" : \"\"} ago`;\n    if (diffInSeconds < 3600) return `${Math.floor(diffInSeconds / 60)} minute${Math.floor(diffInSeconds / 60) !== 1 ? \"s\" : \"\"} ago`;\n    if (diffInSeconds < 86400) return `${Math.floor(diffInSeconds / 3600)} hour${Math.floor(diffInSeconds / 3600) !== 1 ? \"s\" : \"\"} ago`;\n    if (diffInSeconds < 604800) {\n      const days = Math.floor(diffInSeconds / 86400);\n      return days === 1 ? \"Yesterday\" : `${days} days ago`;\n    }\n    return format(date, \"MMM dd, yyyy\");\n  }\n};\n\nexport const convertDateToWords = (dateString) => {\n  const [year, month, day] = dateString.split('-').map(Number);\n  const date = new Date(year, month - 1, day);\n  if (isNaN(date)) return \"Invalid Date\";\n  const options = { year: \"numeric\", month: \"long\", day: \"numeric\" };\n  return date.toLocaleString(\"en-US\", options);\n};\n\nexport const formatDateTimeLocal = (dateString) => {\n  const date = new Date(dateString);\n  const year = date.getFullYear();\n  const month = String(date.getMonth() + 1).padStart(2, \"0\");\n  const day = String(date.getDate()).padStart(2, \"0\");\n  const hours = String(date.getHours()).padStart(2, \"0\");\n  const minutes = String(date.getMinutes()).padStart(2, \"0\");\n  return `${year}-${month}-${day}T${hours}:${minutes}`;\n};"],"names":["_ref","theme","show","title","message","onConfirm","onCancel","_jsx","className","tabIndex","role","onClick","children","_jsxs","e","stopPropagation","type","concat","setError","onClose","navigate","useNavigate","quickPrompt","setQuickPrompt","useState","isLoading","setIsLoading","inputRef","useRef","useEffect","current","focus","handleQuickGenerate","async","trim","result","generateAITask","success","error","aiTask","data","newTask","description","status","deadline","reminders","state","task","ref","rows","value","onChange","target","onKeyDown","key","shiftKey","preventDefault","placeholder","disabled","map","text","_Fragment","normalizeRemindersBeforeSave","Array","isArray","deadlineDate","Date","r","remindBefore","customDate","isNaN","getTime","diffHours","_objectSpread","_user$firstName","_user$firstName$","_user$lastName","_user$lastName$","msg","user","userAvatar","avatar","displayInitials","firstName","toUpperCase","lastName","src","alt","style","width","height","borderRadius","objectFit","backgroundColor","color","fontWeight","display","alignItems","justifyContent","fontSize","content","split","part","index","test","match","marginLeft","marginTop","processedPart","segment","i","startsWith","endsWith","slice","formatMessageContent","timestamp","date","now","diffInHours","getDate","toLocaleTimeString","hour","minute","toLocaleDateString","month","day","formatTime","ALL_INTERVALS","label","formatHoursLabel","h","Math","round","Number","isInteger","setTasks","isNewTask","onSave","isEditing","setIsEditing","tempTitle","setTempTitle","tempDescription","setTempDescription","tempStatus","setTempStatus","tempDeadline","setTempDeadline","tempReminders","setTempReminders","showDeleteModal","setShowDeleteModal","cardRef","length","handleCancel","useCallback","id","handleClickOutside","contains","document","addEventListener","removeEventListener","stripColor","getStripColor","isDeadlineInFuture","reminderSummary","getReminderSummary","dailyCount","filter","weeklyCount","oneTimeCount","parts","push","join","formatDateTimeLocal","TaskReminders","formatRelativeTime","createdAt","JSON","stringify","finalReminders","hasDaily","some","hasWeekly","filteredReminders","maxDays","floor","sent","dayNumber","maxWeeks","week","weekNumber","regenerateRecurringReminders","updatedTaskData","toISOString","response","updateTask","prev","t","console","handleSave","ConfirmationModal","deleteTask","CHAT_HISTORY_KEY","refreshTasks","useAuth","chatMessages","setChatMessages","saved","localStorage","getItem","parse","chatInput","setChatInput","previewTask","setPreviewTask","chatEndRef","_chatEndRef$current","scrollIntoView","behavior","setItem","handleChatSend","userMessage","conversationHistory","sendAIChatMessage","reply","previewUpdate","_aiSuggested","isUpdate","action","updatedAt","handleConfirmUpdate","normalizedReminders","resultMessage","createTask","handleCancelPreview","ChatMessage","TaskItem","resetChat","removeItem","conversationSummary","contextualPrompt","priority","onTaskGenerated","mode","setMode","isClosing","setIsClosing","savedMode","handleClose","setTimeout","handleEscape","body","overflow","currentTarget","background","border","cursor","padding","QuickMode","ChatMode","TaskPreviewModal","SortableTask","attributes","listeners","setNodeRef","transform","transition","isDragging","useSortable","duration","easing","CSS","Transform","toString","opacity","touchAction","TaskCard","_ref2","logout","tasks","showAIModal","setShowAIModal","activeId","setActiveId","sensors","useSensors","useSensor","MouseSensor","activationConstraint","distance","TouchSensor","delay","tolerance","PointerSensor","loadTasks","fetchTasks","from","_","sortedTasks","sort","a","b","activeTask","find","handleAddTask","DndContext","collisionDetection","closestCenter","onDragStart","event","active","onDragEnd","over","prevTasks","oldIndex","findIndex","newIndex","reordered","arrayMove","updatePromises","idx","newPriority","updateTaskPriority","catch","err","Promise","resolve","all","onDragCancel","handleDragCancel","SortableContext","items","strategy","rectSortingStrategy","DragOverlay","adjustScale","dropAnimation","boxShadow","AIChatModal","aiGeneratedTask","demoMode","handleClick","checked","toFixed","days","weeks","customReminder","setCustomReminder","isOpen","setIsOpen","isOneTimeReminder","hasDailyReminders","hasWeeklyReminders","defaultIntervals","customIntervals","ai","abs","toLocaleString","warn","reminderDate","toggleReminder","toggleDailyReminders","htmlFor","toggleWeeklyReminders","item","ReminderCheckbox","min","max","undefined","handleAddCustomReminder","selectedDate","hours","api","axios","create","baseURL","headers","timeout","interceptors","request","use","config","token","Authorization","reject","handleApiError","_error$response$data","get","fetchTaskById","taskId","post","updatedTask","put","delete","loginUser","email","password","loginWithGoogle","code","authorizationCode","registerUser","verifyRegistrationCode","verificationCode","sendVerificationCode","sendForgotPasswordRequest","resetPassword","newPassword","changePassword","currentPassword","getProfile","updateProfile","formData","timezone","Intl","DateTimeFormat","resolvedOptions","timeZone","prompt","arguments","dateString","diffInSeconds","futureDiff","ceil","format","convertDateToWords","year","getFullYear","String","getMonth","padStart","getHours","minutes","getMinutes"],"sourceRoot":""}