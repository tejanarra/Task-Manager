"use strict";(self.webpackChunktask_manager_frontend=self.webpackChunktask_manager_frontend||[]).push([[268],{268:(e,s,a)=>{a.r(s),a.d(s,{default:()=>i});var r=a(555),t=a(43),o=a(216),n=a(505),l=(a(210),a(347),a(729)),d=a(579);const i=()=>{const[e,s]=(0,t.useState)({currentPassword:"",newPassword:"",confirmNewPassword:""}),[a,i]=(0,t.useState)(""),[c,m]=(0,t.useState)(""),u=(0,o.Zp)(),{logout:w}=(0,l.A)(),p=a=>{const{name:t,value:o}=a.target;s((0,r.A)((0,r.A)({},e),{},{[t]:o}))};return(0,d.jsx)("div",{className:"profile-container",children:(0,d.jsxs)("div",{className:"profile-card shadow rounded",children:[(0,d.jsx)("h2",{className:"profile-title text-center mb-4 bold-text",children:"Change Password"}),c&&(0,d.jsx)("p",{className:"text-success text-center",children:c}),a&&(0,d.jsx)("p",{className:"text-danger text-center",children:a}),(0,d.jsxs)("form",{onSubmit:async s=>{s.preventDefault();const{currentPassword:a,newPassword:r,confirmNewPassword:t}=e;if(a&&r&&t)if(r===t)try{await(0,n.ec)(a,r),m("Password changed successfully!"),i(""),setTimeout((()=>u("/profile-overview")),2e3)}catch(c){var o,l,d;console.error("Password change error:",(null===(o=c.response)||void 0===o?void 0:o.data)||c.message),i((null===(l=c.response)||void 0===l||null===(d=l.data)||void 0===d?void 0:d.message)||"Failed to change password. Please try again."),m(""),c&&403===c.status&&(w(),u("/login"))}else i("Passwords do not match.");else i("All fields are required.")},children:[(0,d.jsxs)("div",{className:"form-group mb-3",children:[(0,d.jsx)("label",{htmlFor:"currentPassword",className:"form-label",children:"Current Password"}),(0,d.jsx)("input",{type:"password",className:"form-control",id:"currentPassword",name:"currentPassword",value:e.currentPassword,onChange:p,required:!0})]}),(0,d.jsxs)("div",{className:"form-group mb-3",children:[(0,d.jsx)("label",{htmlFor:"newPassword",className:"form-label",children:"New Password"}),(0,d.jsx)("input",{type:"password",className:"form-control",id:"newPassword",name:"newPassword",value:e.newPassword,onChange:p,required:!0})]}),(0,d.jsxs)("div",{className:"form-group mb-3",children:[(0,d.jsx)("label",{htmlFor:"confirmNewPassword",className:"form-label",children:"Confirm New Password"}),(0,d.jsx)("input",{type:"password",className:"form-control",id:"confirmNewPassword",name:"confirmNewPassword",value:e.confirmNewPassword,onChange:p,required:!0})]}),(0,d.jsxs)("div",{className:"row mt-4",children:[(0,d.jsx)("div",{className:"col-12 col-md-6 mb-2 mb-md-0",children:(0,d.jsx)("button",{type:"button",className:"btn btn-secondary w-100",onClick:()=>u("/profile-overview"),children:"Cancel"})}),(0,d.jsx)("div",{className:"col-12 col-md-6",children:(0,d.jsx)("button",{type:"submit",className:"btn btn-dark w-100",children:"Save Changes"})})]})]})]})})}},505:(e,s,a)=>{a.d(s,{A7:()=>p,DY:()=>w,E$:()=>P,J2:()=>h,Lx:()=>m,Pr:()=>x,U0:()=>f,UT:()=>n,XL:()=>u,eY:()=>c,ec:()=>g,gQ:()=>b,j:()=>o,lC:()=>l,r7:()=>N,vF:()=>i,vq:()=>d,xw:()=>v});var r=a(555);const t=a(722).A.create({baseURL:"http://localhost:5001/api",headers:{"ngrok-skip-browser-warning":"true"},timeout:3e4});t.interceptors.request.use((e=>{const s=localStorage.getItem("token");return s&&(e.headers.Authorization="Bearer ".concat(s)),e}),(e=>Promise.reject(e)));const o=()=>t.get("/tasks"),n=e=>t.post("/tasks",(0,r.A)((0,r.A)({},e),{},{deadlineUTC:e.deadlineUTC||null})),l=(e,s)=>{var a;return t.put("/tasks/".concat(e),(0,r.A)((0,r.A)({},s),{},{deadlineUTC:null!==(a=s.deadlineUTC)&&void 0!==a?a:null}))},d=e=>t.delete("/tasks/".concat(e)),i=(e,s)=>t.put("/tasks/".concat(e,"/priority"),{priority:s}),c=(e,s)=>t.patch("/tasks/".concat(e,"/reminders"),{action:"overwrite",reminders:s}),m=(e,s)=>t.post("/auth/login",{email:e,password:s}),u=e=>t.post("/auth/google",{code:e}),w=(e,s,a,r)=>t.post("/auth/register",{firstName:e,lastName:s,email:a,password:r}),p=(e,s)=>t.post("/auth/verify-registration",{email:e,verificationCode:s}),h=e=>t.post("/auth/resend-verification",{email:e}),f=e=>t.post("/auth/forgot-password",{email:e}),v=(e,s,a)=>t.post("/auth/verify-code",{email:e,verificationCode:s,newPassword:a}),g=(e,s)=>t.post("/auth/change-password",{currentPassword:e,newPassword:s}),P=()=>t.get("/profile").then((e=>e.data)),N=e=>t.put("/profile",e,{headers:{"Content-Type":"multipart/form-data"}}).then((e=>e.data)),x=e=>t.post("/ai/chat",{prompt:e}).then((e=>({success:!0,data:e.data}))),b=function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return t.post("/ai/chat-conversation",{message:e,conversationHistory:s})}},347:()=>{},210:()=>{}}]);
//# sourceMappingURL=268.59879978.chunk.js.map