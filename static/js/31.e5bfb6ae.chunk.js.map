{"version":3,"file":"static/js/31.e5bfb6ae.chunk.js","mappings":"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","sources":["services/api.js","components/auth/ForgotPassword.js"],"sourcesContent":["import axios from \"axios\";\n\nconst api = axios.create({\n  baseURL: \"https://task-manager-sigma-ashen.vercel.app/api\", // Replace with your backend URL\n  // baseURL: \"http://localhost:5001/api\", // Localhost for local development\n  headers: {\n    \"ngrok-skip-browser-warning\": \"true\",\n  },\n  timeout: 30000, // 30 second timeout\n});\n\napi.interceptors.request.use(\n  (config) => {\n    const token = localStorage.getItem(\"token\");\n    if (token) {\n      config.headers.Authorization = `Bearer ${token}`;\n    }\n\n    // Add user timezone header for auto-detection\n    try {\n      const userTimezone = Intl.DateTimeFormat().resolvedOptions().timeZone;\n      if (userTimezone) {\n        config.headers['x-user-timezone'] = userTimezone;\n      }\n    } catch (err) {\n      // Ignore timezone detection errors\n      console.warn('Could not detect user timezone:', err);\n    }\n\n    return config;\n  },\n  (error) => Promise.reject(error)\n);\n\n// Enhanced error handler\nconst handleApiError = (error) => {\n  if (error.response) {\n    // Server responded with error\n    return {\n      message: error.response.data?.error || \"An error occurred\",\n      status: error.response.status,\n    };\n  } else if (error.request) {\n    // Request made but no response\n    return {\n      message: \"No response from server. Please check your connection.\",\n      status: 0,\n    };\n  } else {\n    // Error setting up request\n    return {\n      message: error.message || \"An unexpected error occurred\",\n      status: -1,\n    };\n  }\n};\n\n// Task-related endpoints\nexport const fetchTasks = () => api.get(\"/tasks\");\nexport const fetchTaskById = (taskId) => api.get(`/tasks/${taskId}`);\nexport const createTask = (newTask) => api.post(\"/tasks\", newTask);\nexport const updateTask = (taskId, updatedTask) =>\n  api.put(`/tasks/${taskId}`, updatedTask);\nexport const deleteTask = (taskId) => api.delete(`/tasks/${taskId}`);\nexport const updateTaskPriority = (taskId, priority) =>\n  api.put(`/tasks/${taskId}/priority`, { priority });\n\n// Authentication-related endpoints\nexport const loginUser = (email, password) => {\n  return api.post(\"/auth/login\", { email, password });\n};\n\nexport const loginWithGoogle = async (authorizationCode) => {\n  return api.post(`/auth/google`, { code: authorizationCode });\n};\n\nexport const registerUser = (firstName, lastName, email, password) => {\n  return api.post(\"/auth/register\", { firstName, lastName, email, password });\n};\n\nexport const verifyRegistrationCode = (email, verificationCode) => {\n  return api.post(\"/auth/verify-registration\", { email, verificationCode });\n};\n\nexport const sendVerificationCode = (email) => {\n  return api.post(\"/auth/resend-verification\", { email });\n};\n\nexport const sendForgotPasswordRequest = (email) => {\n  return api.post(\"/auth/forgot-password\", { email });\n};\n\nexport const resetPassword = (email, verificationCode, newPassword) => {\n  return api.post(\"/auth/verify-code\", {\n    email,\n    verificationCode,\n    newPassword,\n  });\n};\n\nexport const changePassword = (currentPassword, newPassword) => {\n  return api.post(\"/auth/change-password\", { currentPassword, newPassword });\n};\n\nexport const verifyToken = () => api.get(\"/verify-token\");\n\n// Profile-related endpoints\nexport const getProfile = async () => {\n  try {\n    const response = await api.get(\"/profile\");\n    return response.data;\n  } catch (err) {\n    console.error(\"Error fetching profile:\", err);\n    throw err;\n  }\n};\n\nexport const updateProfile = async (formData) => {\n  try {\n    const response = await api.put(\"/profile\", formData, {\n      headers: {\n        \"Content-Type\": \"multipart/form-data\",\n      },\n    });\n    return response.data;\n  } catch (err) {\n    console.error(\"Error updating profile:\", err);\n    throw err;\n  }\n};\n\n// AI-related endpoints\nexport const generateAITask = async (prompt) => {\n  try {\n    const timezone = Intl.DateTimeFormat().resolvedOptions().timeZone;\n    const response = await api.post(\n      \"/ai/chat\",\n      { prompt },\n      { headers: { \"x-user-timezone\": timezone } }\n    );\n    return { success: true, data: response.data };\n  } catch (error) {\n    const errorInfo = handleApiError(error);\n    return { success: false, error: errorInfo.message };\n  }\n};\n\nexport const sendAIChatMessage = async (message, conversationHistory = []) => {\n  try {\n    const timezone = Intl.DateTimeFormat().resolvedOptions().timeZone;\n    const response = await api.post(\n      \"/ai/chat-conversation\",\n      { message, conversationHistory },\n      { headers: { \"x-user-timezone\": timezone } }\n    );\n    return { success: true, data: response.data };\n  } catch (error) {\n    const errorInfo = handleApiError(error);\n    return { success: false, error: errorInfo.message };\n  }\n};\n\nexport default api;\n","import { useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { sendForgotPasswordRequest, resetPassword } from \"../../services/api\";\nimport \"./ForgotPassword.css\";\n\nconst ForgotPassword = ({ theme }) => {\n  const [email, setEmail] = useState(\"\");\n  const [verificationCode, setVerificationCode] = useState(\"\");\n  const [newPassword, setNewPassword] = useState(\"\");\n  const [confirmPassword, setConfirmPassword] = useState(\"\");\n  const [message, setMessage] = useState(\"\");\n  const [error, setError] = useState(\"\");\n  const [isEmailSent, setIsEmailSent] = useState(false);\n  const [hasCode, setHasCode] = useState(false);\n  const [isLoading, setIsLoading] = useState(false);\n  const navigate = useNavigate();\n\n  const handleSendEmail = async (e) => {\n    e.preventDefault();\n    setError(\"\");\n    setMessage(\"\");\n    setIsLoading(true);\n\n    try {\n      const response = await sendForgotPasswordRequest(email);\n      setMessage(\n        response.data.message ||\n          \"Please check your email for further instructions.\"\n      );\n      setIsEmailSent(true);\n    } catch (err) {\n      console.error(\"Error sending reset email:\", err);\n      setError(\n        err.response?.data?.message || \"Something went wrong. Please try again.\"\n      );\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleResetPassword = async (e) => {\n    e.preventDefault();\n    setError(\"\");\n    setMessage(\"\");\n    setIsLoading(true);\n\n    if (newPassword !== confirmPassword) {\n      setError(\"Passwords do not match.\");\n      setIsLoading(false);\n      return;\n    }\n\n    try {\n      const response = await resetPassword(\n        email,\n        verificationCode,\n        newPassword\n      );\n      setMessage(response.data.message || \"Password reset successful!\");\n      setTimeout(() => {\n        navigate(\"/login\");\n      }, 2000);\n    } catch (err) {\n      console.error(\"Error resetting password:\", err);\n      setError(\n        err.response?.data?.message || \"Something went wrong. Please try again.\"\n      );\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"forgot-password-page d-flex align-items-center justify-content-center\">\n      <div className=\"forgot-password-form wider-form\">\n        <h1 className=\"fw-bold mb-2\">Forgot Password</h1>\n        <p className={`text-${theme === \"dark\" ? \"light\" : \"muted\"} mb-4`}>\n          {hasCode || isEmailSent\n            ? \"Enter your verification code and reset your password.\"\n            : \"Enter your email to receive a verification code.\"}\n        </p>\n\n        <form\n          onSubmit={\n            hasCode || isEmailSent ? handleResetPassword : handleSendEmail\n          }\n        >\n          <div className=\"form-check mb-3\">\n            <input\n              type=\"checkbox\"\n              className=\"form-check-input\"\n              id=\"hasCodeCheck\"\n              checked={hasCode}\n              onChange={() => {\n                setHasCode(!hasCode);\n                setError(\"\");\n                setMessage(\"\");\n              }}\n            />\n            <label className=\"form-check-label\" htmlFor=\"hasCodeCheck\">\n              I already have a verification code\n            </label>\n          </div>\n\n          <div className=\"mb-3\">\n            <input\n              type=\"email\"\n              className=\"form-control py-2\"\n              id=\"email\"\n              placeholder=\"Enter your email\"\n              value={email}\n              onChange={(e) => setEmail(e.target.value)}\n              required\n              disabled={isEmailSent}\n            />\n          </div>\n\n          {(hasCode || isEmailSent) && (\n            <>\n              <div className=\"mb-3\">\n                <input\n                  type=\"text\"\n                  className=\"form-control py-2\"\n                  id=\"verificationCode\"\n                  placeholder=\"Enter verification code\"\n                  value={verificationCode}\n                  onChange={(e) => setVerificationCode(e.target.value)}\n                  required\n                />\n              </div>\n              <div className=\"mb-3\">\n                <input\n                  type=\"password\"\n                  className=\"form-control py-2\"\n                  id=\"newPassword\"\n                  placeholder=\"Enter new password\"\n                  value={newPassword}\n                  onChange={(e) => setNewPassword(e.target.value)}\n                  required\n                />\n              </div>\n              <div className=\"mb-3\">\n                <input\n                  type=\"password\"\n                  className=\"form-control py-2\"\n                  id=\"confirmNewPassword\"\n                  placeholder=\"Confirm new password\"\n                  value={confirmPassword}\n                  onChange={(e) => setConfirmPassword(e.target.value)}\n                  required\n                />\n              </div>\n            </>\n          )}\n\n          {error && <div className=\"alert alert-danger\">{error}</div>}\n          {message && <div className=\"alert alert-success\">{message}</div>}\n\n          <div className=\"d-flex justify-content-between mt-4\">\n            <button\n              type=\"submit\"\n              className=\"btn forgot-btn\"\n              disabled={isLoading}\n            >\n              {isLoading ? (\n                <span\n                  className=\"spinner-border spinner-border-sm text-light\"\n                  role=\"status\"\n                  aria-hidden=\"true\"\n                ></span>\n              ) : hasCode || isEmailSent ? (\n                \"Reset\"\n              ) : (\n                \"Send Code\"\n              )}\n            </button>\n            <button\n              type=\"button\"\n              className=\"btn btn-link back-to-login\"\n              onClick={() => navigate(\"/login\")}\n            >\n              Back to Login\n            </button>\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n};\n\nexport default ForgotPassword;\n"],"names":["api","axios","create","baseURL","headers","timeout","interceptors","request","use","config","token","localStorage","getItem","Authorization","concat","userTimezone","Intl","DateTimeFormat","resolvedOptions","timeZone","err","console","warn","error","Promise","reject","handleApiError","_error$response$data","response","message","data","status","fetchTasks","get","fetchTaskById","taskId","createTask","newTask","post","updateTask","updatedTask","put","deleteTask","delete","updateTaskPriority","priority","loginUser","email","password","loginWithGoogle","async","code","authorizationCode","registerUser","firstName","lastName","verifyRegistrationCode","verificationCode","sendVerificationCode","sendForgotPasswordRequest","resetPassword","newPassword","changePassword","currentPassword","getProfile","updateProfile","formData","generateAITask","timezone","success","prompt","sendAIChatMessage","conversationHistory","arguments","length","undefined","_ref","theme","setEmail","useState","setVerificationCode","setNewPassword","confirmPassword","setConfirmPassword","setMessage","setError","isEmailSent","setIsEmailSent","hasCode","setHasCode","isLoading","setIsLoading","navigate","useNavigate","_jsx","className","children","_jsxs","onSubmit","e","preventDefault","setTimeout","_err$response2","_err$response2$data","_err$response","_err$response$data","type","id","checked","onChange","htmlFor","placeholder","value","target","required","disabled","_Fragment","role","onClick"],"sourceRoot":""}