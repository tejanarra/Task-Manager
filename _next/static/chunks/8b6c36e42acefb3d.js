(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,32341,e=>{"use strict";var t=e.i(43476),r=e.i(71645);let o=(0,r.createContext)(void 0);e.s(["AuthProvider",0,({children:e})=>{let[l,n]=(0,r.useState)(null),[a,s]=(0,r.useState)(!0);return(0,r.useEffect)(()=>{let e=localStorage.getItem("token"),t=localStorage.getItem("userInfo");if(e&&t)try{n({token:e,...JSON.parse(t)})}catch(e){console.error("AuthContext - Error parsing user info from localStorage:",e),localStorage.removeItem("token"),localStorage.removeItem("userInfo"),n(null)}s(!1)},[]),(0,r.useEffect)(()=>{let e=()=>{let e=localStorage.getItem("token"),t=localStorage.getItem("userInfo");if(e&&t)try{n({token:e,...JSON.parse(t)})}catch(e){console.error("AuthContext - Error parsing user info from localStorage:",e),n(null)}else n(null)};return window.addEventListener("storage",e),()=>window.removeEventListener("storage",e)},[]),(0,t.jsx)(o.Provider,{value:{user:l,login:(e,t)=>{localStorage.setItem("token",e),localStorage.setItem("userInfo",JSON.stringify(t)),n({token:e,...t})},logout:()=>{localStorage.removeItem("token"),localStorage.removeItem("userInfo"),n(null)},isLoading:a},children:e})},"useAuth",0,()=>{let e=(0,r.useContext)(o);if(!e)throw Error("useAuth must be used within an AuthProvider");return e}])}]);