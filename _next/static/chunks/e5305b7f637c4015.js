(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,10805,e=>{"use strict";let t;var n,r,a,i,l,s,o,c,d,u,h,m,f,g,p,b,v,x,y,w=e.i(43476),j=e.i(71645),k=e.i(18566),N=e.i(20835),S=e.i(32341),C=e.i(61949);let E=({setError:e,onClose:t})=>{let n=(0,k.useRouter)(),[r,a]=(0,j.useState)(""),[i,l]=(0,j.useState)(!1),s=(0,j.useRef)(null);(0,j.useEffect)(()=>{s.current&&s.current.focus()},[]);let o=async()=>{if(!r.trim())return;l(!0),e(null);let a=await (0,N.generateAITask)(r);if(l(!1),!a.success)return void e(a.error);let i=a.data,s={title:i.title,description:i.description,status:i.status||"not-started",deadline:i.deadline,reminders:i.reminders||[]};t(),n.push("/tasks/new/edit",{state:{task:s}})};return(0,w.jsxs)("div",{className:"quick-mode",children:[(0,w.jsxs)("div",{className:"quick-mode-content",children:[(0,w.jsx)("label",{className:"form-label",children:"Describe your task:"}),(0,w.jsx)("textarea",{ref:s,className:"form-control",rows:4,value:r,onChange:e=>a(e.target.value),onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),o())},placeholder:"E.g., 'Prepare project report by Friday 5PM with reminders 1 day and 1 hour before'",disabled:i}),(0,w.jsxs)("div",{className:"quick-mode-suggestions",children:[(0,w.jsx)("small",{children:"Try these:"}),["Schedule dentist appointment next Tuesday at 3pm","Plan weekend shopping with 1 day reminder","Prepare presentation for Monday with daily reminders"].map(e=>(0,w.jsx)("button",{className:"suggestion-chip",onClick:()=>a(e),disabled:i,children:e},e))]})]}),(0,w.jsxs)("div",{className:"modal-actions",children:[(0,w.jsx)("button",{className:"btn btn-secondary",onClick:t,disabled:i,children:"Cancel"}),(0,w.jsx)("button",{className:"btn btn-primary",onClick:o,disabled:!r.trim()||i,children:i?(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)("span",{className:"spinner-border spinner-border-sm me-2"})," ","Generating..."]}):(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)("i",{className:"bi bi-magic me-2"})," Generate Task"]})})]})]})};var D=e.i(50093);let T=({msg:e,user:t,theme:n})=>{var r;let a,i,l,s=t.avatar,o=(t.firstName?.[0]?.toUpperCase()||"")+(t.lastName?.[0]?.toUpperCase()||"");return(0,w.jsxs)("div",{className:`chat-message ${e.role}`,children:[(0,w.jsx)("div",{className:"message-avatar",children:"user"===e.role?s?(0,w.jsx)("img",{src:s,alt:"User",style:{width:"100%",height:"100%",borderRadius:"50%",objectFit:"cover"}}):(0,w.jsx)("div",{style:{width:"100%",height:"100%",borderRadius:"50%",backgroundColor:"dark"===n?"#ffffff":"#000000",color:"dark"===n?"#000000":"#ffffff",fontWeight:"bold",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.85rem"},children:o||"?"}):(0,w.jsx)("i",{className:"bi bi-robot"})}),(0,w.jsx)("div",{className:"message-content",children:(0,w.jsxs)("div",{className:"message-text",children:[(0,w.jsx)("div",{className:"message-text-content",children:(r=e.content)?r.split(/(\d+\.\s+[^\n]+)/g).map((e,t)=>{if(/^\d+\.\s+/.test(e)){let n=e.match(/^(\d+)\.\s+(.+)/);if(n)return(0,w.jsxs)("div",{style:{marginLeft:"0.5rem",marginTop:"0.25rem"},children:[(0,w.jsxs)("strong",{children:[n[1],"."]})," ",n[2]]},t)}let n=e.split(/(\*\*[^*]+\*\*)/g).map((e,t)=>e.startsWith("**")&&e.endsWith("**")?(0,w.jsx)("strong",{children:e.slice(2,-2)},t):e);return(0,w.jsx)("span",{children:n},t)}):""}),(0,w.jsxs)("div",{className:"message-time",children:[(a=new Date(e.timestamp),(l=((i=new Date)-a)/36e5)<24&&a.getDate()===i.getDate()?a.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):l<48&&a.getDate()===i.getDate()-1?`Yesterday ${a.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}`:a.toLocaleDateString([],{month:"short",day:"numeric"})+" "+a.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})),"user"===e.role&&(0,w.jsx)("i",{className:"bi bi-check-all",style:{fontSize:"0.75rem"}})]})]})})]})};var R=e.i(72013),M=e.i(67132),O=e.i(96178),A=e.i(60966);let I=({theme:e,task:t,setTasks:n,isNewTask:r=!1,isChatPreview:a=!1,onSave:i=()=>{},onCancel:l=()=>{}})=>{let[s,o]=(0,j.useState)(r),[c,d]=(0,j.useState)(t.title),[u,h]=(0,j.useState)(t.description),[m,f]=(0,j.useState)(t.status),[g,p]=(0,j.useState)(t.deadline||null),[b,v]=(0,j.useState)(Array.isArray(t.reminders)?t.reminders:[]),[x,y]=(0,j.useState)(!1),[k,S]=(0,j.useState)(!1),C=(0,j.useRef)(null);(0,j.useEffect)(()=>{Array.isArray(t.reminders)&&t.reminders.length>0&&v(t.reminders)},[t.reminders]);let E=(0,j.useCallback)(()=>{d(t.title),h(t.description),f(t.status),p(t.deadline||null),v(Array.isArray(t.reminders)?t.reminders:[]),r?l(t.id):o(!1)},[t.title,t.description,t.status,t.deadline,t.reminders,r,l,t.id]);(0,j.useEffect)(()=>{if(a)return;let e=e=>{s&&C.current&&!C.current.contains(e.target)&&E()};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[s,E,a]);let D=async()=>{if(!c.trim()||!u.trim())return;if(S(!0),c===t.title&&u===t.description&&m===t.status&&g===t.deadline&&JSON.stringify(b)===JSON.stringify(t.reminders)&&!r){o(!1),S(!1);return}let e=new Date,a=g?new Date(g):null,l=a&&a>e?(a-e)/36e5:0,s=l>0?(e=>{let t=e.some(e=>"daily"===e.type),n=e.some(e=>"weekly"===e.type),r=e.filter(e=>("one-time"===e.type||!e.type)&&e.remindBefore<=l);if(t&&l>0){let e=Math.floor(l/24);for(let t=1;t<=e;t++)r.push({remindBefore:24*t,sent:!1,type:"daily",dayNumber:t})}if(n&&l>0){let e=Math.floor(l/168);for(let t=1;t<=e;t++)r.push({remindBefore:24*t*7,sent:!1,type:"weekly",weekNumber:t})}return r})(b):[],d={title:c.trim(),description:u.trim(),status:m,deadline:g?a.toISOString():null,reminders:s};try{if(r)i({...t,...d});else{let e=await (0,N.updateTask)(t.id,d);n(t=>t.map(t=>t.id===e.data.id?e.data:t)),o(!1)}}catch(e){console.error("Error updating task:",e)}finally{S(!1)}},T=async()=>{S(!0);try{await (0,N.deleteTask)(t.id),n(e=>e.filter(e=>e.id!==t.id)),y(!1)}catch(e){console.error("Error deleting task:",e)}finally{S(!1),y(!1)}},I=(e=>{switch(e){case"completed":return"#007a00";case"in-progress":return"#daa520";default:return"#a00000"}})(t.status),L=g&&new Date(g)>new Date,P=(()=>{if(!b||0===b.length)return null;let e=b.filter(e=>"daily"===e.type).length,t=b.filter(e=>"weekly"===e.type).length,n=b.filter(e=>"one-time"===e.type||!e.type).length,r=[];return e>0&&r.push(`Daily (${e})`),t>0&&r.push(`Weekly (${t})`),n>0&&r.push(`One-time (${n})`),r.length>0?r.join(", "):null})();return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsxs)("div",{ref:C,className:`task-card ${"dark"===e?"dark":""} ${k?"loading":""} ${r?"new-task":""} ${a?"chat-preview":""}`,onClick:()=>!s&&!a&&o(!0),children:[(0,w.jsx)("div",{className:"task-strip",style:{backgroundColor:I}}),(0,w.jsxs)("div",{className:"task-card-content",children:[!s&&(0,w.jsx)("i",{className:`bi ${"completed"===t.status?"bi-check-circle":"in-progress"===t.status?"bi-hourglass":"bi-ban"} status-icon`,style:{color:I}}),s?(0,w.jsxs)("div",{className:"task-form-grid",children:[(0,w.jsxs)("div",{className:"task-form-group full-width",children:[(0,w.jsx)("label",{className:"form-label",children:"Title"}),(0,w.jsx)("input",{type:"text",className:"form-control",value:c,onChange:e=>d(e.target.value),placeholder:"Enter task title..."})]}),(0,w.jsxs)("div",{className:"task-form-group full-width",children:[(0,w.jsx)("label",{className:"form-label",children:"Description"}),(0,w.jsx)("textarea",{className:"form-control",rows:3,value:u,onChange:e=>h(e.target.value),placeholder:"Enter task description..."})]}),(0,w.jsxs)("div",{className:"task-form-group",children:[(0,w.jsx)("label",{className:"form-label",children:"Status"}),(0,w.jsxs)("select",{className:"form-select",value:m,onChange:e=>f(e.target.value),children:[(0,w.jsx)("option",{value:"not-started",children:"Not Started"}),(0,w.jsx)("option",{value:"in-progress",children:"In Progress"}),(0,w.jsx)("option",{value:"completed",children:"Completed"})]})]}),(0,w.jsxs)("div",{className:"task-form-group",children:[(0,w.jsx)("label",{className:"form-label",children:"Deadline"}),(0,w.jsx)("input",{type:"datetime-local",className:"form-control",value:g?(0,O.formatDateTimeLocal)(g):"",onChange:e=>p(e.target.value)})]}),L&&(0,w.jsx)("div",{className:"task-form-group full-width",children:(0,w.jsx)(M.default,{tempDeadline:g,tempReminders:b,setTempReminders:v,theme:e,ALL_INTERVALS:A.REMINDER_INTERVALS})})]}):(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)("h5",{className:"task-title",style:{color:I},children:c}),(0,w.jsx)("p",{className:"task-description",children:u})]}),(0,w.jsxs)("div",{className:"task-metadata",children:[(0,w.jsxs)("div",{className:"task-metadata-item",children:[(0,w.jsx)("strong",{children:"Created"}),(0,w.jsx)("span",{children:(0,O.formatRelativeTime)(t.createdAt)})]}),(0,w.jsxs)("div",{className:"task-metadata-item",children:[(0,w.jsx)("strong",{children:"Deadline"}),(0,w.jsx)("span",{children:t.deadline?(0,O.formatRelativeTime)(t.deadline):"No deadline set"})]})]}),s&&(0,w.jsxs)("div",{className:"task-actions",children:[!r&&(0,w.jsx)("button",{className:`btn ${"dark"===e?"btn-outline-danger":"btn-secondary"}`,onClick:e=>{e.stopPropagation(),y(!0)},disabled:k,children:k?"Deleting...":"Delete"}),(0,w.jsx)("button",{className:`btn ${"dark"===e?"btn-outline-light":"btn-dark"}`,onClick:e=>{e.stopPropagation(),D()},disabled:!c.trim()||!u.trim()||k,children:k?"Saving...":"Save"})]}),!s&&P&&(0,w.jsxs)("div",{className:"reminder-indicator",title:`Reminders: ${P}`,children:[(0,w.jsx)("i",{className:"bi bi-clock"}),(0,w.jsx)("small",{children:P})]})]})]}),(0,w.jsx)(R.default,{theme:e,show:x,title:"Delete Task",message:"Are you sure you want to delete this task? This action cannot be undone.",onConfirm:T,onCancel:()=>y(!1)})]})},L=A.STORAGE_KEYS.AI_CHAT_HISTORY,P=({task:e,theme:t})=>{let[n,r]=(0,j.useState)(!1);return(0,w.jsxs)("div",{className:"task-preview-badge",onMouseEnter:()=>r(!0),onMouseLeave:()=>r(!1),children:[(0,w.jsxs)("div",{className:"badge-compact",children:[(0,w.jsxs)("div",{className:"badge-info",children:[(0,w.jsx)("div",{className:"badge-status",children:e.confirmed?"delete"===e.action?"Deleted":"create"===e.action?"Created":"Updated":e.cancelled?"Cancelled":"delete"===e.action?"Delete Request":"create"===e.action?"New Task":"Update Request"}),(0,w.jsx)("div",{className:"badge-title",children:e.title})]}),(0,w.jsx)("div",{className:"badge-expand-hint",children:(0,w.jsx)("i",{className:`bi bi-chevron-${n?"down":"right"}`})})]}),n&&(0,w.jsx)("div",{className:"badge-expanded-content",children:(0,w.jsx)(I,{theme:t,task:{...e,title:e.title||"",description:e.description||"",reminders:Array.isArray(e.reminders)?e.reminders:[]},isNewTask:!1,isChatPreview:!0,isHistoryPreview:!0,onSave:()=>{},onCancel:()=>{}})})]})},$=({task:e,theme:t})=>(0,w.jsx)("div",{className:"delete-action-badge",children:(0,w.jsxs)("div",{className:"delete-info",children:[(0,w.jsx)("div",{className:"delete-status",children:e.confirmed?"Deleted":e.cancelled?"Delete Cancelled":"Delete Request"}),(0,w.jsx)("div",{className:"delete-title",children:e.title})]})}),z=({setError:e,theme:t,refreshTasks:n})=>{let{user:r}=(0,S.useAuth)(),[a,i]=(0,j.useState)(()=>{try{let e=localStorage.getItem(L);return e?JSON.parse(e):[]}catch(e){return console.error("Error loading chat history:",e),[]}}),[l,s]=(0,j.useState)(""),[o,c]=(0,j.useState)(!1),[d,u]=(0,j.useState)(null),h=(0,j.useRef)(null),m=(0,j.useRef)(null);(0,j.useEffect)(()=>{m.current&&m.current.focus()},[]),(0,j.useEffect)(()=>{h.current&&h.current.scrollIntoView({behavior:"smooth"})},[a,d]),(0,j.useEffect)(()=>{try{localStorage.setItem(L,JSON.stringify(a))}catch(e){console.error("Error saving chat history:",e)}},[a]);let f=async()=>{if(!l.trim())return;let t={role:"user",content:l.trim(),timestamp:new Date().toISOString()};d&&(i(e=>[...e,{role:"assistant",content:"",timestamp:new Date().toISOString(),preview:d}]),u(null)),i(e=>[...e,t]),s(""),c(!0),e(null),setTimeout(()=>{m.current&&m.current.focus()},100);let n=a.filter(e=>e.content).map(e=>({role:e.role,content:e.content})),r=await (0,N.sendAIChatMessage)(t.content,n);if(c(!1),!r.success)return void e(r.error);let{reply:o,previewUpdate:h}=r.data;h&&h.reminders&&(h.reminders=(0,D.normalizeRemindersBeforeSave)(h.reminders,h.deadline)),i(e=>[...e,{role:"assistant",content:o,timestamp:new Date().toISOString()}]),h&&u({...h,_aiSuggested:!0,isUpdate:"update"===h.action||"delete"===h.action,isNewTask:"create"===h.action||h.isNewTask,createdAt:h.createdAt||new Date().toISOString(),updatedAt:new Date().toISOString()})},g=async()=>{if(0===a.filter(e=>e.content).length)return void e("No conversation found to generate task from");c(!0),e(null),d&&(i(e=>[...e,{role:"assistant",content:"",timestamp:new Date().toISOString(),preview:d}]),u(null));let t=a.filter(e=>e.content).map(e=>`${"user"===e.role?"User":"Assistant"}: ${e.content}`).join("\n"),n=`Based on this conversation, create a task:

${t}

Create a detailed task with appropriate deadline and reminders.`,r=await (0,N.generateAITask)(n);if(c(!1),!r.success)return void e(r.error);let l=r.data;u({...l,id:`temp-${Date.now()}`,status:l.status||"not-started",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),priority:1,_aiSuggested:!0,isNewTask:!0,action:"create"})},p=async t=>{try{if(!t)return;c(!0),e(null);let r=(0,D.normalizeRemindersBeforeSave)(t.reminders||[],t.deadline),a="";"delete"===t.action?(await (0,N.deleteTask)(t.id),a=`Successfully deleted "${t.title}"`):"create"===t.action?(await (0,N.createTask)({title:t.title,description:t.description,status:t.status,deadline:t.deadline,reminders:r}),a=`Successfully created "${t.title}"`):(await (0,N.updateTask)(t.id,{title:t.title,description:t.description,status:t.status,deadline:t.deadline,reminders:r}),a=`Successfully updated "${t.title}"`),await n(),i(e=>[...e,{role:"assistant",content:"",timestamp:new Date().toISOString(),preview:{...t,confirmed:!0}},{role:"assistant",content:a,timestamp:new Date().toISOString()}]),u(null)}catch(t){console.error("Error applying AI update:",t),e("Failed to apply update.")}finally{c(!1)}},b=()=>{d&&(i(e=>[...e,{role:"assistant",content:"",timestamp:new Date().toISOString(),preview:{...d,cancelled:!0}}]),u(null))};return(0,w.jsxs)("div",{className:"chat-mode",children:[(0,w.jsxs)("div",{className:"chat-messages",children:[0!==a.length||d?(0,w.jsxs)(w.Fragment,{children:[a.map((e,n)=>{if(e.preview){let r=e.preview;return(0,w.jsxs)("div",{className:"chat-message assistant",children:[(0,w.jsx)("div",{className:"message-avatar",children:(0,w.jsx)("i",{className:"bi bi-robot"})}),(0,w.jsx)("div",{className:"message-content",children:"delete"===r.action?(0,w.jsx)($,{task:r,theme:t}):(0,w.jsx)(P,{task:r,theme:t})})]},n)}return e.content?(0,w.jsx)(T,{msg:e,user:r,theme:t},n):null}),d&&(0,w.jsxs)("div",{className:"chat-message assistant",children:[(0,w.jsx)("div",{className:"message-avatar",children:(0,w.jsx)("i",{className:"bi bi-robot"})}),(0,w.jsx)("div",{className:"message-content w-100",children:"delete"===d.action?(0,w.jsxs)("div",{className:"active-delete-preview",children:[(0,w.jsx)("div",{className:"delete-preview-header",children:(0,w.jsxs)("span",{className:"delete-text",children:["Confirm deletion of"," ",(0,w.jsxs)("strong",{children:['"',d.title,'"']}),"?"]})}),(0,w.jsxs)("div",{className:"delete-preview-actions",children:[(0,w.jsx)("button",{className:"btn btn-danger btn-sm",onClick:()=>p(d),disabled:o,"aria-label":"Confirm delete task",children:o?(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)("span",{className:"spinner-border spinner-border-sm me-1"}),"Deleting..."]}):(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)("i",{className:"bi bi-trash me-1"}),"Delete"]})}),(0,w.jsxs)("button",{className:"btn btn-secondary btn-sm",onClick:b,disabled:o,"aria-label":"Cancel delete",children:[(0,w.jsx)("i",{className:"bi bi-x-lg me-1"}),"Cancel"]})]})]}):(0,w.jsx)(I,{theme:t,task:{...d,title:d.title||"",description:d.description||"",reminders:Array.isArray(d.reminders)?d.reminders:[]},isNewTask:!0,isChatPreview:!0,onSave:p,onCancel:b})})]})]}):(0,w.jsxs)("div",{className:"chat-empty-state",children:[(0,w.jsx)("i",{className:"bi bi-chat-heart"}),(0,w.jsx)("p",{children:"Start a conversation with AI"}),(0,w.jsx)("small",{children:"Ask questions or describe your task step by step"})]}),o&&(0,w.jsxs)("div",{className:"chat-message assistant",children:[(0,w.jsx)("div",{className:"message-avatar",children:(0,w.jsx)("i",{className:"bi bi-robot"})}),(0,w.jsx)("div",{className:"message-content",children:(0,w.jsxs)("div",{className:"typing-indicator",children:[(0,w.jsx)("span",{}),(0,w.jsx)("span",{}),(0,w.jsx)("span",{})]})})]}),(0,w.jsx)("div",{ref:h})]}),(0,w.jsxs)("div",{className:"chat-input-container",children:[(0,w.jsx)("input",{ref:m,type:"text",className:"form-control",value:l,onChange:e=>s(e.target.value),onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),f())},placeholder:"Type your message...",disabled:o,"aria-label":"Type your message to AI assistant"}),(0,w.jsx)("button",{className:"send-button",onClick:f,disabled:!l.trim()||o,"aria-label":"Send message",children:(0,w.jsx)("i",{className:"bi bi-send-fill"})})]}),(0,w.jsxs)("div",{className:"chat-actions",children:[(0,w.jsxs)("button",{className:"btn btn-sm btn-outline-secondary",onClick:()=>{i([]),e(null),u(null);try{localStorage.removeItem(L)}catch(e){console.error("Error clearing chat history:",e)}},disabled:o||0===a.length,"aria-label":"Clear chat history",children:[(0,w.jsx)("i",{className:"bi bi-arrow-clockwise me-1"})," Clear Chat"]}),(0,w.jsxs)("button",{className:"btn btn-sm btn-primary",onClick:g,disabled:o||0===a.filter(e=>e.content).length,"aria-label":"Generate task from conversation",children:[(0,w.jsx)("i",{className:"bi bi-magic me-1"})," Generate Task"]})]})]})},F=({theme:e,task:t,onClose:n,onSave:r})=>(0,w.jsx)("div",{className:"ai-preview-overlay",onClick:n,children:(0,w.jsxs)("div",{className:"ai-preview-modal",onClick:e=>e.stopPropagation(),children:[(0,w.jsxs)("h5",{className:"mb-3",children:[(0,w.jsx)("i",{className:"bi bi-eye"})," Task Preview"]}),(0,w.jsx)(I,{theme:e,task:t,isNewTask:!0,onSave:r,onCancel:n}),(0,w.jsx)("div",{className:"text-end mt-2",children:(0,w.jsx)("button",{className:"btn btn-secondary",onClick:n,children:"Cancel"})})]})}),B=({show:e,onClose:t,onTaskGenerated:n,theme:r,refreshTasks:a,isWidget:i=!1,showOptions:l=!1,setShowOptions:s=null,chatMode:o=null,onModeChange:c=null,widgetSize:d="medium",onSizeChange:u=null,optionsRef:h=null})=>{let[m,f]=(0,j.useState)("quick"),[g,p]=(0,j.useState)(null),[b,v]=(0,j.useState)(null),[x,y]=(0,j.useState)(!1),k=(0,j.useRef)(0);(0,j.useEffect)(()=>{try{let e=localStorage.getItem("ai_chat_mode");e&&("quick"===e||"chat"===e)&&f(e)}catch(e){console.error("Error loading chat mode:",e)}},[]),(0,j.useEffect)(()=>{try{localStorage.setItem("ai_chat_mode",m)}catch(e){console.error("Error saving chat mode:",e)}},[m]);let N=(0,j.useCallback)(()=>{y(!0),setTimeout(()=>{y(!1),v(null),p(null),t()},250)},[t]);return((0,j.useEffect)(()=>{let t=t=>{"Escape"!==t.key||!e||g||i||N()};return e&&!i&&(k.current=window.pageYOffset,document.addEventListener("keydown",t),document.body.style.overflow="hidden",document.body.style.touchAction="none",document.body.style.position="fixed",document.body.style.width="100%",document.body.style.top=`-${k.current}px`),()=>{i||(document.removeEventListener("keydown",t),document.body.style.overflow="",document.body.style.touchAction="",document.body.style.position="",document.body.style.width="",document.body.style.top="",window.scrollTo(0,k.current))}},[e,g,N,i]),e||x)?i?(0,w.jsxs)(w.Fragment,{children:[(0,w.jsxs)("div",{className:"ai-mode-selector",children:[(0,w.jsxs)("button",{className:`mode-button ${"quick"===m?"active":""}`,onClick:()=>f("quick"),"aria-pressed":"quick"===m,"aria-label":"Switch to Quick Mode - Generate tasks quickly with a simple prompt",children:[(0,w.jsx)("i",{className:"bi bi-lightning-charge","aria-hidden":"true"})," Quick"]}),(0,w.jsxs)("button",{className:`mode-button ${"chat"===m?"active":""}`,onClick:()=>f("chat"),"aria-pressed":"chat"===m,"aria-label":"Switch to Chat Mode - Have a conversation to refine your task",children:[(0,w.jsx)("i",{className:"bi bi-chat-dots","aria-hidden":"true"})," Chat"]})]}),b&&(0,w.jsxs)("div",{className:"error-banner",children:[(0,w.jsx)("i",{className:"bi bi-exclamation-triangle"})," ",b,(0,w.jsx)("button",{onClick:()=>v(null),style:{marginLeft:"auto",background:"none",border:"none",color:"inherit",cursor:"pointer",padding:"0 4px"},"aria-label":"Dismiss error",children:(0,w.jsx)("i",{className:"bi bi-x-lg"})})]}),"quick"===m?(0,w.jsx)(E,{setError:v,setPreviewTask:p,onTaskGenerated:n,onClose:N,theme:r}):(0,w.jsx)(z,{setError:v,theme:r,refreshTasks:a,onClose:N},m),g&&(0,w.jsx)(F,{theme:r,task:g,onClose:()=>p(null),onSave:e=>{n(e),p(null),N()}})]}):(0,w.jsxs)("div",{className:`ai-modal-overlay ${x?"closing":""}`,onClick:e=>{e.target!==e.currentTarget||g||i||N()},children:[(0,w.jsxs)("div",{className:`ai-modal-content ${"dark"===r?"dark-mode":""} ${x?"closing":""}`,onClick:e=>e.stopPropagation(),children:[(0,w.jsxs)("div",{className:"ai-modal-header",children:[(0,w.jsxs)("h3",{children:[(0,w.jsx)("i",{className:"bi bi-robot"})," AI Task Assistant"]}),(0,w.jsxs)("div",{className:"header-options-wrapper",children:[s&&(0,w.jsxs)("div",{className:"floating-options",ref:h,children:[(0,w.jsx)("button",{className:"close-button",onClick:()=>s(!l),"aria-label":"Options",style:{marginRight:"8px"},children:(0,w.jsx)("i",{className:"bi bi-three-dots-vertical"})}),l&&(0,w.jsxs)("div",{className:`options-dropdown ${"dark"===r?"dark":""}`,children:[(0,w.jsx)("div",{className:"options-header",children:"Chat Mode"}),(0,w.jsxs)("button",{className:`option-item ${"widget"===o?"active":""}`,onClick:()=>c("widget"),children:[(0,w.jsx)("i",{className:"bi bi-window"}),(0,w.jsx)("span",{children:"Floating Widget"}),"widget"===o&&(0,w.jsx)("i",{className:"bi bi-check2"})]}),(0,w.jsxs)("button",{className:`option-item ${"drawer"===o?"active":""}`,onClick:()=>c("drawer"),children:[(0,w.jsx)("i",{className:"bi bi-layout-sidebar"}),(0,w.jsx)("span",{children:"Sidebar Drawer"}),"drawer"===o&&(0,w.jsx)("i",{className:"bi bi-check2"})]}),u&&window.innerWidth>768&&(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)("div",{className:"options-divider"}),(0,w.jsx)("div",{className:"options-header",children:"Window Size"}),(0,w.jsxs)("button",{className:`option-item ${"small"===d?"active":""}`,onClick:()=>u("small"),children:[(0,w.jsx)("i",{className:"bi bi-phone"}),(0,w.jsx)("span",{children:"Small"}),"small"===d&&(0,w.jsx)("i",{className:"bi bi-check2"})]}),(0,w.jsxs)("button",{className:`option-item ${"medium"===d?"active":""}`,onClick:()=>u("medium"),children:[(0,w.jsx)("i",{className:"bi bi-tablet"}),(0,w.jsx)("span",{children:"Medium"}),"medium"===d&&(0,w.jsx)("i",{className:"bi bi-check2"})]}),(0,w.jsxs)("button",{className:`option-item ${"large"===d?"active":""}`,onClick:()=>u("large"),children:[(0,w.jsx)("i",{className:"bi bi-laptop"}),(0,w.jsx)("span",{children:"Large"}),"large"===d&&(0,w.jsx)("i",{className:"bi bi-check2"})]}),(0,w.jsxs)("button",{className:`option-item ${"fullscreen"===d?"active":""}`,onClick:()=>u("fullscreen"),children:[(0,w.jsx)("i",{className:"bi bi-arrows-fullscreen"}),(0,w.jsx)("span",{children:"Fullscreen"}),"fullscreen"===d&&(0,w.jsx)("i",{className:"bi bi-check2"})]})]})]})]}),(0,w.jsx)("button",{className:"close-button",onClick:N,"aria-label":"Close AI Assistant",children:(0,w.jsx)("i",{className:"bi bi-x-lg"})})]})]}),(0,w.jsxs)("div",{className:"ai-mode-selector",children:[(0,w.jsxs)("button",{className:`mode-button ${"quick"===m?"active":""}`,onClick:()=>f("quick"),"aria-pressed":"quick"===m,children:[(0,w.jsx)("i",{className:"bi bi-lightning-charge"})," Quick"]}),(0,w.jsxs)("button",{className:`mode-button ${"chat"===m?"active":""}`,onClick:()=>f("chat"),"aria-pressed":"chat"===m,children:[(0,w.jsx)("i",{className:"bi bi-chat-dots"})," Chat"]})]}),b&&(0,w.jsxs)("div",{className:"error-banner",children:[(0,w.jsx)("i",{className:"bi bi-exclamation-triangle"})," ",b,(0,w.jsx)("button",{onClick:()=>v(null),style:{marginLeft:"auto",background:"none",border:"none",color:"inherit",cursor:"pointer",padding:"0 4px"},"aria-label":"Dismiss error",children:(0,w.jsx)("i",{className:"bi bi-x-lg"})})]}),"quick"===m?(0,w.jsx)(E,{setError:v,setPreviewTask:p,onTaskGenerated:n,onClose:N,theme:r}):(0,w.jsx)(z,{setError:v,theme:r,refreshTasks:a,onClose:N},m)]}),g&&(0,w.jsx)(F,{theme:r,task:g,onClose:()=>p(null),onSave:e=>{n(e),p(null),N()}})]}):null},_=({theme:e,onTaskGenerated:t,refreshTasks:n})=>{let r,[a,i]=(0,j.useState)(!1),[l,s]=(0,j.useState)(!1),[o,c]=(0,j.useState)(()=>localStorage.getItem("ai_chat_ui_mode")||"widget"),[d,u]=(0,j.useState)(()=>localStorage.getItem("chat_widget_size")||"medium"),[h,m]=(0,j.useState)(()=>{let e=localStorage.getItem("chat_button_position");return e?JSON.parse(e):{x:window.innerWidth-90,y:window.innerHeight-90}}),[f,g]=(0,j.useState)(!1),[p,b]=(0,j.useState)(!1),[v,x]=(0,j.useState)({x:0,y:0}),y=(0,j.useRef)(null),k=(0,j.useRef)(null),N=(0,j.useCallback)(()=>{let e=window.innerWidth;return e<=480?{buttonSize:52,margin:20}:e<=768?{buttonSize:56,margin:20}:{buttonSize:60,margin:24}},[]);(0,j.useEffect)(()=>{localStorage.setItem("chat_button_position",JSON.stringify(h))},[h]),(0,j.useEffect)(()=>{localStorage.setItem("chat_widget_size",d)},[d]),(0,j.useEffect)(()=>{let e,t=()=>{clearTimeout(e),e=setTimeout(()=>{m(e=>{let{buttonSize:t,margin:n}=N(),r=window.innerWidth-t-n,a=window.innerHeight-t-n;return{x:Math.max(n,Math.min(e.x,r)),y:Math.max(n,Math.min(e.y,a))}})},150)};return window.addEventListener("resize",t),()=>{clearTimeout(e),window.removeEventListener("resize",t)}},[N]),(0,j.useEffect)(()=>{let e=e=>{k.current&&!k.current.contains(e.target)&&s(!1)};if(l)return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[l]);let S=(0,j.useCallback)((e,t)=>{let n=window.innerWidth,r=window.innerHeight,{buttonSize:a,margin:i}=N(),l=[{x:i,y:i},{x:n-a-i,y:i},{x:i,y:r-a-i},{x:n-a-i,y:r-a-i}],s=l[0],o=Math.hypot(e-l[0].x,t-l[0].y);return l.forEach(n=>{let r=Math.hypot(e-n.x,t-n.y);r<o&&(o=r,s=n)}),{x:s.x,y:s.y}},[N]),C=(0,j.useCallback)(e=>{if(!f)return;let t=Math.abs(e.clientX-v.x-h.x),n=Math.abs(e.clientY-v.y-h.y);(t>5||n>5)&&b(!0),m({x:e.clientX-v.x,y:e.clientY-v.y})},[f,v,h]),E=(0,j.useCallback)(e=>{f&&(p&&m(S(h.x,h.y)),g(!1),p||(e.stopPropagation(),i(!0)),setTimeout(()=>b(!1),100))},[f,p,h,S]);(0,j.useEffect)(()=>{if(f)return document.addEventListener("mousemove",C),document.addEventListener("mouseup",E),()=>{document.removeEventListener("mousemove",C),document.removeEventListener("mouseup",E)}},[f,C,E]);let D=(0,j.useCallback)(e=>{if(!f)return;e.preventDefault();let t=e.touches[0],n=Math.abs(t.clientX-v.x-h.x),r=Math.abs(t.clientY-v.y-h.y);(n>5||r>5)&&b(!0),m({x:t.clientX-v.x,y:t.clientY-v.y})},[f,v,h]),T=(0,j.useCallback)(e=>{f&&(p&&m(S(h.x,h.y)),g(!1),p||(e.preventDefault(),i(!0)),setTimeout(()=>b(!1),100))},[f,p,h,S]);(0,j.useEffect)(()=>{if(f)return document.addEventListener("touchmove",D,{passive:!1}),document.addEventListener("touchend",T),()=>{document.removeEventListener("touchmove",D),document.removeEventListener("touchend",T)}},[f,D,T]);let R=()=>{i(!1),s(!1)},M=e=>{c(e),localStorage.setItem("ai_chat_ui_mode",e),s(!1)},O=e=>{u(e),s(!1)};return(0,w.jsxs)(w.Fragment,{children:[!a&&(0,w.jsx)("button",{ref:y,className:`floating-chat-button ${"dark"===e?"dark":""} ${f?"dragging":""}`,style:{left:`${h.x}px`,top:`${h.y}px`},onClick:e=>{f||p||i(!0)},onMouseDown:e=>{e.preventDefault(),g(!0),b(!1);let t=y.current.getBoundingClientRect();x({x:e.clientX-t.left,y:e.clientY-t.top})},onTouchStart:e=>{let t=e.touches[0];g(!0),b(!1);let n=y.current.getBoundingClientRect();x({x:t.clientX-n.left,y:t.clientY-n.top})},"aria-label":"Open AI Assistant chat - Drag to reposition",children:(0,w.jsx)("i",{className:"bi bi-cloud-fill","aria-hidden":"true"})}),a&&"drawer"===o&&(0,w.jsx)(B,{show:!0,onClose:R,onTaskGenerated:t,theme:e,refreshTasks:n,isWidget:!1,showOptions:l,setShowOptions:s,chatMode:o,onModeChange:M,widgetSize:d,onSizeChange:O,optionsRef:k}),a&&"widget"===o&&(0,w.jsxs)("div",{className:`floating-chat-modal ${"dark"===e?"dark":""} ${"fullscreen"===d?"fullscreen":""}`,style:(r={small:{width:"320px",height:"450px"},medium:{width:"400px",height:"600px"},large:{width:"500px",height:"700px"},fullscreen:{width:"calc(100vw - 48px)",height:"calc(100vh - 48px)",maxWidth:"1200px",maxHeight:"900px"}})[d]||r.medium,children:[(0,w.jsxs)("div",{className:"floating-modal-header",children:[(0,w.jsxs)("div",{className:"modal-header-title",children:[(0,w.jsx)("i",{className:"bi bi-robot"}),(0,w.jsx)("span",{children:"AI Assistant"})]}),(0,w.jsxs)("div",{className:"modal-header-actions",children:[(0,w.jsxs)("div",{className:"floating-options",ref:k,children:[(0,w.jsx)("button",{className:"header-icon-button",onClick:()=>s(!l),"aria-label":"Options",children:(0,w.jsx)("i",{className:"bi bi-three-dots-vertical"})}),l&&(0,w.jsxs)("div",{className:`options-dropdown ${"dark"===e?"dark":""}`,children:[(0,w.jsx)("div",{className:"options-header",children:"Chat Mode"}),(0,w.jsxs)("button",{className:`option-item ${"widget"===o?"active":""}`,onClick:()=>M("widget"),children:[(0,w.jsx)("i",{className:"bi bi-window"}),(0,w.jsx)("span",{children:"Floating Widget"}),"widget"===o&&(0,w.jsx)("i",{className:"bi bi-check2"})]}),(0,w.jsxs)("button",{className:`option-item ${"drawer"===o?"active":""}`,onClick:()=>M("drawer"),children:[(0,w.jsx)("i",{className:"bi bi-layout-sidebar"}),(0,w.jsx)("span",{children:"Sidebar Drawer"}),"drawer"===o&&(0,w.jsx)("i",{className:"bi bi-check2"})]}),window.innerWidth>768&&(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)("div",{className:"options-divider"}),(0,w.jsx)("div",{className:"options-header",children:"Window Size"}),(0,w.jsxs)("button",{className:`option-item ${"small"===d?"active":""}`,onClick:()=>O("small"),children:[(0,w.jsx)("i",{className:"bi bi-phone"}),(0,w.jsx)("span",{children:"Small"}),"small"===d&&(0,w.jsx)("i",{className:"bi bi-check2"})]}),(0,w.jsxs)("button",{className:`option-item ${"medium"===d?"active":""}`,onClick:()=>O("medium"),children:[(0,w.jsx)("i",{className:"bi bi-tablet"}),(0,w.jsx)("span",{children:"Medium"}),"medium"===d&&(0,w.jsx)("i",{className:"bi bi-check2"})]}),(0,w.jsxs)("button",{className:`option-item ${"large"===d?"active":""}`,onClick:()=>O("large"),children:[(0,w.jsx)("i",{className:"bi bi-laptop"}),(0,w.jsx)("span",{children:"Large"}),"large"===d&&(0,w.jsx)("i",{className:"bi bi-check2"})]}),(0,w.jsxs)("button",{className:`option-item ${"fullscreen"===d?"active":""}`,onClick:()=>O("fullscreen"),children:[(0,w.jsx)("i",{className:"bi bi-arrows-fullscreen"}),(0,w.jsx)("span",{children:"Fullscreen"}),"fullscreen"===d&&(0,w.jsx)("i",{className:"bi bi-check2"})]})]})]})]}),(0,w.jsx)("button",{className:"header-icon-button",onClick:R,"aria-label":"Close",children:(0,w.jsx)("i",{className:"bi bi-x-lg"})})]})]}),(0,w.jsx)("div",{className:"floating-modal-body",children:(0,w.jsx)(B,{show:!0,onClose:R,onTaskGenerated:t,theme:e,refreshTasks:n,isWidget:!0})})]}),f&&(0,w.jsx)("div",{className:"drag-overlay"})]})};var Y=e.i(74080);let W="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement;function U(e){let t=Object.prototype.toString.call(e);return"[object Window]"===t||"[object global]"===t}function X(e){return"nodeType"in e}function q(e){var t,n;return e?U(e)?e:X(e)&&null!=(t=null==(n=e.ownerDocument)?void 0:n.defaultView)?t:window:window}function K(e){let{Document:t}=q(e);return e instanceof t}function H(e){return!U(e)&&e instanceof q(e).HTMLElement}function J(e){return e instanceof q(e).SVGElement}function G(e){return e?U(e)?e.document:X(e)?K(e)?e:H(e)||J(e)?e.ownerDocument:document:document:document}let V=W?j.useLayoutEffect:j.useEffect;function Q(e){let t=(0,j.useRef)(e);return V(()=>{t.current=e}),(0,j.useCallback)(function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return null==t.current?void 0:t.current(...n)},[])}function Z(e,t){void 0===t&&(t=[e]);let n=(0,j.useRef)(e);return V(()=>{n.current!==e&&(n.current=e)},t),n}function ee(e,t){let n=(0,j.useRef)();return(0,j.useMemo)(()=>{let t=e(n.current);return n.current=t,t},[...t])}function et(e){let t=Q(e),n=(0,j.useRef)(null),r=(0,j.useCallback)(e=>{e!==n.current&&(null==t||t(e,n.current)),n.current=e},[]);return[n,r]}function en(e){let t=(0,j.useRef)();return(0,j.useEffect)(()=>{t.current=e},[e]),t.current}let er={};function ea(e,t){return(0,j.useMemo)(()=>{if(t)return t;let n=null==er[e]?0:er[e]+1;return er[e]=n,e+"-"+n},[e,t])}function ei(e){return function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return r.reduce((t,n)=>{for(let[r,a]of Object.entries(n)){let n=t[r];null!=n&&(t[r]=n+e*a)}return t},{...t})}}let el=ei(1),es=ei(-1);function eo(e){if(!e)return!1;let{KeyboardEvent:t}=q(e.target);return t&&e instanceof t}function ec(e){if(function(e){if(!e)return!1;let{TouchEvent:t}=q(e.target);return t&&e instanceof t}(e)){if(e.touches&&e.touches.length){let{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}else if(e.changedTouches&&e.changedTouches.length){let{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return"clientX"in e&&"clientY"in e?{x:e.clientX,y:e.clientY}:null}let ed=Object.freeze({Translate:{toString(e){if(!e)return;let{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;let{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[ed.Translate.toString(e),ed.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:r}=e;return t+" "+n+"ms "+r}}}),eu="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]",eh={display:"none"};function em(e){let{id:t,value:n}=e;return j.default.createElement("div",{id:t,style:eh},n)}function ef(e){let{id:t,announcement:n,ariaLiveType:r="assertive"}=e;return j.default.createElement("div",{id:t,style:{position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"},role:"status","aria-live":r,"aria-atomic":!0},n)}let eg=(0,j.createContext)(null),ep={draggable:"\n    To pick up a draggable item, press the space bar.\n    While dragging, use the arrow keys to move the item.\n    Press space again to drop the item in its new position, or press escape to cancel.\n  "},eb={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function ev(e){var t;let n,{announcements:r=eb,container:a,hiddenTextDescribedById:i,screenReaderInstructions:l=ep}=e,{announce:s,announcement:o}=function(){let[e,t]=(0,j.useState)("");return{announce:(0,j.useCallback)(e=>{null!=e&&t(e)},[]),announcement:e}}(),c=ea("DndLiveRegion"),[d,u]=(0,j.useState)(!1);if((0,j.useEffect)(()=>{u(!0)},[]),t=(0,j.useMemo)(()=>({onDragStart(e){let{active:t}=e;s(r.onDragStart({active:t}))},onDragMove(e){let{active:t,over:n}=e;r.onDragMove&&s(r.onDragMove({active:t,over:n}))},onDragOver(e){let{active:t,over:n}=e;s(r.onDragOver({active:t,over:n}))},onDragEnd(e){let{active:t,over:n}=e;s(r.onDragEnd({active:t,over:n}))},onDragCancel(e){let{active:t,over:n}=e;s(r.onDragCancel({active:t,over:n}))}}),[s,r]),n=(0,j.useContext)(eg),(0,j.useEffect)(()=>{if(!n)throw Error("useDndMonitor must be used within a children of <DndContext>");return n(t)},[t,n]),!d)return null;let h=j.default.createElement(j.default.Fragment,null,j.default.createElement(em,{id:i,value:l.draggable}),j.default.createElement(ef,{id:c,announcement:o}));return a?(0,Y.createPortal)(h,a):h}function ex(){}function ey(e,t){return(0,j.useMemo)(()=>({sensor:e,options:null!=t?t:{}}),[e,t])}(n=u||(u={})).DragStart="dragStart",n.DragMove="dragMove",n.DragEnd="dragEnd",n.DragCancel="dragCancel",n.DragOver="dragOver",n.RegisterDroppable="registerDroppable",n.SetDroppableDisabled="setDroppableDisabled",n.UnregisterDroppable="unregisterDroppable";let ew=Object.freeze({x:0,y:0});function ej(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return n-r}function ek(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return r-n}function eN(e,t,n){return void 0===t&&(t=e.left),void 0===n&&(n=e.top),{x:t+.5*e.width,y:n+.5*e.height}}let eS=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e,a=eN(t,t.left,t.top),i=[];for(let e of r){let{id:t}=e,r=n.get(t);if(r){var l;let n=(l=eN(r),Math.sqrt(Math.pow(l.x-a.x,2)+Math.pow(l.y-a.y,2)));i.push({id:t,data:{droppableContainer:e,value:n}})}}return i.sort(ej)},eC=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e,a=[];for(let e of r){let{id:r}=e,i=n.get(r);if(i){let n=function(e,t){let n=Math.max(t.top,e.top),r=Math.max(t.left,e.left),a=Math.min(t.left+t.width,e.left+e.width),i=Math.min(t.top+t.height,e.top+e.height);if(r<a&&n<i){let l=t.width*t.height,s=e.width*e.height,o=(a-r)*(i-n);return Number((o/(l+s-o)).toFixed(4))}return 0}(i,t);n>0&&a.push({id:r,data:{droppableContainer:e,value:n}})}}return a.sort(ek)};function eE(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:ew}let eD=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.reduce((e,t)=>({...e,top:e.top+ +t.y,bottom:e.bottom+ +t.y,left:e.left+ +t.x,right:e.right+ +t.x}),{...e})};function eT(e){if(e.startsWith("matrix3d(")){let t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}if(e.startsWith("matrix(")){let t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}let eR={ignoreTransform:!1};function eM(e,t){void 0===t&&(t=eR);let n=e.getBoundingClientRect();if(t.ignoreTransform){let{transform:t,transformOrigin:r}=q(e).getComputedStyle(e);t&&(n=function(e,t,n){let r=eT(t);if(!r)return e;let{scaleX:a,scaleY:i,x:l,y:s}=r,o=e.left-l-(1-a)*parseFloat(n),c=e.top-s-(1-i)*parseFloat(n.slice(n.indexOf(" ")+1)),d=a?e.width/a:e.width,u=i?e.height/i:e.height;return{width:d,height:u,top:c,right:o+d,bottom:c+u,left:o}}(n,t,r))}let{top:r,left:a,width:i,height:l,bottom:s,right:o}=n;return{top:r,left:a,width:i,height:l,bottom:s,right:o}}function eO(e){return eM(e,{ignoreTransform:!0})}function eA(e,t){let n=[];return e?function r(a){var i,l;let s;if(null!=t&&n.length>=t||!a)return n;if(K(a)&&null!=a.scrollingElement&&!n.includes(a.scrollingElement))return n.push(a.scrollingElement),n;if(!H(a)||J(a)||n.includes(a))return n;let o=q(e).getComputedStyle(a);return(a!==e&&(void 0===(i=o)&&(i=q(a).getComputedStyle(a)),s=/(auto|scroll|overlay)/,["overflow","overflowX","overflowY"].some(e=>{let t=i[e];return"string"==typeof t&&s.test(t)}))&&n.push(a),void 0===(l=o)&&(l=q(a).getComputedStyle(a)),"fixed"===l.position)?n:r(a.parentNode)}(e):n}function eI(e){let[t]=eA(e,1);return null!=t?t:null}function eL(e){return W&&e?U(e)?e:X(e)?K(e)||e===G(e).scrollingElement?window:H(e)?e:null:null:null}function eP(e){return U(e)?e.scrollX:e.scrollLeft}function e$(e){return U(e)?e.scrollY:e.scrollTop}function ez(e){return{x:eP(e),y:e$(e)}}function eF(e){return!!W&&!!e&&e===document.scrollingElement}function eB(e){let t={x:0,y:0},n=eF(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},r={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height},a=e.scrollTop<=t.y,i=e.scrollLeft<=t.x;return{isTop:a,isLeft:i,isBottom:e.scrollTop>=r.y,isRight:e.scrollLeft>=r.x,maxScroll:r,minScroll:t}}(r=h||(h={}))[r.Forward=1]="Forward",r[r.Backward=-1]="Backward";let e_={x:.2,y:.2};function eY(e){return e.reduce((e,t)=>el(e,ez(t)),ew)}function eW(e,t){if(void 0===t&&(t=eM),!e)return;let{top:n,left:r,bottom:a,right:i}=t(e);eI(e)&&(a<=0||i<=0||n>=window.innerHeight||r>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}let eU=[["x",["left","right"],function(e){return e.reduce((e,t)=>e+eP(t),0)}],["y",["top","bottom"],function(e){return e.reduce((e,t)=>e+e$(t),0)}]];class eX{constructor(e,t){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const n=eA(t),r=eY(n);for(const[t,a,i]of(this.rect={...e},this.width=e.width,this.height=e.height,eU))for(const e of a)Object.defineProperty(this,e,{get:()=>{let a=i(n),l=r[t]-a;return this.rect[e]+l},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class eq{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(e=>{var t;return null==(t=this.target)?void 0:t.removeEventListener(...e)})},this.target=e}add(e,t,n){var r;null==(r=this.target)||r.addEventListener(e,t,n),this.listeners.push([e,t,n])}}function eK(e,t){let n=Math.abs(e.x),r=Math.abs(e.y);return"number"==typeof t?Math.sqrt(n**2+r**2)>t:"x"in t&&"y"in t?n>t.x&&r>t.y:"x"in t?n>t.x:"y"in t&&r>t.y}function eH(e){e.preventDefault()}function eJ(e){e.stopPropagation()}(a=m||(m={})).Click="click",a.DragStart="dragstart",a.Keydown="keydown",a.ContextMenu="contextmenu",a.Resize="resize",a.SelectionChange="selectionchange",a.VisibilityChange="visibilitychange",(i=f||(f={})).Space="Space",i.Down="ArrowDown",i.Right="ArrowRight",i.Left="ArrowLeft",i.Up="ArrowUp",i.Esc="Escape",i.Enter="Enter",i.Tab="Tab";let eG={start:[f.Space,f.Enter],cancel:[f.Esc],end:[f.Space,f.Enter,f.Tab]},eV=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case f.Right:return{...n,x:n.x+25};case f.Left:return{...n,x:n.x-25};case f.Down:return{...n,y:n.y+25};case f.Up:return{...n,y:n.y-25}}};class eQ{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:t}}=e;this.props=e,this.listeners=new eq(G(t)),this.windowListeners=new eq(q(t)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(m.Resize,this.handleCancel),this.windowListeners.add(m.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(m.Keydown,this.handleKeyDown))}handleStart(){let{activeNode:e,onStart:t}=this.props,n=e.node.current;n&&eW(n),t(ew)}handleKeyDown(e){if(eo(e)){let{active:t,context:n,options:r}=this.props,{keyboardCodes:a=eG,coordinateGetter:i=eV,scrollBehavior:l="smooth"}=r,{code:s}=e;if(a.end.includes(s))return void this.handleEnd(e);if(a.cancel.includes(s))return void this.handleCancel(e);let{collisionRect:o}=n.current,c=o?{x:o.left,y:o.top}:ew;this.referenceCoordinates||(this.referenceCoordinates=c);let d=i(e,{active:t,context:n.current,currentCoordinates:c});if(d){let t=es(d,c),r={x:0,y:0},{scrollableAncestors:a}=n.current;for(let n of a){let a=e.code,{isTop:i,isRight:s,isLeft:o,isBottom:c,maxScroll:u,minScroll:h}=eB(n),m=function(e){if(e===document.scrollingElement){let{innerWidth:e,innerHeight:t}=window;return{top:0,left:0,right:e,bottom:t,width:e,height:t}}let{top:t,left:n,right:r,bottom:a}=e.getBoundingClientRect();return{top:t,left:n,right:r,bottom:a,width:e.clientWidth,height:e.clientHeight}}(n),g={x:Math.min(a===f.Right?m.right-m.width/2:m.right,Math.max(a===f.Right?m.left:m.left+m.width/2,d.x)),y:Math.min(a===f.Down?m.bottom-m.height/2:m.bottom,Math.max(a===f.Down?m.top:m.top+m.height/2,d.y))},p=a===f.Right&&!s||a===f.Left&&!o,b=a===f.Down&&!c||a===f.Up&&!i;if(p&&g.x!==d.x){let e=n.scrollLeft+t.x,i=a===f.Right&&e<=u.x||a===f.Left&&e>=h.x;if(i&&!t.y)return void n.scrollTo({left:e,behavior:l});i?r.x=n.scrollLeft-e:r.x=a===f.Right?n.scrollLeft-u.x:n.scrollLeft-h.x,r.x&&n.scrollBy({left:-r.x,behavior:l});break}if(b&&g.y!==d.y){let e=n.scrollTop+t.y,i=a===f.Down&&e<=u.y||a===f.Up&&e>=h.y;if(i&&!t.x)return void n.scrollTo({top:e,behavior:l});i?r.y=n.scrollTop-e:r.y=a===f.Down?n.scrollTop-u.y:n.scrollTop-h.y,r.y&&n.scrollBy({top:-r.y,behavior:l});break}}this.handleMove(e,el(es(d,this.referenceCoordinates),r))}}}handleMove(e,t){let{onMove:n}=this.props;e.preventDefault(),n(t)}handleEnd(e){let{onEnd:t}=this.props;e.preventDefault(),this.detach(),t()}handleCancel(e){let{onCancel:t}=this.props;e.preventDefault(),this.detach(),t()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}function eZ(e){return!!(e&&"distance"in e)}function e0(e){return!!(e&&"delay"in e)}eQ.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:r=eG,onActivation:a}=t,{active:i}=n,{code:l}=e.nativeEvent;if(r.start.includes(l)){let t=i.activatorNode.current;return(!t||e.target===t)&&(e.preventDefault(),null==a||a({event:e.nativeEvent}),!0)}return!1}}];class e1{constructor(e,t,n){var r;void 0===n&&(n=function(e){let{EventTarget:t}=q(e);return e instanceof t?e:G(e)}(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=t;const{event:a}=e,{target:i}=a;this.props=e,this.events=t,this.document=G(i),this.documentListeners=new eq(this.document),this.listeners=new eq(n),this.windowListeners=new eq(q(i)),this.initialCoordinates=null!=(r=ec(a))?r:ew,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){let{events:e,props:{options:{activationConstraint:t,bypassActivationConstraint:n}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(m.Resize,this.handleCancel),this.windowListeners.add(m.DragStart,eH),this.windowListeners.add(m.VisibilityChange,this.handleCancel),this.windowListeners.add(m.ContextMenu,eH),this.documentListeners.add(m.Keydown,this.handleKeydown),t){if(null!=n&&n({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(e0(t)){this.timeoutId=setTimeout(this.handleStart,t.delay),this.handlePending(t);return}if(eZ(t))return void this.handlePending(t)}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),null!==this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,t){let{active:n,onPending:r}=this.props;r(n,e,this.initialCoordinates,t)}handleStart(){let{initialCoordinates:e}=this,{onStart:t}=this.props;e&&(this.activated=!0,this.documentListeners.add(m.Click,eJ,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(m.SelectionChange,this.removeTextSelection),t(e))}handleMove(e){var t;let{activated:n,initialCoordinates:r,props:a}=this,{onMove:i,options:{activationConstraint:l}}=a;if(!r)return;let s=null!=(t=ec(e))?t:ew,o=es(r,s);if(!n&&l){if(eZ(l)){if(null!=l.tolerance&&eK(o,l.tolerance))return this.handleCancel();if(eK(o,l.distance))return this.handleStart()}return e0(l)&&eK(o,l.tolerance)?this.handleCancel():void this.handlePending(l,o)}e.cancelable&&e.preventDefault(),i(s)}handleEnd(){let{onAbort:e,onEnd:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleCancel(){let{onAbort:e,onCancel:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleKeydown(e){e.code===f.Esc&&this.handleCancel()}removeTextSelection(){var e;null==(e=this.document.getSelection())||e.removeAllRanges()}}let e2={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class e5 extends e1{constructor(e){const{event:t}=e;super(e,e2,G(t.target))}}e5.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return!!n.isPrimary&&0===n.button&&(null==r||r({event:n}),!0)}}];let e3={move:{name:"mousemove"},end:{name:"mouseup"}};(l=g||(g={}))[l.RightClick=2]="RightClick";class e4 extends e1{constructor(e){super(e,e3,G(e.event.target))}}e4.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return n.button!==g.RightClick&&(null==r||r({event:n}),!0)}}];let e8={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class e6 extends e1{constructor(e){super(e,e8)}static setup(){return window.addEventListener(e8.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(e8.move.name,e)};function e(){}}}e6.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t,{touches:a}=n;return!(a.length>1)&&(null==r||r({event:n}),!0)}}],(s=p||(p={}))[s.Pointer=0]="Pointer",s[s.DraggableRect=1]="DraggableRect",(o=b||(b={}))[o.TreeOrder=0]="TreeOrder",o[o.ReversedTreeOrder=1]="ReversedTreeOrder";let e7={x:{[h.Backward]:!1,[h.Forward]:!1},y:{[h.Backward]:!1,[h.Forward]:!1}};(c=v||(v={}))[c.Always=0]="Always",c[c.BeforeDragging=1]="BeforeDragging",c[c.WhileDragging=2]="WhileDragging",(x||(x={})).Optimized="optimized";let e9=new Map;function te(e,t){return ee(n=>e?n||("function"==typeof t?t(e):e):null,[t,e])}function tt(e){let{callback:t,disabled:n}=e,r=Q(t),a=(0,j.useMemo)(()=>{if(n||"undefined"==typeof window||void 0===window.ResizeObserver)return;let{ResizeObserver:e}=window;return new e(r)},[n]);return(0,j.useEffect)(()=>()=>null==a?void 0:a.disconnect(),[a]),a}function tn(e){return new eX(eM(e),e)}function tr(e,t,n){void 0===t&&(t=tn);let[r,a]=(0,j.useState)(null);function i(){a(r=>{if(!e)return null;if(!1===e.isConnected){var a;return null!=(a=null!=r?r:n)?a:null}let i=t(e);return JSON.stringify(r)===JSON.stringify(i)?r:i})}let l=function(e){let{callback:t,disabled:n}=e,r=Q(t),a=(0,j.useMemo)(()=>{if(n||"undefined"==typeof window||void 0===window.MutationObserver)return;let{MutationObserver:e}=window;return new e(r)},[r,n]);return(0,j.useEffect)(()=>()=>null==a?void 0:a.disconnect(),[a]),a}({callback(t){if(e)for(let n of t){let{type:t,target:r}=n;if("childList"===t&&r instanceof HTMLElement&&r.contains(e)){i();break}}}}),s=tt({callback:i});return V(()=>{i(),e?(null==s||s.observe(e),null==l||l.observe(document.body,{childList:!0,subtree:!0})):(null==s||s.disconnect(),null==l||l.disconnect())},[e]),r}let ta=[];function ti(e,t){void 0===t&&(t=[]);let n=(0,j.useRef)(null);return(0,j.useEffect)(()=>{n.current=null},t),(0,j.useEffect)(()=>{let t=e!==ew;t&&!n.current&&(n.current=e),!t&&n.current&&(n.current=null)},[e]),n.current?es(e,n.current):ew}function tl(e){return(0,j.useMemo)(()=>{let t,n;return e?(t=e.innerWidth,{top:0,left:0,right:t,bottom:n=e.innerHeight,width:t,height:n}):null},[e])}let ts=[];function to(e){if(!e)return null;if(e.children.length>1)return e;let t=e.children[0];return H(t)?t:e}let tc=[{sensor:e5,options:{}},{sensor:eQ,options:{}}],td={current:{}},tu={draggable:{measure:eO},droppable:{measure:eO,strategy:v.WhileDragging,frequency:x.Optimized},dragOverlay:{measure:eM}};class th extends Map{get(e){var t;return null!=e&&null!=(t=super.get(e))?t:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:t}=e;return!t})}getNodeFor(e){var t,n;return null!=(t=null==(n=this.get(e))?void 0:n.node.current)?t:void 0}}let tm={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new th,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:ex},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:tu,measureDroppableContainers:ex,windowRect:null,measuringScheduled:!1},tf={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:ex,draggableNodes:new Map,over:null,measureDroppableContainers:ex},tg=(0,j.createContext)(tf),tp=(0,j.createContext)(tm);function tb(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new th}}}function tv(e,t){switch(t.type){case u.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case u.DragMove:if(null==e.draggable.active)return e;return{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case u.DragEnd:case u.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case u.RegisterDroppable:{let{element:n}=t,{id:r}=n,a=new th(e.droppable.containers);return a.set(r,n),{...e,droppable:{...e.droppable,containers:a}}}case u.SetDroppableDisabled:{let{id:n,key:r,disabled:a}=t,i=e.droppable.containers.get(n);if(!i||r!==i.key)return e;let l=new th(e.droppable.containers);return l.set(n,{...i,disabled:a}),{...e,droppable:{...e.droppable,containers:l}}}case u.UnregisterDroppable:{let{id:n,key:r}=t,a=e.droppable.containers.get(n);if(!a||r!==a.key)return e;let i=new th(e.droppable.containers);return i.delete(n),{...e,droppable:{...e.droppable,containers:i}}}default:return e}}function tx(e){let{disabled:t}=e,{active:n,activatorEvent:r,draggableNodes:a}=(0,j.useContext)(tg),i=en(r),l=en(null==n?void 0:n.id);return(0,j.useEffect)(()=>{if(!t&&!r&&i&&null!=l){if(!eo(i)||document.activeElement===i.target)return;let e=a.get(l);if(!e)return;let{activatorNode:t,node:n}=e;(t.current||n.current)&&requestAnimationFrame(()=>{for(let e of[t.current,n.current]){if(!e)continue;let t=e.matches(eu)?e:e.querySelector(eu);if(t){t.focus();break}}})}},[r,t,a,l,i]),null}function ty(e,t){let{transform:n,...r}=t;return null!=e&&e.length?e.reduce((e,t)=>t({transform:e,...r}),n):n}let tw=(0,j.createContext)({...ew,scaleX:1,scaleY:1});(d=y||(y={}))[d.Uninitialized=0]="Uninitialized",d[d.Initializing=1]="Initializing",d[d.Initialized=2]="Initialized";let tj=(0,j.memo)(function(e){var t,n,r,a,i,l,s,o;let c,d,m,f,g,x,w,k,{id:N,accessibility:S,autoScroll:C=!0,children:E,sensors:D=tc,collisionDetection:T=eC,measuring:R,modifiers:M,...O}=e,[A,I]=(0,j.useReducer)(tv,void 0,tb),[L,P]=function(){let[e]=(0,j.useState)(()=>new Set),t=(0,j.useCallback)(t=>(e.add(t),()=>e.delete(t)),[e]);return[(0,j.useCallback)(t=>{let{type:n,event:r}=t;e.forEach(e=>{var t;return null==(t=e[n])?void 0:t.call(e,r)})},[e]),t]}(),[$,z]=(0,j.useState)(y.Uninitialized),F=$===y.Initialized,{draggable:{active:B,nodes:_,translate:U},droppable:{containers:X}}=A,K=null!=B?_.get(B):null,J=(0,j.useRef)({initial:null,translated:null}),G=(0,j.useMemo)(()=>{var e;return null!=B?{id:B,data:null!=(e=null==K?void 0:K.data)?e:td,rect:J}:null},[B,K]),Q=(0,j.useRef)(null),[er,ei]=(0,j.useState)(null),[es,eo]=(0,j.useState)(null),ed=Z(O,Object.values(O)),eu=ea("DndDescribedBy",N),eh=(0,j.useMemo)(()=>X.getEnabled(),[X]),em=(0,j.useMemo)(()=>({draggable:{...tu.draggable,...null==R?void 0:R.draggable},droppable:{...tu.droppable,...null==R?void 0:R.droppable},dragOverlay:{...tu.dragOverlay,...null==R?void 0:R.dragOverlay}}),[null==R?void 0:R.draggable,null==R?void 0:R.droppable,null==R?void 0:R.dragOverlay]),{droppableRects:ef,measureDroppableContainers:ep,measuringScheduled:eb}=function(e,t){let{dragging:n,dependencies:r,config:a}=t,[i,l]=(0,j.useState)(null),{frequency:s,measure:o,strategy:c}=a,d=(0,j.useRef)(e),u=function(){switch(c){case v.Always:return!1;case v.BeforeDragging:return n;default:return!n}}(),h=Z(u),m=(0,j.useCallback)(function(e){void 0===e&&(e=[]),h.current||l(t=>null===t?e:t.concat(e.filter(e=>!t.includes(e))))},[h]),f=(0,j.useRef)(null),g=ee(t=>{if(u&&!n)return e9;if(!t||t===e9||d.current!==e||null!=i){let t=new Map;for(let n of e){if(!n)continue;if(i&&i.length>0&&!i.includes(n.id)&&n.rect.current){t.set(n.id,n.rect.current);continue}let e=n.node.current,r=e?new eX(o(e),e):null;n.rect.current=r,r&&t.set(n.id,r)}return t}return t},[e,i,n,u,o]);return(0,j.useEffect)(()=>{d.current=e},[e]),(0,j.useEffect)(()=>{u||m()},[n,u]),(0,j.useEffect)(()=>{i&&i.length>0&&l(null)},[JSON.stringify(i)]),(0,j.useEffect)(()=>{u||"number"!=typeof s||null!==f.current||(f.current=setTimeout(()=>{m(),f.current=null},s))},[s,u,m,...r]),{droppableRects:g,measureDroppableContainers:m,measuringScheduled:null!=i}}(eh,{dragging:F,dependencies:[U.x,U.y],config:em.droppable}),ex=ee(e=>{var t;return null==B?null:null!=(t=null!=g?g:e)?t:null},[g=(f=null!=B?_.get(B):void 0)?f.node.current:null,B]),ey=(0,j.useMemo)(()=>es?ec(es):null,[es]),ej=(c=(null==er?void 0:er.autoScrollEnabled)===!1,d="object"==typeof C?!1===C.enabled:!1===C,m=F&&!c&&!d,"object"==typeof C?{...C,enabled:m}:{enabled:m}),ek=te(ex,em.draggable.measure);!function(e){let{activeNode:t,measure:n,initialRect:r,config:a=!0}=e,i=(0,j.useRef)(!1),{x:l,y:s}="boolean"==typeof a?{x:a,y:a}:a;V(()=>{if(!l&&!s||!t){i.current=!1;return}if(i.current||!r)return;let e=null==t?void 0:t.node.current;if(!e||!1===e.isConnected)return;let a=eE(n(e),r);if(l||(a.x=0),s||(a.y=0),i.current=!0,Math.abs(a.x)>0||Math.abs(a.y)>0){let t=eI(e);t&&t.scrollBy({top:a.y,left:a.x})}},[t,l,s,r,n])}({activeNode:null!=B?_.get(B):null,config:ej.layoutShiftCompensation,initialRect:ek,measure:em.draggable.measure});let eN=tr(ex,em.draggable.measure,ek),eS=tr(ex?ex.parentElement:null),eT=(0,j.useRef)({activatorEvent:null,active:null,activeNode:ex,collisionRect:null,collisions:null,droppableRects:ef,draggableNodes:_,draggingNode:null,draggingNodeRect:null,droppableContainers:X,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),eR=X.getNodeFor(null==(t=eT.current.over)?void 0:t.id),eO=function(e){let{measure:t}=e,[n,r]=(0,j.useState)(null),a=tt({callback:(0,j.useCallback)(e=>{for(let{target:n}of e)if(H(n)){r(e=>{let r=t(n);return e?{...e,width:r.width,height:r.height}:r});break}},[t])}),[i,l]=et((0,j.useCallback)(e=>{let n=to(e);null==a||a.disconnect(),n&&(null==a||a.observe(n)),r(n?t(n):null)},[t,a]));return(0,j.useMemo)(()=>({nodeRef:i,rect:n,setRef:l}),[n,i,l])}({measure:em.dragOverlay.measure}),eP=null!=(n=eO.nodeRef.current)?n:ex,e$=F?null!=(r=eO.rect)?r:eN:null,eW=!!(eO.nodeRef.current&&eO.rect),eU=(x=te(i=eW?null:eN),eE(i,x)),eq=tl(eP?q(eP):null),eK=(l=F?null!=eR?eR:ex:null,w=(0,j.useRef)(l),k=ee(e=>l?e&&e!==ta&&l&&w.current&&l.parentNode===w.current.parentNode?e:eA(l):ta,[l]),(0,j.useEffect)(()=>{w.current=l},[l]),k),eH=function(e,t){void 0===t&&(t=eM);let[n]=e,r=tl(n?q(n):null),[a,i]=(0,j.useState)(ts);function l(){i(()=>e.length?e.map(e=>eF(e)?r:new eX(t(e),e)):ts)}let s=tt({callback:l});return V(()=>{null==s||s.disconnect(),l(),e.forEach(e=>null==s?void 0:s.observe(e))},[e]),a}(eK),eJ=ty(M,{transform:{x:U.x-eU.x,y:U.y-eU.y,scaleX:1,scaleY:1},activatorEvent:es,active:G,activeNodeRect:eN,containerNodeRect:eS,draggingNodeRect:e$,over:eT.current.over,overlayNodeRect:eO.rect,scrollableAncestors:eK,scrollableAncestorRects:eH,windowRect:eq}),eG=ey?el(ey,U):null,eV=function(e){let[t,n]=(0,j.useState)(null),r=(0,j.useRef)(e),a=(0,j.useCallback)(e=>{let t=eL(e.target);t&&n(e=>e?(e.set(t,ez(t)),new Map(e)):null)},[]);return(0,j.useEffect)(()=>{let t=r.current;if(e!==t){i(t);let l=e.map(e=>{let t=eL(e);return t?(t.addEventListener("scroll",a,{passive:!0}),[t,ez(t)]):null}).filter(e=>null!=e);n(l.length?new Map(l):null),r.current=e}return()=>{i(e),i(t)};function i(e){e.forEach(e=>{let t=eL(e);null==t||t.removeEventListener("scroll",a)})}},[a,e]),(0,j.useMemo)(()=>e.length?t?Array.from(t.values()).reduce((e,t)=>el(e,t),ew):eY(e):ew,[e,t])}(eK),eQ=ti(eV),eZ=ti(eV,[eN]),e0=el(eJ,eQ),e1=e$?eD(e$,eJ):null,e2=G&&e1?T({active:G,collisionRect:e1,droppableRects:ef,droppableContainers:eh,pointerCoordinates:eG}):null,e5=function(e,t){if(!e||0===e.length)return null;let[n]=e;return n.id}(e2,0),[e3,e4]=(0,j.useState)(null),e8=(s=eW?eJ:el(eJ,eZ),o=null!=(a=null==e3?void 0:e3.rect)?a:null,{...s,scaleX:o&&eN?o.width/eN.width:1,scaleY:o&&eN?o.height/eN.height:1}),e6=(0,j.useRef)(null),tn=(0,j.useCallback)((e,t)=>{let{sensor:n,options:r}=t;if(null==Q.current)return;let a=_.get(Q.current);if(!a)return;let i=e.nativeEvent,l=new n({active:Q.current,activeNode:a,event:i,options:r,context:eT,onAbort(e){if(!_.get(e))return;let{onDragAbort:t}=ed.current,n={id:e};null==t||t(n),L({type:"onDragAbort",event:n})},onPending(e,t,n,r){if(!_.get(e))return;let{onDragPending:a}=ed.current,i={id:e,constraint:t,initialCoordinates:n,offset:r};null==a||a(i),L({type:"onDragPending",event:i})},onStart(e){let t=Q.current;if(null==t)return;let n=_.get(t);if(!n)return;let{onDragStart:r}=ed.current,a={activatorEvent:i,active:{id:t,data:n.data,rect:J}};(0,Y.unstable_batchedUpdates)(()=>{null==r||r(a),z(y.Initializing),I({type:u.DragStart,initialCoordinates:e,active:t}),L({type:"onDragStart",event:a}),ei(e6.current),eo(i)})},onMove(e){I({type:u.DragMove,coordinates:e})},onEnd:s(u.DragEnd),onCancel:s(u.DragCancel)});function s(e){return async function(){let{active:t,collisions:n,over:r,scrollAdjustedTranslate:a}=eT.current,l=null;if(t&&a){let{cancelDrop:s}=ed.current;l={activatorEvent:i,active:t,collisions:n,delta:a,over:r},e===u.DragEnd&&"function"==typeof s&&await Promise.resolve(s(l))&&(e=u.DragCancel)}Q.current=null,(0,Y.unstable_batchedUpdates)(()=>{I({type:e}),z(y.Uninitialized),e4(null),ei(null),eo(null),e6.current=null;let t=e===u.DragEnd?"onDragEnd":"onDragCancel";if(l){let e=ed.current[t];null==e||e(l),L({type:t,event:l})}})}}e6.current=l},[_]),th=(0,j.useCallback)((e,t)=>(n,r)=>{let a=n.nativeEvent,i=_.get(r);null!==Q.current||!i||a.dndKit||a.defaultPrevented||!0===e(n,t.options,{active:i})&&(a.dndKit={capturedBy:t.sensor},Q.current=r,tn(n,t))},[_,tn]),tm=(0,j.useMemo)(()=>D.reduce((e,t)=>{let{sensor:n}=t;return[...e,...n.activators.map(e=>({eventName:e.eventName,handler:th(e.handler,t)}))]},[]),[D,th]);(0,j.useEffect)(()=>{if(!W)return;let e=D.map(e=>{let{sensor:t}=e;return null==t.setup?void 0:t.setup()});return()=>{for(let t of e)null==t||t()}},D.map(e=>{let{sensor:t}=e;return t})),V(()=>{eN&&$===y.Initializing&&z(y.Initialized)},[eN,$]),(0,j.useEffect)(()=>{let{onDragMove:e}=ed.current,{active:t,activatorEvent:n,collisions:r,over:a}=eT.current;if(!t||!n)return;let i={active:t,activatorEvent:n,collisions:r,delta:{x:e0.x,y:e0.y},over:a};(0,Y.unstable_batchedUpdates)(()=>{null==e||e(i),L({type:"onDragMove",event:i})})},[e0.x,e0.y]),(0,j.useEffect)(()=>{let{active:e,activatorEvent:t,collisions:n,droppableContainers:r,scrollAdjustedTranslate:a}=eT.current;if(!e||null==Q.current||!t||!a)return;let{onDragOver:i}=ed.current,l=r.get(e5),s=l&&l.rect.current?{id:l.id,rect:l.rect.current,data:l.data,disabled:l.disabled}:null,o={active:e,activatorEvent:t,collisions:n,delta:{x:a.x,y:a.y},over:s};(0,Y.unstable_batchedUpdates)(()=>{e4(s),null==i||i(o),L({type:"onDragOver",event:o})})},[e5]),V(()=>{eT.current={activatorEvent:es,active:G,activeNode:ex,collisionRect:e1,collisions:e2,droppableRects:ef,draggableNodes:_,draggingNode:eP,draggingNodeRect:e$,droppableContainers:X,over:e3,scrollableAncestors:eK,scrollAdjustedTranslate:e0},J.current={initial:e$,translated:e1}},[G,ex,e2,e1,_,eP,e$,ef,X,e3,eK,e0]),function(e){let t,{acceleration:n,activator:r=p.Pointer,canScroll:a,draggingRect:i,enabled:l,interval:s=5,order:o=b.TreeOrder,pointerCoordinates:c,scrollableAncestors:d,scrollableAncestorRects:u,delta:m,threshold:f}=e,g=function(e){let{delta:t,disabled:n}=e,r=en(t);return ee(e=>{if(n||!r||!e)return e7;let a={x:Math.sign(t.x-r.x),y:Math.sign(t.y-r.y)};return{x:{[h.Backward]:e.x[h.Backward]||-1===a.x,[h.Forward]:e.x[h.Forward]||1===a.x},y:{[h.Backward]:e.y[h.Backward]||-1===a.y,[h.Forward]:e.y[h.Forward]||1===a.y}}},[n,t,r])}({delta:m,disabled:!l}),[v,x]=(t=(0,j.useRef)(null),[(0,j.useCallback)((e,n)=>{t.current=setInterval(e,n)},[]),(0,j.useCallback)(()=>{null!==t.current&&(clearInterval(t.current),t.current=null)},[])]),y=(0,j.useRef)({x:0,y:0}),w=(0,j.useRef)({x:0,y:0}),k=(0,j.useMemo)(()=>{switch(r){case p.Pointer:return c?{top:c.y,bottom:c.y,left:c.x,right:c.x}:null;case p.DraggableRect:return i}},[r,i,c]),N=(0,j.useRef)(null),S=(0,j.useCallback)(()=>{let e=N.current;if(!e)return;let t=y.current.x*w.current.x,n=y.current.y*w.current.y;e.scrollBy(t,n)},[]),C=(0,j.useMemo)(()=>o===b.TreeOrder?[...d].reverse():d,[o,d]);(0,j.useEffect)(()=>{if(!l||!d.length||!k)return void x();for(let e of C){if((null==a?void 0:a(e))===!1)continue;let t=u[d.indexOf(e)];if(!t)continue;let{direction:r,speed:i}=function(e,t,n,r,a){let{top:i,left:l,right:s,bottom:o}=n;void 0===r&&(r=10),void 0===a&&(a=e_);let{isTop:c,isBottom:d,isLeft:u,isRight:m}=eB(e),f={x:0,y:0},g={x:0,y:0},p={height:t.height*a.y,width:t.width*a.x};return!c&&i<=t.top+p.height?(f.y=h.Backward,g.y=r*Math.abs((t.top+p.height-i)/p.height)):!d&&o>=t.bottom-p.height&&(f.y=h.Forward,g.y=r*Math.abs((t.bottom-p.height-o)/p.height)),!m&&s>=t.right-p.width?(f.x=h.Forward,g.x=r*Math.abs((t.right-p.width-s)/p.width)):!u&&l<=t.left+p.width&&(f.x=h.Backward,g.x=r*Math.abs((t.left+p.width-l)/p.width)),{direction:f,speed:g}}(e,t,k,n,f);for(let e of["x","y"])g[e][r[e]]||(i[e]=0,r[e]=0);if(i.x>0||i.y>0){x(),N.current=e,v(S,s),y.current=i,w.current=r;return}}y.current={x:0,y:0},w.current={x:0,y:0},x()},[n,S,a,x,l,s,JSON.stringify(k),JSON.stringify(g),v,d,C,u,JSON.stringify(f)])}({...ej,delta:U,draggingRect:e1,pointerCoordinates:eG,scrollableAncestors:eK,scrollableAncestorRects:eH});let tf=(0,j.useMemo)(()=>({active:G,activeNode:ex,activeNodeRect:eN,activatorEvent:es,collisions:e2,containerNodeRect:eS,dragOverlay:eO,draggableNodes:_,droppableContainers:X,droppableRects:ef,over:e3,measureDroppableContainers:ep,scrollableAncestors:eK,scrollableAncestorRects:eH,measuringConfiguration:em,measuringScheduled:eb,windowRect:eq}),[G,ex,eN,es,e2,eS,eO,_,X,ef,e3,ep,eK,eH,em,eb,eq]),tj=(0,j.useMemo)(()=>({activatorEvent:es,activators:tm,active:G,activeNodeRect:eN,ariaDescribedById:{draggable:eu},dispatch:I,draggableNodes:_,over:e3,measureDroppableContainers:ep}),[es,tm,G,eN,I,eu,_,e3,ep]);return j.default.createElement(eg.Provider,{value:P},j.default.createElement(tg.Provider,{value:tj},j.default.createElement(tp.Provider,{value:tf},j.default.createElement(tw.Provider,{value:e8},E)),j.default.createElement(tx,{disabled:(null==S?void 0:S.restoreFocus)===!1})),j.default.createElement(ev,{...S,hiddenTextDescribedById:eu}))}),tk=(0,j.createContext)(null),tN="button";function tS(){return(0,j.useContext)(tp)}let tC={timeout:25};function tE(e){let{animation:t,children:n}=e,[r,a]=(0,j.useState)(null),[i,l]=(0,j.useState)(null),s=en(n);return n||r||!s||a(s),V(()=>{if(!i)return;let e=null==r?void 0:r.key,n=null==r?void 0:r.props.id;null==e||null==n?a(null):Promise.resolve(t(n,i)).then(()=>{a(null)})},[t,r,i]),j.default.createElement(j.default.Fragment,null,n,r?(0,j.cloneElement)(r,{ref:l}):null)}let tD={x:0,y:0,scaleX:1,scaleY:1};function tT(e){let{children:t}=e;return j.default.createElement(tg.Provider,{value:tf},j.default.createElement(tw.Provider,{value:tD},t))}let tR={position:"fixed",touchAction:"none"},tM=e=>eo(e)?"transform 250ms ease":void 0,tO=(0,j.forwardRef)((e,t)=>{let{as:n,activatorEvent:r,adjustScale:a,children:i,className:l,rect:s,style:o,transform:c,transition:d=tM}=e;if(!s)return null;let u=a?c:{...c,scaleX:1,scaleY:1},h={...tR,width:s.width,height:s.height,top:s.top,left:s.left,transform:ed.Transform.toString(u),transformOrigin:a&&r?function(e,t){let n=ec(e);if(!n)return"0 0";let r={x:(n.x-t.left)/t.width*100,y:(n.y-t.top)/t.height*100};return r.x+"% "+r.y+"%"}(r,s):void 0,transition:"function"==typeof d?d(r):d,...o};return j.default.createElement(n,{className:l,style:h,ref:t},i)}),tA={duration:250,easing:"ease",keyframes:e=>{let{transform:{initial:t,final:n}}=e;return[{transform:ed.Transform.toString(t)},{transform:ed.Transform.toString(n)}]},sideEffects:(t={styles:{active:{opacity:"0"}}},e=>{let{active:n,dragOverlay:r}=e,a={},{styles:i,className:l}=t;if(null!=i&&i.active)for(let[e,t]of Object.entries(i.active))void 0!==t&&(a[e]=n.node.style.getPropertyValue(e),n.node.style.setProperty(e,t));if(null!=i&&i.dragOverlay)for(let[e,t]of Object.entries(i.dragOverlay))void 0!==t&&r.node.style.setProperty(e,t);return null!=l&&l.active&&n.node.classList.add(l.active),null!=l&&l.dragOverlay&&r.node.classList.add(l.dragOverlay),function(){for(let[e,t]of Object.entries(a))n.node.style.setProperty(e,t);null!=l&&l.active&&n.node.classList.remove(l.active)}})},tI=0,tL=j.default.memo(e=>{var t;let{adjustScale:n=!1,children:r,dropAnimation:a,style:i,transition:l,modifiers:s,wrapperElement:o="div",className:c,zIndex:d=999}=e,{activatorEvent:u,active:h,activeNodeRect:m,containerNodeRect:f,draggableNodes:g,droppableContainers:p,dragOverlay:b,over:v,measuringConfiguration:x,scrollableAncestors:y,scrollableAncestorRects:w,windowRect:k}=tS(),N=(0,j.useContext)(tw),S=(t=null==h?void 0:h.id,(0,j.useMemo)(()=>{if(null!=t)return++tI},[t])),C=ty(s,{activatorEvent:u,active:h,activeNodeRect:m,containerNodeRect:f,draggingNodeRect:b.rect,over:v,overlayNodeRect:b.rect,scrollableAncestors:y,scrollableAncestorRects:w,transform:N,windowRect:k}),E=te(m),D=function(e){let{config:t,draggableNodes:n,droppableContainers:r,measuringConfiguration:a}=e;return Q((e,i)=>{if(null===t)return;let l=n.get(e);if(!l)return;let s=l.node.current;if(!s)return;let o=to(i);if(!o)return;let{transform:c}=q(i).getComputedStyle(i),d=eT(c);if(!d)return;let u="function"==typeof t?t:function(e){let{duration:t,easing:n,sideEffects:r,keyframes:a}={...tA,...e};return e=>{let{active:i,dragOverlay:l,transform:s,...o}=e;if(!t)return;let c={x:l.rect.left-i.rect.left,y:l.rect.top-i.rect.top},d={scaleX:1!==s.scaleX?i.rect.width*s.scaleX/l.rect.width:1,scaleY:1!==s.scaleY?i.rect.height*s.scaleY/l.rect.height:1},u={x:s.x-c.x,y:s.y-c.y,...d},h=a({...o,active:i,dragOverlay:l,transform:{initial:s,final:u}}),[m]=h,f=h[h.length-1];if(JSON.stringify(m)===JSON.stringify(f))return;let g=null==r?void 0:r({active:i,dragOverlay:l,...o}),p=l.node.animate(h,{duration:t,easing:n,fill:"forwards"});return new Promise(e=>{p.onfinish=()=>{null==g||g(),e()}})}}(t);return eW(s,a.draggable.measure),u({active:{id:e,data:l.data,node:s,rect:a.draggable.measure(s)},draggableNodes:n,dragOverlay:{node:i,rect:a.dragOverlay.measure(o)},droppableContainers:r,measuringConfiguration:a,transform:d})})}({config:a,draggableNodes:g,droppableContainers:p,measuringConfiguration:x}),T=E?b.setRef:void 0;return j.default.createElement(tT,null,j.default.createElement(tE,{animation:D},h&&S?j.default.createElement(tO,{key:S,id:h.id,ref:T,as:o,activatorEvent:u,adjustScale:n,className:c,transition:l,rect:E,style:{zIndex:d,...i},transform:C},r):null))});function tP(e,t,n){let r=e.slice();return r.splice(n<0?r.length+n:n,0,r.splice(t,1)[0]),r}function t$(e){return null!==e&&e>=0}let tz=e=>{let{rects:t,activeIndex:n,overIndex:r,index:a}=e,i=tP(t,r,n),l=t[a],s=i[a];return s&&l?{x:s.left-l.left,y:s.top-l.top,scaleX:s.width/l.width,scaleY:s.height/l.height}:null},tF="Sortable",tB=j.default.createContext({activeIndex:-1,containerId:tF,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:tz,disabled:{draggable:!1,droppable:!1}});function t_(e){let{children:t,id:n,items:r,strategy:a=tz,disabled:i=!1}=e,{active:l,dragOverlay:s,droppableRects:o,over:c,measureDroppableContainers:d}=tS(),u=ea(tF,n),h=null!==s.rect,m=(0,j.useMemo)(()=>r.map(e=>"object"==typeof e&&"id"in e?e.id:e),[r]),f=null!=l,g=l?m.indexOf(l.id):-1,p=c?m.indexOf(c.id):-1,b=(0,j.useRef)(m),v=!function(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}(m,b.current),x=-1!==p&&-1===g||v,y="boolean"==typeof i?{draggable:i,droppable:i}:i;V(()=>{v&&f&&d(m)},[v,m,f,d]),(0,j.useEffect)(()=>{b.current=m},[m]);let w=(0,j.useMemo)(()=>({activeIndex:g,containerId:u,disabled:y,disableTransforms:x,items:m,overIndex:p,useDragOverlay:h,sortedRects:m.reduce((e,t,n)=>{let r=o.get(t);return r&&(e[n]=r),e},Array(m.length)),strategy:a}),[g,u,y.draggable,y.droppable,x,m,p,o,h,a]);return j.default.createElement(tB.Provider,{value:w},t)}let tY=e=>{let{id:t,items:n,activeIndex:r,overIndex:a}=e;return tP(n,r,a).indexOf(t)},tW=e=>{let{containerId:t,isSorting:n,wasDragging:r,index:a,items:i,newIndex:l,previousItems:s,previousContainerId:o,transition:c}=e;return!!c&&!!r&&(s===i||a!==l)&&(!!n||l!==a&&t===o)},tU={duration:200,easing:"ease"},tX="transform",tq=ed.Transition.toString({property:tX,duration:0,easing:"linear"}),tK={roleDescription:"sortable"};f.Down,f.Right,f.Up,f.Left;let tH=({task:e,theme:t})=>{let{attributes:n,listeners:r,setNodeRef:a,transform:i,transition:l,isDragging:s}=function(e){var t,n,r,a;let{animateLayoutChanges:i=tW,attributes:l,disabled:s,data:o,getNewIndex:c=tY,id:d,strategy:h,resizeObserverConfig:m,transition:f=tU}=e,{items:g,containerId:p,activeIndex:b,disabled:v,disableTransforms:x,sortedRects:y,overIndex:w,useDragOverlay:k,strategy:N}=(0,j.useContext)(tB),S=(t=s,n=v,"boolean"==typeof t?{draggable:t,droppable:!1}:{draggable:null!=(r=null==t?void 0:t.draggable)?r:n.draggable,droppable:null!=(a=null==t?void 0:t.droppable)?a:n.droppable}),C=g.indexOf(d),E=(0,j.useMemo)(()=>({sortable:{containerId:p,index:C,items:g},...o}),[p,o,C,g]),D=(0,j.useMemo)(()=>g.slice(g.indexOf(d)),[g,d]),{rect:T,node:R,isOver:M,setNodeRef:O}=function(e){let{data:t,disabled:n=!1,id:r,resizeObserverConfig:a}=e,i=ea("Droppable"),{active:l,dispatch:s,over:o,measureDroppableContainers:c}=(0,j.useContext)(tg),d=(0,j.useRef)({disabled:n}),h=(0,j.useRef)(!1),m=(0,j.useRef)(null),f=(0,j.useRef)(null),{disabled:g,updateMeasurementsFor:p,timeout:b}={...tC,...a},v=Z(null!=p?p:r),x=tt({callback:(0,j.useCallback)(()=>{if(!h.current){h.current=!0;return}null!=f.current&&clearTimeout(f.current),f.current=setTimeout(()=>{c(Array.isArray(v.current)?v.current:[v.current]),f.current=null},b)},[b]),disabled:g||!l}),[y,w]=et((0,j.useCallback)((e,t)=>{x&&(t&&(x.unobserve(t),h.current=!1),e&&x.observe(e))},[x])),k=Z(t);return(0,j.useEffect)(()=>{x&&y.current&&(x.disconnect(),h.current=!1,x.observe(y.current))},[y,x]),(0,j.useEffect)(()=>(s({type:u.RegisterDroppable,element:{id:r,key:i,disabled:n,node:y,rect:m,data:k}}),()=>s({type:u.UnregisterDroppable,key:i,id:r})),[r]),(0,j.useEffect)(()=>{n!==d.current.disabled&&(s({type:u.SetDroppableDisabled,id:r,key:i,disabled:n}),d.current.disabled=n)},[r,i,n,s]),{active:l,rect:m,isOver:(null==o?void 0:o.id)===r,node:y,over:o,setNodeRef:w}}({id:d,data:E,disabled:S.droppable,resizeObserverConfig:{updateMeasurementsFor:D,...m}}),{active:A,activatorEvent:I,activeNodeRect:L,attributes:P,setNodeRef:$,listeners:z,isDragging:F,over:B,setActivatorNodeRef:_,transform:Y}=function(e){let{id:t,data:n,disabled:r=!1,attributes:a}=e,i=ea("Draggable"),{activators:l,activatorEvent:s,active:o,activeNodeRect:c,ariaDescribedById:d,draggableNodes:u,over:h}=(0,j.useContext)(tg),{role:m=tN,roleDescription:f="draggable",tabIndex:g=0}=null!=a?a:{},p=(null==o?void 0:o.id)===t,b=(0,j.useContext)(p?tw:tk),[v,x]=et(),[y,w]=et(),k=(0,j.useMemo)(()=>l.reduce((e,n)=>{let{eventName:r,handler:a}=n;return e[r]=e=>{a(e,t)},e},{}),[l,t]),N=Z(n);return V(()=>(u.set(t,{id:t,key:i,node:v,activatorNode:y,data:N}),()=>{let e=u.get(t);e&&e.key===i&&u.delete(t)}),[u,t]),{active:o,activatorEvent:s,activeNodeRect:c,attributes:(0,j.useMemo)(()=>({role:m,tabIndex:g,"aria-disabled":r,"aria-pressed":!!p&&m===tN||void 0,"aria-roledescription":f,"aria-describedby":d.draggable}),[r,m,g,p,f,d.draggable]),isDragging:p,listeners:r?void 0:k,node:v,over:h,setNodeRef:x,setActivatorNodeRef:w,transform:b}}({id:d,data:E,attributes:{...tK,...l},disabled:S.draggable}),W=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,j.useMemo)(()=>e=>{t.forEach(t=>t(e))},t)}(O,$),U=!!A,X=U&&!x&&t$(b)&&t$(w),q=!k&&F,K=q&&X?Y:null,H=X?null!=K?K:(null!=h?h:N)({rects:y,activeNodeRect:L,activeIndex:b,overIndex:w,index:C}):null,J=t$(b)&&t$(w)?c({id:d,items:g,activeIndex:b,overIndex:w}):C,G=null==A?void 0:A.id,Q=(0,j.useRef)({activeId:G,items:g,newIndex:J,containerId:p}),ee=g!==Q.current.items,en=i({active:A,containerId:p,isDragging:F,isSorting:U,id:d,index:C,items:g,newIndex:Q.current.newIndex,previousItems:Q.current.items,previousContainerId:Q.current.containerId,transition:f,wasDragging:null!=Q.current.activeId}),er=function(e){let{disabled:t,index:n,node:r,rect:a}=e,[i,l]=(0,j.useState)(null),s=(0,j.useRef)(n);return V(()=>{if(!t&&n!==s.current&&r.current){let e=a.current;if(e){let t=eM(r.current,{ignoreTransform:!0}),n={x:e.left-t.left,y:e.top-t.top,scaleX:e.width/t.width,scaleY:e.height/t.height};(n.x||n.y)&&l(n)}}n!==s.current&&(s.current=n)},[t,n,r,a]),(0,j.useEffect)(()=>{i&&l(null)},[i]),i}({disabled:!en,index:C,node:R,rect:T});return(0,j.useEffect)(()=>{U&&Q.current.newIndex!==J&&(Q.current.newIndex=J),p!==Q.current.containerId&&(Q.current.containerId=p),g!==Q.current.items&&(Q.current.items=g)},[U,J,p,g]),(0,j.useEffect)(()=>{if(G===Q.current.activeId)return;if(null!=G&&null==Q.current.activeId){Q.current.activeId=G;return}let e=setTimeout(()=>{Q.current.activeId=G},50);return()=>clearTimeout(e)},[G]),{active:A,activeIndex:b,attributes:P,data:E,rect:T,index:C,newIndex:J,items:g,isOver:M,isSorting:U,isDragging:F,listeners:z,node:R,overIndex:w,over:B,setNodeRef:W,setActivatorNodeRef:_,setDroppableNodeRef:O,setDraggableNodeRef:$,transform:null!=er?er:H,transition:er||ee&&Q.current.newIndex===C?tq:(!q||eo(I))&&f&&(U||en)?ed.Transition.toString({...f,property:tX}):void 0}}({id:e.id,transition:{duration:250,easing:"cubic-bezier(0.25, 0.8, 0.25, 1)"}}),o={transform:ed.Transform.toString(i),transition:l||"transform 250ms cubic-bezier(0.25, 0.8, 0.25, 1)",opacity:+!s,cursor:"grab",touchAction:"manipulation"};return(0,w.jsx)("div",{ref:a,style:o,...n,...r,children:(0,w.jsx)(C.default,{theme:t,task:e})})};e.s(["default",0,({theme:e})=>{let t=(0,k.useRouter)(),{user:n,logout:r}=(0,S.useAuth)(),[a,i]=(0,j.useState)(null),[l,s]=(0,j.useState)(!1),[o,c]=(0,j.useState)(null),[d,u]=(0,j.useState)(()=>localStorage.getItem("ai_chat_ui_mode")||"drawer"),h=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,j.useMemo)(()=>[...t].filter(e=>null!=e),[...t])}(ey(e4,{activationConstraint:{distance:10}}),ey(e6,{activationConstraint:{delay:200,tolerance:5}}),ey(e5,{activationConstraint:{distance:10}}));(0,j.useEffect)(()=>{let e=e=>{u(e.detail),s(!1)},t=()=>{let e=localStorage.getItem("ai_chat_ui_mode");e&&e!==d&&(u(e),s(!1))};return window.addEventListener("chatModeChanged",e),window.addEventListener("storage",t),()=>{window.removeEventListener("chatModeChanged",e),window.removeEventListener("storage",t)}},[d]);let m=(0,j.useCallback)(async()=>{if(n)try{let e=await (0,N.fetchTasks)();i(e.data.tasks||e.data)}catch(e){console.error("Error loading tasks:",e),e.response&&403===e.response.status&&r()}},[n,r]);(0,j.useEffect)(()=>{m()},[m]);let f=async()=>{try{let e=await (0,N.fetchTasks)(),t=e.data.tasks||e.data;return i(t),t}catch(e){console.error("Error refreshing tasks:",e)}},g=async e=>{let{active:t,over:n}=e;c(null),n&&t.id!==n.id&&i(e=>{let r=e.findIndex(e=>e.id===t.id),a=e.findIndex(e=>e.id===n.id);if(-1===r||-1===a)return e;let i=tP(e,r,a);return Promise.all(i.map((e,t)=>{let n=t+1;return e.priority!==n?(0,N.updateTaskPriority)(e.id,n).catch(t=>{console.error(`Error updating priority for task ${e.id}:`,t)}):Promise.resolve()})),i.map((e,t)=>({...e,priority:t+1}))})},p=()=>{t.push("/tasks/new/edit")},b=e=>{t.push("/tasks/new/edit",{state:{task:e}})};if(!a)return(0,w.jsx)("div",{className:"container mt-5",children:(0,w.jsx)("div",{className:"task-container",children:(0,w.jsxs)("div",{className:"card-body p-3",children:[(0,w.jsxs)("div",{className:"d-flex flex-row justify-content-between align-items-center mb-3 header-container",children:[(0,w.jsx)("h2",{className:"card-title mb-0",children:"Your Tasks"}),(0,w.jsx)("div",{className:"d-flex gap-2 button-group",children:(0,w.jsxs)("button",{className:`btn btn-outline-${"dark"===e?"light":"dark"} d-flex align-items-center gap-2`,onClick:p,"aria-label":"Create new task",children:[(0,w.jsx)("i",{className:"bi bi-plus-circle","aria-hidden":"true"}),(0,w.jsx)("span",{className:"button-text",children:"New Task"})]})})]}),(0,w.jsx)("div",{className:"shimmer-list",children:Array.from({length:5}).map((e,t)=>(0,w.jsxs)("div",{className:"shimmer-task-item",children:[(0,w.jsx)("div",{className:"shimmer-task-header"}),(0,w.jsx)("div",{className:"shimmer-task-body"})]},t))})]})})});let v=[...a].sort((e,t)=>e.priority-t.priority),x=o?a.find(e=>e.id===o):null;return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)("div",{className:"container mt-5",children:(0,w.jsx)("div",{className:"task-container",children:(0,w.jsxs)("div",{className:"card-body p-3",children:[(0,w.jsxs)("div",{className:"d-flex flex-row justify-content-between align-items-center mb-3 header-container",children:[(0,w.jsx)("h2",{className:"card-title mb-0",children:"Your Tasks"}),(0,w.jsx)("div",{className:"d-flex gap-2 button-group",children:(0,w.jsxs)("button",{className:`btn btn-outline-${"dark"===e?"light":"dark"} d-flex align-items-center gap-2`,onClick:p,children:[(0,w.jsx)("i",{className:"bi bi-plus-circle"}),(0,w.jsx)("span",{className:"button-text",children:"New Task"})]})})]}),0===a.length?(0,w.jsxs)("div",{className:"empty-state",children:[(0,w.jsx)("i",{className:"bi bi-clipboard-check empty-state-icon"}),(0,w.jsx)("p",{className:`text-${"dark"===e?"light":"muted"} mb-2`,children:"No tasks yet"}),(0,w.jsx)("small",{className:"text-muted",children:"Create your first task or use AI Assistant to get started"})]}):(0,w.jsxs)(tj,{sensors:h,collisionDetection:eS,onDragStart:e=>{c(e.active.id)},onDragEnd:g,onDragCancel:()=>{c(null)},children:[(0,w.jsx)(t_,{items:v.map(e=>e.id),strategy:tz,children:(0,w.jsx)("div",{className:"task-list",children:v.map(t=>(0,w.jsx)(tH,{task:t,theme:e},t.id))})}),(0,w.jsx)(tL,{adjustScale:!1,dropAnimation:{duration:300,easing:"cubic-bezier(0.25, 0.8, 0.25, 1)"},style:{cursor:"grabbing"},children:x?(0,w.jsx)("div",{style:{transform:"scale(1.03) rotate(2deg)",cursor:"grabbing",boxShadow:"0 12px 24px rgba(0, 0, 0, 0.25), 0 4px 8px rgba(0, 0, 0, 0.15)",borderRadius:"10px",transition:"all 150ms cubic-bezier(0.25, 0.8, 0.25, 1)"},children:(0,w.jsx)(C.default,{theme:e,task:x})}):null})]})]})})}),"drawer"===d&&(0,w.jsx)(B,{show:l,onClose:()=>s(!1),onTaskGenerated:b,theme:e,refreshTasks:f}),(0,w.jsx)(_,{theme:e,onTaskGenerated:b,refreshTasks:f})]})}],10805)},68143,e=>{e.n(e.i(10805))}]);